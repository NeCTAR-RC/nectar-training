<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel='shortcut icon' href='/images/icon.png' />

  <title>Launching and Connecting</title>
  <meta name="description" content="Nectar National Training Resources
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://training.nectar.org.au/package07/sections/firstSSHCommands.html">
  <link rel="alternate" type="application/rss+xml" title="Nectar Training" href="http://training.nectar.org.au/feed.xml" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61845992-2', 'auto');
  ga('send', 'pageview');
</script>
</head>


  <body>

    <header class="site-header">
<div class="nec-header">
  <div class="header-top">
    <div class="header-top-page">
      <div class="nect-login">
        <a href="https://support.nectar.org.au/support/home">Support</a>
        <a href="http://cloud.nectar.org.au/contact/" class="new-tick">Contact</a>
        <b><a href="https://dashboard.rc.nectar.org.au/"><b>Login</b></a></b>
      </div>
    </div>
  </div>

  <div class="header-main">
    <div class="header-main-page">
      <div class="logo-nect">
        <img src='/images/nectar_cloud_logo.jpg' alt="Nectar" height="43", width"248">
      </div>
      <div class="menu-nect">
        
          <a href="/" class="selected">Self-paced Training</a>
          <a href="/for-trainers.html">Resources for Trainers</a>
        
      </div>
    </div>
  </div>

</div>

<div class="normal-block">
  <div class="normal-block-page">
    
      <h3>Self-paced Training</h3>
    
  </div>
</div>

</header>


    <div class="page-content">
      <div class="wrapper">
          <!-- 
    Preprocessing: Determine which part number this is. To avoid having to set numbers 
    manually on each page, determine this here by the file name. 
    -->
  
  
  
  
  

  
  
      
  

  
  
  
  
  
  	
  	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
			
			
			
  	<!-- If we are not in the main hierarchy, we may be looking at a file of one of the sub-categories -->
	
  



<div class="post">

  <header class="post-header">
    <h3>Module 7</h3>
    <h1>Launching and Connecting</h1>
  </header>

  

  <!--
    List of the individual parts of this module (so not all content gets crammed on one page).
    Rendering this list first is necessary 
  -->
  <p> Sections of this module:</p>
  
	
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/index.html"> Introduction</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/createSSHKey.html"> Create a ssh key</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/launching.html"> Launching an instance</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/connectViaSSH.html"> Connect to the instance</a>
			
			<br/>
		
	
		
	 
		
			
		
		

		
		
			
		
		
			
				 <b>
			
			
      <a href="/package07/sections/firstSSHCommands.html"> Configuration and control</a>
			
				</b>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/remoteDesktop.html"> Connect to a remote desktop</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/guiViaSSH.html"> Graphical Interfaces on the ssh terminal</a>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/enableWebServer.html"> Install a web server</a>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/manageStorage.html"> Managing storage</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/summary.html"> Summary</a>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/appendices.html"> Appendix</a>
			
			<br/>
		
	
  <br/>


  <a href="/package07/sections/all.html" target="_blank">View all sections on one page (Printer friendly)</a>
  <br/>
  <br/>
  <h1> Configuration and control </h1>

   <!-- endif for pagedata_avail -->
  

  <!--
  Content of page
  -->
  <article class="post-content">
    
<p><em>Welcome to your new virtual machine!</em></p>

<p>First of all, we want to make sure our system is updated. On Debian and its derivatives, like Ubuntu, you can update your packages with the commands:</p>

<p><code>sudo apt-get update</code></p>

<p><code>sudo apt-get upgrade</code></p>

<p>The first command refreshes the package information, and the second upgrades your system.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>There are several ways to upgrade your system. The command above (<em>sudo apt-get upgrade</em>) simply updates the existing packages. You can also update more intelligently. Here’s a description of the various upgrade commands (<em>extracts from the apt-get manual</em>):</p>

<ul>
  <li>
    <p><em>apt-get upgrade:</em> upgrade is used to install the newest versions of all packages currently installed on the system [..]. Packages currently installed with new versions available are retrieved and upgraded; under no circumstances are currently installed packages removed, or packages not already installed retrieved and installed. New versions of currently installed packages that cannot be upgraded without changing the install status of another package will be left at their current version.</p>
  </li>
  <li>
    <p><em>apt-get dist-upgrade:</em> dist-upgrade in addition to performing the function of upgrade, also intelligently handles changing dependencies with new versions of packages; apt-get has a “smart” conflict resolution system, and it will attempt to upgrade the most important packages at the expense of less important ones if necessary. So, dist-upgrade command may remove some packages.</p>
  </li>
  <li>
    <p><em>apt-get full-upgrade:</em> full-upgrade performs the function of upgrade but may also remove installed packages if that is required in order to resolve a package conflict.</p>
  </li>
</ul>


				</div>

<p>You may also want to change the password for the user <em>ubuntu</em>:</p>

<p><code>passwd</code></p>

<p><em>Note:</em> You will <em>not</em> be prompted for your ubuntu user password when you connect through ssh. This is because in the default configuration, the ssh key is regarded sufficient for authentication purposes. Therefore, each user on the virtual machine should have their own ssh key.</p>

<p>More importantly, you should change the password for <em>root access</em> (administrator rights), especially if you are planning to add more users to the virtual machine:</p>

<p><code>sudo passwd root</code></p>

<p>and type in the new password twice.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you do not change the root password, and later add other users to the VM, any user will be able to log in as root and perform administrator tasks (using the command <em>su -</em>).</p>

<p>When you create new user accounts, and you <em>do not</em> want them to have root access, make sure you <strong>do not</strong> include them in the <strong>user group sudo</strong>. Any user which is member of this group can execute administration tasks.</p>


				</div>

<p>Having problems connecting? The <a href="appendices.html">Appendix</a> includes a section on troubleshooting.</p>

<h3 id="using-a-command-line-text-file-editor">Using a command line text file editor</h3>

<p>Sometimes, we will have to edit files on the instance via the command line. Because this is a command line, we cannot use programs like <em>Word</em> or <em>iNote</em> to edit a file. Instead, we have to use a <em>command line editor</em>.</p>

<p>There is a large number of command line editors available. A simple and easy-to-use editor is <em><a href="http://www.nano-editor.org/">nano</a></em>. <em><a href="http://www.vim.org/">Vim</a></em> is also popular but a bit more difficult to use for beginners.</p>

<p>If you want to edit a file, type</p>

<p><code>nano &lt;path-to-your-filename&gt;</code></p>

<p>The terminal changes into a simple editor. You can edit the file and then exit the editor with <strong>Ctrl+X</strong>. A prompt will come up asking if you want to save the file, type ‘<strong>Y</strong>’ to confirm this.</p>

<p>We will create a file to test this. Type</p>

<p><code>nano MyFile.txt</code></p>

<p>and hit enter to confirm the command. Write a little story or anything you are just thinking of into the file. Then, hit <strong>Ctrl+X</strong> to exit, and confirm with “<strong>Y</strong>” that you want to save the file. Now, type</p>

<p><code>ls</code></p>

<p>and hit enter to confirm the command. You will see the list of files that are there. The list should contain a file “<em>MyFile.txt</em>”. You may print the contents of the text file onto the terminal by typing:</p>

<p><code>cat MyFile.txt</code></p>

<p>and you should be able to read your message in the terminal. Exit again with <strong>Ctrl+X</strong>.</p>

<h2 id="restarting-your-instance">Restarting your instance</h2>

<p>Sometimes, you may want to restart your instance. For example, to make sure everything works correctly after you installed some packages. You can do this in the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a>.</p>

<p><strong>Step 1. Reboot on the Dashboard.</strong></p>

<p>Go to the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a> and click on <em>Instances</em> on the navigation panel on the left to see your instance. On the right side of your instance, you can open up a drop-down box.</p>

<p><img src="images/scrReboot.png" class="aligncenter" style="width:90%; " alt="image" /></p>

<p>click on “<em>Soft Reboot Instance</em>” (a <em>soft reboot</em> is what we know as a reboot. A <em>hard reboot</em> forces the reboot in case the soft reboot does not react).</p>

<p><strong>Step 2. Re-connect ssh client.</strong></p>

<p>Your ssh session, or the PuTTY session if you are on Windows, will have disconnected now, so you have to re-connect. On <strong>Windows</strong> PuTTY, you should have your login session still saved so you just need to load these settings up. On <strong>Mac and Linux</strong>, simply re-run the ssh command (<em>Tip:</em> you can browse the command line history with the “up/down” arrow keys in your ssh terminal. Your ssh command should be in there so you don’t have to type it again).</p>

<h3 id="tip-for-unixmac">Tip for Unix/Mac</h3>

<p>You can make your life a bit easier by saving your configuration for the ssh connection. This will avoid always having to type your IP address. There is two options to do this: a) specifying all details or b) creating an alias for your IP address.
Then, instead of typing in the full ssh command every time, you will just do the following:</p>

<p>Option 1:
<code>ssh MyNectarInstance</code></p>

<p>Option 2:
<code>ssh -i Nectar_Key ubuntu@MyNectarInstance</code></p>

<p><strong><em>Option 1</em></strong></p>

<p>You need to edit a file <em>on your local computer</em> (not on the instance!).</p>

<p>Open a new terminal on your computer. Then, open up the file <em>~/.ssh/config</em> using your favourite editor, for example:</p>

<p><code>nano ~/.ssh/config</code></p>

<p>and add the following contents:</p>

<div class="bgEdit"><pre class="PreformatEdit">Host MyNectarInstance   
HostName NNN.NNN.NNN.NNN   
User ubuntu   
IdentityFile ~/.ssh/Nectar_Key</pre></div>

<p>Again, replacing the N’s with your IP address.  <br />
You can choose any other alias name instead of <em>MyNectarInstance</em>. Save the file and close it.</p>

<p>From now on, you can connect with the command:</p>

<p><code>ssh MyNectarInstance</code></p>

<p>or, if you chose another name, replace MyNectarInstance with it.</p>

<p><strong>Option 2</strong></p>

<p>You may also just alias your IP address in the system’s host file.</p>

<p>On Unix systems and on Mac 10.2 and newer, the file to edit is usually the file <em>/etc/hosts</em>.  On Mac 9 and earlier you can find it in the Preferences or Systems folder.</p>

<p>Open this file in your favourite editor, for example:</p>

<p><code>sudo nano /etc/hosts</code></p>

<p>and add the following line:</p>

<div class="bgEdit"><pre class="PreformatEdit">NNN.NNN.NNN.NNN   MyNectarInstance</pre></div>

<p>replacing the N’s by the IP address of your instance. You may also choose another name instead of MyNectarInstance. Next time you ssh into the instance, you can connect with:</p>

<p><code>ssh -i &lt;path-to-your-keyfile&gt;  ubuntu@MyNectarInstance</code></p>

<p>Note this is the same command we used earlier, but you can type <em>MyNectarInstance</em> instead of your IP address. You will be asked to accept the authenticity of the host again. Answer with “<em>yes</em>”.</p>

  </article>


  
  <!--
  Previous section / Next section links. Very simple design to start with.
  -->
  <p>
  
  	
    <a href="/package07/sections/connectViaSSH.html">Previous section</a>
  
  &nbsp; &nbsp; &nbsp;
  
  	
    <a href="/package07/sections/remoteDesktop.html">Next section</a>
  
  </p>
   <!-- endif for pagedata_avail -->

</div>

      </div>
    </div>

    <div style="background-color: #0E0E0E; padding: 20px 20px 20px 60px; color: white; font-size: 12px">
  <p>Copyright &copy;2015 NeCTAR</p>
  <img src="/images/NCRIS_PROVIDER_rev.png" alt="NCRIS_PROVIDER_rev" width="132" height="63" />
  <p><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png">
  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a></p>
</div>


  </body>

</html>
