<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel='shortcut icon' href='/images/icon.png' />

  <title>Launching and Connecting</title>
  <meta name="description" content="Nectar National Training Resources
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://training.nectar.org.au/package07/sections/guiViaSSH.html">
  <link rel="alternate" type="application/rss+xml" title="Nectar Training" href="http://training.nectar.org.au/feed.xml" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61845992-2', 'auto');
  ga('send', 'pageview');
</script>
</head>


  <body>

    <header class="site-header">
<div class="nec-header">
  <div class="header-top">
    <div class="header-top-page">
      <div class="nect-login">
        <a href="https://support.nectar.org.au/support/home">Support</a>
        <a href="http://cloud.nectar.org.au/contact/" class="new-tick">Contact</a>
        <b><a href="https://dashboard.rc.nectar.org.au/"><b>Login</b></a></b>
      </div>
    </div>
  </div>

  <div class="header-main">
    <div class="header-main-page">
      <div class="logo-nect">
        <img src='/images/nectar_cloud_logo.jpg' alt="Nectar" height="43", width"248">
      </div>
      <div class="menu-nect">
        
          <a href="/" class="selected">Self-paced Training</a>
          <a href="/for-trainers.html">Resources for Trainers</a>
        
      </div>
    </div>
  </div>

</div>

<div class="normal-block">
  <div class="normal-block-page">
    
      <h3>Self-paced Training</h3>
    
  </div>
</div>

</header>


    <div class="page-content">
      <div class="wrapper">
          <!-- 
    Preprocessing: Determine which part number this is. To avoid having to set numbers 
    manually on each page, determine this here by the file name. 
    -->
  
  
  
  
  

  
  
      
  

  
  
  
  
  
  	
  	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
			
		
		
	
		
		
		
	
		
		
		
	
		
		
		
	
		
		
		
	
		
		
			
		
		
			
			
			
  	<!-- If we are not in the main hierarchy, we may be looking at a file of one of the sub-categories -->
	
  



<div class="post">

  <header class="post-header">
    <h3>Module 7</h3>
    <h1>Launching and Connecting</h1>
  </header>

  

  <!--
    List of the individual parts of this module (so not all content gets crammed on one page).
    Rendering this list first is necessary 
  -->
  <p> Sections of this module:</p>
  
	
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/index.html"> Introduction</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/createSSHKey.html"> Create a ssh key</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/launching.html"> Launching an instance</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/connectViaSSH.html"> Connect to the instance</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/firstSSHCommands.html"> Configuration and control</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
			
			
      <a href="/package07/sections/remoteDesktop.html"> Connect to a remote desktop</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
			
		
		

		
		
			
		
		
			
				 <b>
			
			
      <a href="/package07/sections/guiViaSSH.html"> Graphical Interfaces on the ssh terminal</a>
			
				</b>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/enableWebServer.html"> Install a web server</a>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/manageStorage.html"> Managing storage</a>
			
			<br/>
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		

		
		
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/summary.html"> Summary</a>
			
			<br/>
		
	
		
	 
		
		
			
		

		
		
		
			
			
      <a href="/package07/sections/appendices.html"> Appendix</a>
			
			<br/>
		
	
  <br/>


  <a href="/package07/sections/all.html" target="_blank">View all sections on one page (Printer friendly)</a>
  <br/>
  <br/>
  <h1> Graphical Interfaces on the ssh terminal </h1>

   <!-- endif for pagedata_avail -->
  

  <!--
  Content of page
  -->
  <article class="post-content">
    
<p>If you want to run a single graphical application, you can also do this without setting up a remote desktop. You can do this via the ssh command line and start the application directly.</p>

<p><strong>The advantage</strong> is that you don’t need to set up a remote desktop server on your instance and install a client on your local machine.</p>

<p><strong>The downsides</strong> are (1) it introduces some <strong>security issues</strong>, which will not be discussed in detail here, and are usually not a big worry (see security note below for a few details). And (2), this is (perhaps surprisingly) <strong>a lot slower</strong> than a remote desktop solution. This is because of the way the communication is encoded.</p>

<p><em>Note</em>: This technique allows no desktop sharing, just remote application running (However you could use <a href="http://en.wikipedia.org/wiki/Xnest">XNest</a>, not discussed further at this point).</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The <strong>security issue</strong> arising with running graphical applications via the ssh connection is that we have to <strong>enable X11 Forwarding</strong>. X11 is the base for the Linux graphical applications (e.g. opening windows). With X11 forwarding, the server is likely to gain shell access to the client (the ssh terminal you are running on your computer): the server can send X11 commands back to the client. X11 was not designed with security in mind, it was designed with the idea that all programs that you’re displaying are run by you and therefore trusted anyway. However ssh also has a SECURITY extension which disables some obvious attacks such as keyboard grabs and key injection. However it still allows other security issues like focus stealing.</p>

<p><em>In simple terms:</em> Let’s say you open a SSH connection to &lt;some-server&gt;, with X11 forwarding enabled. The primary risk is that if &lt;some-server&gt; is malicious, then &lt;some-server&gt; can do all sorts of things to the windows/applications you have open on your own computer.</p>

<p>For instance, &lt;some-server&gt; can open up windows on your computer, can close other windows you have open, can spy on the contents of other windows you have open and on the keys you type into other windows. It can inject spoofed keystrokes and mouse events into other windows you have open, and generally just mess with every other window you have open on my machine — even if some of those other windows are local applications running locally.</p>

<p>In general, because you log on to your own remote machine and not just &lt;some-server&gt;, this security risk is not much of a worry — only if your instance was infected by malicious software, this would be a potential security lead.</p>


				</div>

<h3 id="step-1-check-that-your-instance-allows-x11-forwarding">Step 1. Check that your Instance allows X11 Forwarding</h3>

<p>We have to enable <em>X11 forwarding</em>. It may already be enabled, but make sure it is. Go to your ssh terminal and type:</p>

<p><code>sudo nano /etc/ssh/sshd_config</code></p>

<p>to edit the configuration file.</p>

<p>Scroll down until you find the line</p>
<div class="bgEdit"><pre class="PreformatEdit">X11Forwarding yes</pre></div>

<p>(it may be a <em>no</em> instead of the <em>yes</em>). If this line starts with a #, remove the #. Make sure it is set to <em>yes</em>. If you cannot find the line, add it at the end of the file, just as it is shown above.</p>

<p>Scroll further to find the following line:</p>

<div class="bgEdit"><pre class="PreformatEdit">X11DisplayOffset 10</pre></div>

<p>and make sure it is set to 10.</p>

<p>Exit the editor with <strong>Ctrl+X</strong> (and confirm saving the file with ‘<strong>Y</strong>’).</p>

<p>If you did not have to change the file, you can jump to the next step.</p>

<p>Otherwise, you now have to restart ssh on your instance. You can do by typing:</p>

<p><code>sudo /etc/init.d/ssh restart</code></p>

<h3 id="step-2-log-in-to-your-instance-via-ssh">Step 2. Log in to your instance via ssh</h3>

<h4 id="linux">Linux</h4>

<p>Open up a terminal. We will connect to the instance with the ssh command that we used <a href="connectViaSSH.html">in an earlier section</a>, but this time you have to add the <strong>-X</strong> option to the command, to enable graphics mode.</p>

<p><code>ssh -i &lt;your-private-key-file&gt; -X  ubuntu@NNN.NNN.NNN.NNN</code></p>

<h4 id="mac">Mac</h4>

<p>You first need to install <em>XQuartz</em> on your Mac. If you don’t have it already, download from the <a href="http://xquartz.macosforge.org/">XQuartz website</a></p>

<p><em>Note: If you have previously followed the steps to install the X2Go Client, you will already have XQuartz installed!</em></p>

<p>After you installed XQuartz, open up a Terminal on your local computer. We will connect to the instance with the ssh command we used <a href="connectViaSSH.html">in an earlier section</a>, but this time you have to add the <strong>-X</strong> option to the command, to enable graphics mode.</p>

<p><code>ssh -i &lt;your-private-key-file&gt; -X  ubuntu@NNN.NNN.NNN.NNN</code></p>

<h4 id="windows">Windows</h4>

<p>If you use Windows you will need to install a X11 server locally on your windows computer. You can use for example <a href="http://sourceforge.net/projects/xming/">Xming</a>.</p>

<p>Open your PuTTY session and load your settings that you previously saved (to do this, select <strong>Session</strong> in the navigation pane on the left, select your saved session from the list, and click <strong>Load</strong>).</p>

<p>Then, go to “Connection &gt; SSH &gt; X11” in the navigation pane. You need to check <strong>Enable X11 forwarding</strong> and specify the X display location. If you did not change anything in the default configuration of Xming, then set the display location to “localhost:0”.</p>

<p>Otherwise, if you change the Xming configuration using the tool <strong>Programs &gt; Xming &gt; XLaunch</strong>, make sure to set the parameters for the display accordingly.</p>

<p><img src="images/scrPuttyX11Forwarding.png" class="aligncenter" style="width:60%; " alt="image" /></p>

<h2 id="step-3-install-x-windowing-system-on-your-instance">Step 3. Install X Windowing system on your instance</h2>

<p>Your instance still needs a concept of graphical interfaces, so we need to install it.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you already have previously installed a desktop environment (e.g. LXDE, Gnome, KDE, XFCE) as we have done in <a href="installDesktopEnvironment.html">an earlier section</a>, then you can <strong>skip this step</strong>, because the windowing system is already installed.</p>

				</div>

<p>To install the very basic windowing system, go to your ssh session into your instance and type:</p>

<p><code>sudo apt-get install xauth</code></p>

<p><code>sudo apt-get install x11-apps</code></p>

<p>It is likely the xauth package (first command) already installed, but we are doing this just in case. If it is installed, the first command will not re-install any packages.</p>

<h2 id="step-4-run-a-graphical-application">Step 4. Run a graphical application</h2>

<p>We will now test if this works. Go to your <em>ssh terminal</em> (or on Windows, the PuTTY terminal) and type:</p>

<p><code>xcalc &amp;</code></p>

<p>This should open up a simple calculator application that is installed by default. You may have to wait quite a while until it opens up, as said earlier, this way to run graphical applications pretty slow.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Note</em>: The &amp; after the command causes the calculator to open up and detach from the terminal. If you skip it, the calculator will open, but you won’t be able to type other commands in the terminal.</p>

				</div>

<p>If this worked, try a larger application, like firefox. Go to your <em>ssh terminal</em> (or PuTTY on Windows) and type:</p>

<p><code>sudo apt-get install firefox</code></p>

<p>(It may already be installed)  <br />
Then, type</p>

<p><code>firefox &amp;</code></p>

<p>and wait a while until firefox opens. You may notice the amount of time you have to wait is much longer than when you have a remote desktop open (as an <a href="remoteDesktop.html">earlier section</a> described). To start with, ignore some warnings and error messages that may come up — it really takes forever for firefox to come up.</p>

<p><strong>Troubleshooting on Unix/Mac</strong></p>

<p>If you receive errors trying to run graphical applications, try the option <strong>-Y</strong> (instead of <strong>-X</strong>) in your ssh command (in Step 2 above).</p>


  </article>


  
  <!--
  Previous section / Next section links. Very simple design to start with.
  -->
  <p>
  
  	
    <a href="/package07/sections/runSeveralDesktopEnvs.html">Previous section</a>
  
  &nbsp; &nbsp; &nbsp;
  
  	
    <a href="/package07/sections/enableWebServer.html">Next section</a>
  
  </p>
   <!-- endif for pagedata_avail -->

</div>

      </div>
    </div>

    <div style="background-color: #0E0E0E; padding: 20px 20px 20px 60px; color: white; font-size: 12px">
  <p>Copyright &copy;2015 NeCTAR</p>
  <img src="/images/NCRIS_PROVIDER_rev.png" alt="NCRIS_PROVIDER_rev" width="132" height="63" />
  <p><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png">
  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a></p>
</div>


  </body>

</html>
