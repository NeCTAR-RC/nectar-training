<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel='shortcut icon' href='/images/icon.png' />

  <title>Launching and Connecting</title>
  <meta name="description" content="Nectar National Training Resources
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://training.nectar.org.au/package07/sections/all.html">
  <link rel="alternate" type="application/rss+xml" title="Nectar Training" href="http://training.nectar.org.au/feed.xml" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61845992-2', 'auto');
  ga('send', 'pageview');
</script>
</head>


  <body>
    <div class="page-content">
      <div class="wrapper">
        <p><a href="/"><img src="/images/nectar_cloud_logo.jpg" alt="Nectar"/></a></p>
        <h3>Module 7</h3>
        <h1>Launching and Connecting</h1>

        
<h2 id="introduction">Introduction</h2>

<p>In this module you will learn how to launch an instance and how to connect to it. We will discuss two ways to connect: (a) using the command line and (b) to a remote desktop, with the benefits of having a graphical user interface (GUI). We will briefly take a look at how to run graphical applications via the command line (instead of the remote desktop), and we will also set up a web server to publish a very simple website. Finally, we will set up the different cloud storage types, so we can access the storage remotely and directly from our instance.</p>

<h3 id="videos">Videos</h3>

<p>The following videos go through most of the content in this module and offer a less in-depth description of the subject than the documentation does.</p>

<p><a href="https://www.youtube.com/watch?v=Y9JVdyRPlcg">https://www.youtube.com/watch?v=Y9JVdyRPlcg</a></p>

<p><a href="https://www.youtube.com/watch?v=cVX3e_bYee8">https://www.youtube.com/watch?v=cVX3e_bYee8</a></p>

<p><a href="https://www.youtube.com/watch?v=eDDVUj1qyC0">https://www.youtube.com/watch?v=eDDVUj1qyC0</a></p>

<p><a href="https://www.youtube.com/watch?v=H3a9-QNQsZ4">https://www.youtube.com/watch?v=H3a9-QNQsZ4</a></p>

<p><a href="https://www.youtube.com/watch?v=XrlHNvQMTN4">https://www.youtube.com/watch?v=XrlHNvQMTN4</a></p>

<p><a href="https://www.youtube.com/watch?v=7V8XB6_qR98">https://www.youtube.com/watch?v=7V8XB6_qR98</a></p>

<h3 id="general-notes">General notes</h3>

<p><strong>What is an “instance”?</strong></p>

<p>In Module 5 we have already discussed in more detail what an instance is, but let’s do a little recap at this point. 
In the NeCTAR Research Cloud, an instance is a virtual machine.
Instances running inside the Research Cloud are just like real-life computers, except that they run remotely, “in the Cloud”. Here and when learning about them on the web, you will often find them referred to as “instances”.</p>

<p><strong>Instance <em>vs</em> “local computer”</strong></p>

<p>In this document we will often talk about the “local computer” as opposed to the “instance”. The local computer is the one you are probably sitting in front of right now: It is your home or office computer that you use to connect to the instance. The instance is your virtual machine that is running in the NeCTAR cloud.</p>

<p>You may be familiar with connecting to remote computers already. You may have connected to a remote desktop, or used a command line. The same tools and techniques apply when connecting to running instances. Your instance has a public IP address and can be reached and controlled with any remote access tools you wish to use, after you have set it up for remote access. For example, you can use an SSH terminal, or alternatively connect to your remote desktop.</p>

<p>In this module we will create and launch an instance (a virtual machine, short: VM) and go through the two options on how you can connect to your instance (terminal and remote desktop).</p>

<p><strong>Use of Terminals</strong></p>

<p>Throughout the exercises, we will use a Terminal to type commands. To prepare, make sure you know how to open your Terminal by following instructions below for your Operating System.</p>

<p>On <strong>Windows</strong>, you will use two terminals:</p>

<ul>
  <li>
    <p>The <strong>PuTTY</strong> terminal to connect to and type commands for the instance. You will need to download PuTTY:
You will need the files <em>PuTTYgen.exe</em> and the file <em>Putty.exe</em> from the
<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">official PuTTY website</a>.
This Terminal will be referred to as the <strong>“ssh terminal”</strong>.</p>
  </li>
  <li>
    <p>The <strong>Windows command line</strong> on your computer.  You can open it by typing “cmd” into the search field (on Windows &lt; 8 on “Start”; on Windows 8 in the “App search” field). 
This Terminal will be referred to as your <strong>“local Terminal”</strong>.</p>
  </li>
</ul>

<p>On <strong>Mac and Linux</strong>, there are built-in terminals available. You can access them as follows:</p>

<ul>
  <li>
    <p>On <strong>Linux</strong> Systems, depending on your desktop environment, opening a terminal is usually achieved by clicking on the terminal symbol, or by right click on the desktop and select “<em>Open Terminal</em>”.</p>
  </li>
  <li>
    <p>On a <strong>Mac</strong>, you can open a terminal as follows:</p>

    <ol>
      <li>
        <p>Bring up “Spotlight Search” by holding down the “Command” and Spacebar” keys simultaneously.</p>
      </li>
      <li>
        <p>In the search box that appears, type “Terminal” and press the Return key.</p>
      </li>
    </ol>

    <p>Alternatively, in the <em>Finder</em>, go to <em>Applications &gt; Utilities</em> and you will find the Terminal app there.</p>
  </li>
</ul>

<h3 id="conventions">Conventions</h3>

<p>The notation throughout the training documents can be interpreted as follows:</p>

<p>Words in <em>italics</em> are used for names and terminology, e.g. name of a software, or name of a computing concept. It may also just emphasise a word in the traditional way. Quotations are also written in italics and are put in between quotatioin marks.</p>

<p>Words in <strong>bold</strong> are used to highlight words which identify important concepts of a paragraph, to make it easier for users to skim through the text to find a paragraph which explains a certain idea, concept or technology.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Additional information</strong> which is optional to read is displayed in <em>info boxes</em> like this one.</p>

				</div>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Important information</strong> is displayed in boxes like this one.</p>

				</div>

<div class="bgDefinition" style="min-height: 55px;">
					<img src="/images/glyphicons-352-book-open.png" alt="image" align="left" style="width:24px; height:22px;
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Definition of terms</strong> are displayed in boxes of this style.</p>

				</div>

<div class="bgPrerequisite">
					<img src="/images/glyphicons-333-certificate.png" alt="image" align="left" style="width:17px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Possibly specific <strong>prerequisites</strong> for reading a particular section are contained in this type of box at the beginning of a section.</p>

				</div>

<p>The use of command line tools is part of this course. In a <em>Terminal</em>, you will be directed to type in <em>commands</em>. Commands are formatted as follows:</p>

<p><code>command-name argument1 argument2 ... argumentn</code></p>

<p>Throughout the exercises, when you see a word in pointed brackets, like &lt;<em>this-word</em>&gt;, it means that you have to replace everything inside the brackets, and <em>including the brackets</em>, with whatever is described within the brackets.</p>

<p>For example, if you are prompted to run a command named <em>the-command</em> which takes two arguments:</p>

<p><code>the-command -f &lt;yourfile&gt;</code></p>

<p>Then you have to replace the second argument, &lt;yourfile&gt;, with the <em>file name</em> that is being referenced in the exercise. For example</p>

<p><code>the-command -f thefile.txt</code></p>

<p>When editing a file, the contents of it will be displayed in a different font and with background colour as follows:</p>

<div class="bgEdit"><pre class="PreformatEdit">The content of the file
The next line in this file</pre></div>

<p>Output on the command line terminal is printed in boxes formatted as follows:</p>

<div class="bgTerminal"><pre class="PreformatTerminal">NectarInstance:~ Jennifer$ whoami
Jennifer</pre></div>

<h2 id="create-a-ssh-key">Create a ssh key</h2>

<p>First, we will need to create a <strong>ssh key pair</strong> for connecting to our instances. An ssh key pair is required to encrypt the data which is transferred to communicate with the instance. The pair consists of two keys: A <em>private</em> key, and a <em>public</em> key.  The public key is called “public” because that’s the one which is placed on the server and which you may upload online without worrying about security issues. It is useless without its counterpart, the <em>private</em> key. The private key is the secret key which you keep on your local computer so that you may connect to the instance. You should keep the private key very safe and never share it with anyone. Take care not to lose it, otherwise you won’t be able to connect to your machine. The connection to the machine only works with both keys.</p>

<p><img src="images/SSHKeys.png" class="aligncenter" style="width:70%; " alt="image" />
The image above shows two computers connected through their <em>ports</em>, with an ssh server and client encrypting the connection. Applications can use this secure ssh connection to exchange data.</p>

<p>We will first have to generate this key pair before we can proceed with launching an instance.</p>

<p>The ssh keys will have a <em>name</em>. You should choose a name that you can associate with your instance, for example “<em>Nectar_Key”</em>. As a general rule of thumb, file names should consist of alphanumeric characters and underscores ( _ ) only. You should avoid white spaces. They makes working with files on Unix systems a bit clumsy.</p>

<p><em>Note:</em> The process differs between Unix/Mac Systems and Windows. Follow the steps described below for your platform, and then continue to the next section.</p>

<h3 id="mac-and-linux">Mac and Linux</h3>

<p>SSH key pairs can be generated with the <em>ssh-keygen</em> command.</p>

<p>If you choose <em>Nectar_Key</em> as your key name, you will have two files after the generation of keys: The private key, called <em>Nectar_Key</em> and the public key, called <em>Nectar_Key.pub</em>.</p>

<ol>
  <li>
    <p>Open your Unix or Mac Terminal. You will start off in your <em>“home”</em> directory. If you already had the terminal open before, make sure you are in the home directory, by simply typing   <br />
<code>cd</code>  <br />
Now, check if you already have a directory called <em>.ssh</em>, by typing  <br />
<code>ls -a</code>  <br />
A list of files in your home directory will be printed. If you don’t see the name <em>.ssh</em> in this list, create the directory (if you see the directory, skip this command):  <br />
<code>mkdir .ssh</code>  <br />
and change to this directory:  <br />
<code>cd .ssh</code>   <br />
Now generate the key with  <br />
<code>ssh-keygen -t rsa -f Nectar_Key</code>  <br />
This generates a pair of keys in the directory <em>.ssh</em>, which is the default location for ssh keys.  <br />
You will be asked to specify a passphrase. Choose a secure passphrase! But make sure that you store your password somewhere safe - you will not be able to connect to your instance if you forget the password!</p>
  </li>
  <li>
    <p>You will have generated (1) a key you keep private, named <em>Nectar_Key</em> and (2) a public key, named <em>Nectar_Key.pub</em>. If you type  <br />
<code>ls</code>  <br />
Then you should see both files listed.</p>
  </li>
  <li>
    <p>Open the public key file with your favourite text editor. If you don’t have a favourite editor, here are some suggestions:  <br />
On a <strong>Mac</strong>, type  <br />
<code>open -e Nectar_Key.pub</code>  <br />
which should open the key in TextEdit.   <br />
On a <strong>Linux</strong> gnome environment (e.g. Unity), type  <br />
<code>gedit Nectar_Key</code>  <br />
or if you are using KDE, type   <br />
<code>kate Nectar_Key</code>  <br />
If you are using another desktop environment we assume you are familiar with your favourite text editor.</p>
  </li>
  <li>
    <p>Copy <em>all</em> the text which is contained in the file <em>Nectar_Key.pub</em> into the clipboard. With CTRL+A you can mark all text, and with CTRL+C copy it (on a Mac it is Command (⌘) instead of CTRL). You will need the contents of the public key on the keyboard in one of the next steps.</p>
  </li>
</ol>

<h3 id="windows">Windows</h3>

<p>Open the <strong>PuTTYgen</strong> program by clicking on <em>PuTTYgen.exe</em> which you downloaded in the beginning of this tutorial.</p>

<p><img src="images/scrPuttyGen1.png" class="alignright" style="width:350px; margin-left:20px;" alt="image" /></p>

<ol>
  <li>
    <p>For <strong>Type of key to generate</strong>, select <strong>SSH-2 RSA</strong>.</p>
  </li>
  <li>
    <p>Click on <strong>Generate</strong>.</p>
  </li>
  <li>
    <p>Move your mouse in the area below the progress bar. When the progress bar is full, PuTTYgen generates your key pair.</p>
  </li>
</ol>

<p style="clear:both"></p>

<p><img src="images/scrPuttyGen2.png" class="alignright" style="width:350px; margin-left:20px;" alt="image" /></p>

<ol>
  <li>
    <p>Type a passphrase in the <strong>Key passphrase</strong> field. Choose a secure passphrase! Type the same passphrase in the <strong>Confirm passphrase</strong> field.</p>
  </li>
  <li>
    <p>Right-click in the text field “<strong>Public key for pasting into OpenSSH authorized_keys file</strong>” and choose <strong>Select All</strong>. Right-click again in the same text field and choose <strong>Copy</strong>. This copies the content onto the clipboard, we will need to paste it somewhere else in one of the next steps.</p>
  </li>
  <li>
    <p>Click the <strong>Save private key</strong> button to save the private key. It is important that you save the key, because you will need the file later. So save it in a folder where you can find it again. In this exercise, we will name the file <em>Nectar_Key.ppk</em>.</p>
  </li>
  <li>
    <p>Save your public key as well by clicking the <strong>Save public key</strong> button. As a file name, type <em>Nectar_Key.pub.txt</em>.</p>
  </li>
</ol>

<h2 id="launching-an-instance">Launching an instance</h2>

<p>We will now create an instance and choose the resources we require. For this tutorial, we don’t need a lot of resources. You may require more for your research. For more details about how to request an allocation, see <a href="/package05/sections/index.html" title="Module 5">Module 5</a>.</p>

<h3 id="security-note">Security note</h3>

<p>Before we start, a brief note about security:
It is important that we make our instance secure from the very moment we create it. In order to enable the right security settings, we will select the instance to be part of one or several “<em>security groups</em>”.</p>

<div class="bgDefinition" style="min-height: 55px;">
					<img src="/images/glyphicons-352-book-open.png" alt="image" align="left" style="width:24px; height:22px;
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>A <strong>Security Group</strong> opens up access to the instance from outside. Essentially, a security group is a collection of firewall rules, which open up different <em>Ports</em> to access the machine from outside.</p>

				</div>

<p><a href="/package05/sections/index.html" title="Module 5">Module 5</a> has already introduced the concept of <em>Ports</em>. Now we need to <em>free up</em> some Ports in order to be able to communicate with our instance. For example, we will first connect to our instance with a <em>SSH shell</em> from our terminal (Reminder: SSH encrypts our communication with the server). SSH uses <em>Port number 22</em>, so this has to be freed up.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Note</em>: All the pre-defined security groups mentioned in the instructions are available in Project Trials only. To learn how to create your own security group (or re-create the trial groups), refer to the  <a href="appendices.html">Appendix</a> of this module.</p>

				</div>

<p>The following steps will explain how to create an instance and how to make sure it has been assigned to the security groups we need to connect to it.</p>

<h3 id="step-1-logging-on">Step 1: Logging on</h3>

<p>First, we will have to log on to the <em>Dashboard</em>, which is our interface for managing our virtual machines. The Dashboard can be accessed with any browser, e.g. Firefox, Safari or Windows Internet Explorer. Open your browser of choice (we suggest Firefox), and go to:</p>

<p><a href="https://dashboard.rc.nectar.org.au/">https://dashboard.rc.nectar.org.au/</a></p>

<p><img src="images/scrDashboardLogin.png" class="alignright" style="width:300px; margin-left:20px" alt="image" /></p>

<p>Click “<em>Log in</em>” on the first window. Then, select your organisation from the drop-down menu (you may also type in the first characters of your organisation name in order to find it quicker). You will be redirected to a page where you can type in your username and password. This should in most cases be the username and password you usually use to access your account at your University or Research Organisation.</p>

<p>Click <strong>OK</strong> for all terms and conditions if logging in the first time (you will not have to do this every time).</p>

<h3 id="step-2-open-the-launch-dialogue">Step 2: Open the Launch Dialogue</h3>

<p>Go to <strong>Dashboard &gt;  Instances</strong>. A list of your running instances will be listed. If this is the first time you are doing this, the list will be empty. Now click on <strong>Launch instance</strong> on the top right of the overview.</p>

<p><img src="images/scrDashboardEmptyInstances.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<h3 id="step-3-selecting-resources">Step 3: Selecting resources</h3>

<p><img src="images/scrLaunchDialogue.png" class="alignright" style="width:350px; margin-left:20px;" alt="image" /></p>

<p>Choose the name of your instance and the “<em>flavor</em>”. Different flavors allocate different amounts of memory and disk space for you. Select the flavors in the drop-down box and information about the resources are displayed on the right side of the window. You may select a few flavors to see the differences between the flavors. For this tutorial, choose the <strong>flavor</strong> “<strong>m1.small</strong>”, which offers 30GB of ephemeral storage (we will need this <a href="manageStorage.html">in a later section</a>.</p>

<p>You could launch several instances of the same flavor, but for now we will launch only 1, so leave “<strong>Instance Count</strong>” at <strong>1</strong>. Leave “<strong>Instance Boot Source</strong>” on “<strong>Boot from Image</strong>”. Choose the most recent version of  “NeCTAR Ubuntu”  from the “<strong>Image name</strong>” list.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong><em>NOTE:</em></strong> At the time of writing the image “<em>NeCTAR Ubuntu 14.10 (Utopic) amd64</em>” was used. If you choose a version much newer than this, there may be some differences to the descriptions given in this tutorial. In general, a newer version should work fine with the exercises below, you may only see different text (phrasing) in the terminals command line output.</p>

				</div>

<p>Don’t click “Launch” just yet… we have to set the security settings first!</p>

<h3 id="step-4-ensuring-security">Step 4: Ensuring security</h3>

<p>Now, we will choose the security settings. Go to the tab “<strong>Access &amp; Security</strong>”.
We can choose which <strong>Security Groups</strong> the instance will belong to (see above for explanation about security groups). 
We will connect to the instance with <em>ssh</em>. Ssh uses port number 22, so this has to be freed up. Therefore, tick the “<strong>ssh</strong>” box. We will also publish a little website in a later exercise, which requires http, so tick the “<strong>http</strong>” box also. To test whether your instance is reachable, we will also need “<strong>icmp</strong>”.  <br />
<em>Note:</em> We can also change the security groups of the instance later on, but it’s convenient to do this now.</p>

<p>Next, we will specify the key for connecting to this instance (that’s the one we just generated).</p>

<p><img src="images/scrSecurityGroup.png" class="alignright" style="width:350px; margin-left:20px;margin-top:10px;" alt="image" /></p>

<ol>
  <li>
    <p>You should have the contents of your public key still in your clipboard, unless you have copied and pasted something else since we did this above. If you have, copy the contents of <em>Nectar_Key.pub</em> again.</p>
  </li>
  <li>
    <p>Click on the plus (“+”) to add a new key.</p>
  </li>
  <li>
    <p>Specify the <strong>Key Pair Name</strong>. This can be any name, but for simplicity choose <em>Nectar_Key</em> also.</p>
  </li>
  <li>
    <p>Paste the contents into the large text box labelled <strong>Public Key</strong> (use <em>CTRL+V</em>, or right click in the box and “Paste”).</p>
  </li>
  <li>
    <p>Now, click “<strong>Import key pair</strong>”. This key will now be available for future use. Next time you launch an instance you can select this key from the drop-down list directly, without having to copy and paste it again. The window closes and you are back to the window to configure your instance.</p>
  </li>
</ol>

<h3 id="step-5-optional-choose-your-availability-zone">Step 5 (optional): Choose your Availability zone</h3>

<p><img src="images/scrAvailabilityZone.png" class="alignright" style="width:350px; margin-left:20px;" alt="image" />
If you need access to specific facilities (e.g. Volume storage), you can manually choose the location of your instance in the “<strong>Availability Zone</strong>” tab. The Availability Zone is where your instance will be running physically. Unless you know that you need access to specific services, it is recommended to leave this in the default setting, because then the location with the most available resources is chosen.</p>

<h3 id="step-5-launching-the-instance">Step 5: Launching the instance</h3>

<p>You can now launch the instance by clicking on the “<strong>Launch</strong>” button. You will get back to the overview of your instances. You will see the status of your instance in the overview. You need to wait a few minutes.</p>

<p>The Instance will normally pass from Status “Build” to “Active”. You will see an <strong>IP address</strong> for your instance (4 numbers separated by a dot). <strong>Write it down</strong>, or keep this window open so you can see it, as we will need it in the next step to connect to your instance.</p>

<p><strong>Congratulations!!</strong></p>

<p>Your instance is now reachable on this IP address. Your applications can connect to the Ports that you have allowed earlier in the Security Groups.</p>

<h2 id="connect-to-the-instance">Connect to the instance</h2>

<p>To connect to your instance, you will need its IP address. You should have just written this down, or you can look it up on the Dashboard (<em>Compute &gt; Instances</em>).</p>

<p>In the following text, your <strong>IP address</strong> is described as <strong>NNN.NNN.NNN.NNN</strong>, which you will have to replace with your own instance’s IP address.</p>

<p>To get a secure connection, we need to log on to the instance via ssh.</p>

<h3 id="connect-via-ssh">Connect via ssh</h3>

<h4 id="step-1-test-connectivity">Step 1: Test connectivity</h4>

<p>First, let’s do a little test to see if your instance is reachable. On Linux/Mac, you can use the command line shell that you have just opened.<br />
On Windows, open your <em>Windows command line</em>.</p>

<p>Use the terminal to try to <em>“ping”</em> your instance (checking that you can reach it):</p>

<p><code>ping NNN.NNN.NNN.NNN</code></p>

<p>replacing the N’s with the IP address of your NeCTAR instance you noted above.</p>

<p>The <em>ping</em> command just sends a simple signal to your instance and checks whether it responds. If the ping does not work, then most likely neither will any of the following steps. The ping has worked if you get a response every few seconds, e.g.</p>

<div class="bgTerminal"><pre class="PreformatTerminal">PING 144.6.227.170     
(144.6.227.170) 56(84) bytes of data.    
64 bytes from 144.6.227.170: icmp_seq=1 ttl=49 time=354 ms    
64 bytes from 144.6.227.170: icmp_seq=2 ttl=49 time=358 ms</pre></div>

<h4 id="step-2-logging-in">Step 2: Logging in</h4>

<p>We will now log in to our instance using ssh with the private key (the username might be different depending on the image you launched).</p>

<p>Follow the instructions below for the operating system of your local computer.</p>

<p><em>Note:</em> If the ping has worked but the SSH connection does not work after following instructions below, follow the troubleshooting steps in the <a href="appendices.html">Appendix</a>.</p>

<p><strong>Linux/Mac</strong></p>

<p>We will need a command line shell (a “Terminal”) in this exercise. 
On <strong>Linux and Mac</strong>, you have a built-in terminal. Open it now (if you are unsure how, refer to the notes in the introduction).</p>

<p>Go to your command line and type</p>

<p><code>ssh -i Nectar_Key ubuntu@NNN.NNN.NNN.NNN</code></p>

<p>using your own IP address instead of NNN.NNN.NNN.NNN. 
The command line will ask you to establish the authenticity of the server. Type “yes”.</p>

<p>You will then be asked for your passphrase (that’s the one you chose when generating the SSH Key).</p>

<p><em>Note</em>: If you named your key other than <em>Nectar_Key</em>, you should replace this with your own private key file name here. If you saved the private key in another folder, you will have to specify the full path to it (e.g. <em>ssh -i /home/john/yourkeyfolder/Nectar_Key NNN.NNN.NNN.NNN</em>).</p>

<p><em>On a Mac:</em></p>

<p>You may have to specify the full path to the key. If the above does not work, try instead:</p>

<p><code>ssh -i $HOME/.ssh/Nectar_Key ubuntu@NNN.NNN.NNN.NNN</code></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Our instance has a default <strong>username</strong> that we need to specify when we log in. In this tutorial, we chose a Ubuntu Image when launching the instance. At the time of writing, the user name for Ubuntu is <strong><em>“ubuntu”</em></strong>. Other NeCTAR images may expect different usernames.</p>

<p>Try using <em>root</em> instead of <em>ubuntu</em> (“<em>root@NNN.NNN.NNN.NNN</em>”) for other Operating Systems. For Fedora, the user name may be <em>ec2-user</em>. The right user name for the image you chose is documented in the <a href="https://support.ehelp.edu.au/support/solutions/articles/6000106269-image-catalog">NeCTAR Image_Catalog</a>.</p>

				</div>

<p><em>Well done!</em></p>

<p>Now, you should be connected to your instance and your ssh terminal command line is ready to use.</p>

<p><strong>Windows</strong></p>

<p>On a windows system, we will use the <strong>PuTTY</strong> terminal to connect to the instance. 
We first have to set up our PuTTY session to include the details of our instance, including the keys we are using.</p>

<p>Double-click on the file “<em>PuTTY.exe</em>” which you downloaded when you created the SSH key.</p>

<p>In your PuTTY Window, type your instance’s IP address into the “<strong>Host</strong>” field (you should have taken a note about the IP address earlier, if not you can find it on the Dashboard: Go to <em>Compute &gt; Instances</em>).</p>

<p><img src="images/scrPutty1.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>Then, select the “<strong>Data</strong>” category in the navigation window. Here, we will have to specify the <strong>username</strong>. Choose “<em>ubuntu</em>” as your username. Leave the other fields on default settings.</p>

<p><img src="images/scrPutty2.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Our instance has a default <strong>username</strong> that we need to specify when we log in. In this tutorial, we chose a Ubuntu Image when launching the instance. At the time of writing, the user name for Ubuntu is <strong><em>“ubuntu”</em></strong>. Other NeCTAR images may expect different usernames.</p>

<p>Try using <em>root</em> instead of <em>ubuntu</em> for other Operating Systems. For Fedora, the user name may be <em>ec2-user</em>. The right user name for the image you chose is documented at the <a href="https://support.ehelp.edu.au/support/solutions/articles/6000106269-image-catalog">NeCTAR Image_Catalog</a>.</p>

				</div>

<p>Next, click on the “<strong>SSH &gt; Auth</strong>” sub-category. There is a field labelled “<strong>Private key file for authentication</strong>”. Click on the “<strong>Browse</strong>” button:</p>

<p><img src="images/scrPutty3.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>In the browse window that comes up, select the private SSH key file that you saved on your computer earlier (we named it <em>Nectar_Key</em>)</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Note</em>: If you have generated your ssh key on a Linux system and now need to convert it to Windows, see how to do this in the <a href="appendices.html">Appendix</a>.</p>

<p>Instead of converting keys, you can also simply create a separate set of keys to use with PuTTY. In this case, you have to add the new key as an authorized key on the instance. See the <a href="appendices.html">Appendix</a> for instructions on how to do this.</p>

				</div>

<p>Now, return to the “<strong>Session</strong>” screen in the left navigation window. This is the screen we started at. We will save our settings (the “session”), so that in future we don’t need to type in all the details again. In the “<strong>Saved Sessions</strong>” section, choose any name for this session so that you can remember it, for example “<em>MyNeCTARInstance</em>”. Then, click on the “<strong>Save</strong>” button.</p>

<p><img src="images/scrPutty4.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>Now, connect to the instance by clicking the “<strong>Open</strong>” button. The first time that you connect, you will be asked to verify the identity of the remote server. This is expected the first time you connect to a new server, so you can select “<em>Yes</em>” to continue. You will be prompted for a passphrase. Type in the passphrase that you used to create the SSH key earlier on.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Every time you connect to the instance via Putty, you will have to type in your passphrase. This may get a little cumbersome, so note that there is a tool called <strong><em>Pageant</em></strong> that you can get on the same page where you downloaded <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY</a>. Pageant is an <em>SSH authentication agent</em>. It holds your private keys in memory, already decoded, so that you can use them often without needing to type the passphrase every time. It also eliminates the need to explicitly specify the relevant key to each user account, if you use more than one account to log into a server.</p>

<p>We will <em>not</em> use pageant in this tutorial, but you may be interested to read up on how to use it. You can find instruction in the <a href="appendices.html">Appendix</a>.</p>

				</div>

<p><strong>Well done!</strong></p>

<p>Now, a black Terminal window should open and your command line is ready to use.</p>

<h2 id="configuration-and-control">Configuration and control</h2>

<p><em>Welcome to your new virtual machine!</em></p>

<p>First of all, we want to make sure our system is updated. On Debian and its derivatives, like Ubuntu, you can update your packages with the commands:</p>

<p><code>sudo apt-get update</code></p>

<p><code>sudo apt-get upgrade</code></p>

<p>The first command refreshes the package information, and the second upgrades your system.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>There are several ways to upgrade your system. The command above (<em>sudo apt-get upgrade</em>) simply updates the existing packages. You can also update more intelligently. Here’s a description of the various upgrade commands (<em>extracts from the apt-get manual</em>):</p>

<ul>
  <li>
    <p><em>apt-get upgrade:</em> upgrade is used to install the newest versions of all packages currently installed on the system [..]. Packages currently installed with new versions available are retrieved and upgraded; under no circumstances are currently installed packages removed, or packages not already installed retrieved and installed. New versions of currently installed packages that cannot be upgraded without changing the install status of another package will be left at their current version.</p>
  </li>
  <li>
    <p><em>apt-get dist-upgrade:</em> dist-upgrade in addition to performing the function of upgrade, also intelligently handles changing dependencies with new versions of packages; apt-get has a “smart” conflict resolution system, and it will attempt to upgrade the most important packages at the expense of less important ones if necessary. So, dist-upgrade command may remove some packages.</p>
  </li>
  <li>
    <p><em>apt-get full-upgrade:</em> full-upgrade performs the function of upgrade but may also remove installed packages if that is required in order to resolve a package conflict.</p>
  </li>
</ul>


				</div>

<p>You may also want to change the password for the user <em>ubuntu</em>:</p>

<p><code>passwd</code></p>

<p><em>Note:</em> You will <em>not</em> be prompted for your ubuntu user password when you connect through ssh. This is because in the default configuration, the ssh key is regarded sufficient for authentication purposes. Therefore, each user on the virtual machine should have their own ssh key.</p>

<p>More importantly, you should change the password for <em>root access</em> (administrator rights), especially if you are planning to add more users to the virtual machine:</p>

<p><code>sudo passwd root</code></p>

<p>and type in the new password twice.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you do not change the root password, and later add other users to the VM, any user will be able to log in as root and perform administrator tasks (using the command <em>su -</em>).</p>

<p>When you create new user accounts, and you <em>do not</em> want them to have root access, make sure you <strong>do not</strong> include them in the <strong>user group sudo</strong>. Any user which is member of this group can execute administration tasks.</p>


				</div>

<p>Having problems connecting? The <a href="appendices.html">Appendix</a> includes a section on troubleshooting.</p>

<h3 id="using-a-command-line-text-file-editor">Using a command line text file editor</h3>

<p>Sometimes, we will have to edit files on the instance via the command line. Because this is a command line, we cannot use programs like <em>Word</em> or <em>iNote</em> to edit a file. Instead, we have to use a <em>command line editor</em>.</p>

<p>There is a large number of command line editors available. A simple and easy-to-use editor is <em><a href="http://www.nano-editor.org/">nano</a></em>. <em><a href="http://www.vim.org/">Vim</a></em> is also popular but a bit more difficult to use for beginners.</p>

<p>If you want to edit a file, type</p>

<p><code>nano &lt;path-to-your-filename&gt;</code></p>

<p>The terminal changes into a simple editor. You can edit the file and then exit the editor with <strong>Ctrl+X</strong>. A prompt will come up asking if you want to save the file, type ‘<strong>Y</strong>’ to confirm this.</p>

<p>We will create a file to test this. Type</p>

<p><code>nano MyFile.txt</code></p>

<p>and hit enter to confirm the command. Write a little story or anything you are just thinking of into the file. Then, hit <strong>Ctrl+X</strong> to exit, and confirm with “<strong>Y</strong>” that you want to save the file. Now, type</p>

<p><code>ls</code></p>

<p>and hit enter to confirm the command. You will see the list of files that are there. The list should contain a file “<em>MyFile.txt</em>”. You may print the contents of the text file onto the terminal by typing:</p>

<p><code>cat MyFile.txt</code></p>

<p>and you should be able to read your message in the terminal. Exit again with <strong>Ctrl+X</strong>.</p>

<h2 id="restarting-your-instance">Restarting your instance</h2>

<p>Sometimes, you may want to restart your instance. For example, to make sure everything works correctly after you installed some packages. You can do this in the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a>.</p>

<p><strong>Step 1. Reboot on the Dashboard.</strong></p>

<p>Go to the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a> and click on <em>Instances</em> on the navigation panel on the left to see your instance. On the right side of your instance, you can open up a drop-down box.</p>

<p><img src="images/scrReboot.png" class="aligncenter" style="width:90%; " alt="image" /></p>

<p>click on “<em>Soft Reboot Instance</em>” (a <em>soft reboot</em> is what we know as a reboot. A <em>hard reboot</em> forces the reboot in case the soft reboot does not react).</p>

<p><strong>Step 2. Re-connect ssh client.</strong></p>

<p>Your ssh session, or the PuTTY session if you are on Windows, will have disconnected now, so you have to re-connect. On <strong>Windows</strong> PuTTY, you should have your login session still saved so you just need to load these settings up. On <strong>Mac and Linux</strong>, simply re-run the ssh command (<em>Tip:</em> you can browse the command line history with the “up/down” arrow keys in your ssh terminal. Your ssh command should be in there so you don’t have to type it again).</p>

<h3 id="tip-for-unixmac">Tip for Unix/Mac</h3>

<p>You can make your life a bit easier by saving your configuration for the ssh connection. This will avoid always having to type your IP address. There is two options to do this: a) specifying all details or b) creating an alias for your IP address.
Then, instead of typing in the full ssh command every time, you will just do the following:</p>

<p>Option 1:
<code>ssh MyNectarInstance</code></p>

<p>Option 2:
<code>ssh -i Nectar_Key ubuntu@MyNectarInstance</code></p>

<p><strong><em>Option 1</em></strong></p>

<p>You need to edit a file <em>on your local computer</em> (not on the instance!).</p>

<p>Open a new terminal on your computer. Then, open up the file <em>~/.ssh/config</em> using your favourite editor, for example:</p>

<p><code>nano ~/.ssh/config</code></p>

<p>and add the following contents:</p>

<div class="bgEdit"><pre class="PreformatEdit">Host MyNectarInstance   
HostName NNN.NNN.NNN.NNN   
User ubuntu   
IdentityFile ~/.ssh/Nectar_Key</pre></div>

<p>Again, replacing the N’s with your IP address.  <br />
You can choose any other alias name instead of <em>MyNectarInstance</em>. Save the file and close it.</p>

<p>From now on, you can connect with the command:</p>

<p><code>ssh MyNectarInstance</code></p>

<p>or, if you chose another name, replace MyNectarInstance with it.</p>

<p><strong>Option 2</strong></p>

<p>You may also just alias your IP address in the system’s host file.</p>

<p>On Unix systems and on Mac 10.2 and newer, the file to edit is usually the file <em>/etc/hosts</em>.  On Mac 9 and earlier you can find it in the Preferences or Systems folder.</p>

<p>Open this file in your favourite editor, for example:</p>

<p><code>sudo nano /etc/hosts</code></p>

<p>and add the following line:</p>

<div class="bgEdit"><pre class="PreformatEdit">NNN.NNN.NNN.NNN   MyNectarInstance</pre></div>

<p>replacing the N’s by the IP address of your instance. You may also choose another name instead of MyNectarInstance. Next time you ssh into the instance, you can connect with:</p>

<p><code>ssh -i &lt;path-to-your-keyfile&gt;  ubuntu@MyNectarInstance</code></p>

<p>Note this is the same command we used earlier, but you can type <em>MyNectarInstance</em> instead of your IP address. You will be asked to accept the authenticity of the host again. Answer with “<em>yes</em>”.</p>

<h2 id="connect-to-a-remote-desktop">Connect to a remote desktop</h2>

<p>Using the command line may not feel very intuitive, especially for beginners. Aside from that, sometimes we need to run software that has a graphical interface.</p>

<p>As an alternative to connecting with a ssh terminal, we can also connect to the <em>desktop</em> of our instance and get a graphical interface as we know it from our own computers. A <strong>remote desktop login</strong> allows users to connect to their desktop while being physically away from their computer.</p>

<p>You can also connect to your own home computer’s desktop while you are away, if you set up your home computer accordingly with remote access. This may be a bit difficult to do from your organisation or from your home, as you need access to the computer via the internet from outside, which may require the permission of firewalls used on the premises, and you need a fixed IP address.</p>

<p>However on your NeCTAR instance, it is easy to set up a remote desktop, because the instance is already accessible from outside.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Some remote desktop solutions allow only one user to see the desktop at the same time. Other software also allows <em>desktop sharing</em> in which several users can see a desktop simultaneously. Such a shared desktop can be used as a platform for <em>real-time collaboration</em>. This mostly requires a separate setup, which is not part of this tutorial.</p>

				</div>

<p>To connect to a remote desktop, the remote machine (your instance) has to have a <strong>remote desktop server</strong> installed and running. On your home or office computer, you have to install a <strong>remote desktop client</strong> (sometimes called <em>“viewer”</em>) which connects to the remote desktop server on your instance. The client then displays the desktop of your remote machine. It is like a “window” into your instances desktop; The desktop environment itself is running on the instance.</p>

<h3 id="terminals-on-remote-desktop-vs-ssh-terminal">Terminals on remote desktop <em>vs</em> SSH terminal</h3>

<p>We have previously connected to the instance with via a <em>ssh terminal</em>. When we get a window into the desktop of our instance, we can open a terminal on the desktop as well.</p>

<p>The image below shows both (1) a ssh terminal (left) and (2) a desktop with an open terminal (right):</p>

<p><img src="images/scrTerminalOnRemoteDesktop.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>So what is the difference between the two terminals? When you type <strong>commands</strong> in either of them, it <strong>will have the same effect</strong>. They are both terminals that you can use to control your instance. However, the difference is that</p>

<ol>
  <li>
    <p>The ssh terminal is set up through a secure ssh communication line with your instance. If we use a ssh terminal, <strong>only text</strong> is being transferred (the commands you type and the responses you get). This is very fast, but you cannot run graphical applications, because you can only communicate with the instance via text.  <br />
<em>Note</em>: it actually is possible to run graphical applications via the terminal as well, with some disadvantages. This is discussed <a href="guiViaSSH.html">later in this module</a>, but this is very slow and usually not recommended.</p>
  </li>
  <li>
    <p>The terminal on the remote desktop is connected securely as well (at least the way we will set it up in this tutorial). But instead, the communication includes graphical data and events (e.g. your mouse clicks, and the windows displayed). This is slower than using the terminal only, but you may find it is still fast enough to work with. You can run graphical applications and use the OS menu to find programs and change settings, which may be easier for many of us.</p>
  </li>
</ol>

<h3 id="remote-desktop-protocols">Remote desktop protocols</h3>

<p>When you are connected to a remote desktop, everything you do to interact with the system, for example clicking the mouse, moving a window or typing on your keyboard, is communicated to the remote machine (in this case, your instance). For this kind of communication, computers use <em>“protocols”</em> which are designed for this purpose.</p>

<p>The type of protocol determines properties of the remote desktop, for example how secure it is, how fast it works and what kind of desktop environments it supports. In this tutorial we will use two different protocols to connect to our remote desktop: <em>NX</em> and <em>VNC</em>.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Some wide-spread protocols include:</p>

<ul>
  <li>RDP (Remote Desktop Protocol)
    <ul>
      <li>Originally developed by Microsoft to connect to Windows machines.</li>
      <li>The protocol is <strong>not very secure</strong>, therefore setting up <em>“tunneling”</em> through a secure connection is required.</li>
    </ul>
  </li>
  <li>NX
    <ul>
      <li>NX compresses the data to minimize the amount of information transmitted. NX also caches data to make the session as responsive as possible. For example the first time a menu is opened it may take a few seconds, but on each subsequent opening the menu will appear almost instantly. Therefore, NX allows <strong>fast speed</strong> even with slow internet connections.</li>
      <li>NX uses the SSH protocol to send its data and is therefore <strong>secure</strong>.</li>
    </ul>
  </li>
  <li>VNC (Virtual Network Computing)
    <ul>
      <li>The VNC Protocol (called the RFB protocol) is very simple. It is based on graphic primitives from server to client (“Put a rectangle of pixel data at the specified X,Y position”) and event messages from client to server. This makes VNC <strong>a bit slow</strong>.</li>
      <li>By default, this is <strong>no secure protocol</strong>. Therefore, you need to <em>“tunnel”</em> the connection via a secure SSH connection to make it secure. This may seem a bit complicated to achieve for beginners. Alternatively, some clients like <a href="http://www.uvnc.com/">UltraVNC</a>) support the use of an encryption plugin which encrypts the entire VNC session.</li>
      <li>Because VNC is quite popular, the <strong>client software options</strong> are pretty good for Unix and Windows platforms.</li>
      <li>VNC allows multiple users to see (share) the same desktop.</li>
      <li>To transfer files, printing or audio requires separate services. The VNC only handles displays and inputs, such as interaction with keyboard and mouse.</li>
      <li>Users may access desktops with VNC through their Web browser, without needing to install separate viewer applications. VNC displays a desktop within a browser window by running a Java applet, and this facility should work on any system that has a JVM installed.</li>
      <li>VNC does not support the newer “3D desktops” (e.g. the newer GNOME/Unity or KDE desktops environments. The desktop environments have to be run in classical 2D mode for it to work (e.g. GNOME Flashback).</li>
      <li>To learn more about VNC, here is a <a href="http://www.stuartellis.eu/articles/vnc-on-linux/">good article</a></li>
    </ul>
  </li>
</ul>

<p><strong>Free remote desktop client and server software</strong> includes:</p>

<ul>
  <li>Vnc4server
    <ul>
      <li>the main VNC server software for Linux.</li>
    </ul>
  </li>
  <li>UltraVNC, RealVNC, TightVNC
    <ul>
      <li>popular clients for VNC sessions</li>
    </ul>
  </li>
  <li>X2Go
    <ul>
      <li>An open source product which is pretty fast.</li>
      <li>It uses the NX protocol and is operates through a secure SSH connection</li>
      <li>Supports remote audio, printing, clipboard, file sharing etc.</li>
      <li>Can share a user’s session remotely, but it has to be set up separately.</li>
      <li>It is fairly easy to set up</li>
      <li>There is even a readily available browser plugin to make remotely controlling another PC possible from a web browser. <em>But:</em> Port forwarding and Dynamic DNS are recommended if you’re using this over the Web.</li>
      <li>Due to the use of older NX libraries, it has problems with the newer “3D Desktops”, e.g. Gnome/Unity and newer KDE desktop environments. Only the older environments are supported.</li>
      <li>No Android / iOS client available, unless using the web interface</li>
    </ul>
  </li>
  <li>NX Server, free edition
    <ul>
      <li>Easy to set up</li>
      <li>Not very fast</li>
      <li>Only free to 3 users</li>
      <li>Can’t <em>share</em> a user’s session remotely.</li>
    </ul>
  </li>
  <li>FreeNX Server
    <ul>
      <li>A Server for the NX protocol, similar to NX Server, but free.</li>
      <li>No real good documentation, not easy to install</li>
      <li>Can’t <em>share</em> a user’s session remotely.</li>
    </ul>
  </li>
  <li><a href="https://www.nomachine.com/">NoMachine</a>)
    <ul>
      <li>A client to connect to an NX server (e.g. FreeNX).</li>
      <li>Not free for commercial use (only private)</li>
      <li>Simultaneous connections from only 2 users.</li>
    </ul>
  </li>
  <li>NeatX (<em>outdated</em>)
    <ul>
      <li>Google has released NeatX, a complete independent implementation of the NX protocol.</li>
      <li>Neatx was developed as part of an internal project which has now finished. It had no releases and is not being actively developed.</li>
      <li>Can’t <em>share</em> a user’s session remotely.</li>
    </ul>
  </li>
  <li>xrdp
    <ul>
      <li>uses the RDP protocol (which is not very secure)</li>
      <li>Servers are also available for Unix and Mac.</li>
    </ul>
  </li>
</ul>

<p><strong>Commercial products</strong> may be better and easier to set up than the free software listed above, but they come at a cost (at least for commercial use). Popular software includes:</p>

<ul>
  <li><a href="https://www.teamviewer.com/en/index.aspx">TeamViewer</a>
    <ul>
      <li>supports Windows, OS X, Linux, Android, and iOS</li>
      <li>free for personal use</li>
      <li>setup very easy</li>
      <li>pretty expensive for commercial / business use</li>
    </ul>
  </li>
  <li><a href="http://www.splashtop.com/">Splashtop</a>
    <ul>
      <li>supports Windows, OS X, Linux, Android, and iOS</li>
      <li>allows you to stream audio and video across computers with minimal latency</li>
      <li>very easy to use and set up</li>
    </ul>
  </li>
  <li><a href="http://www.realvnc.com/">RealVNC</a>
    <ul>
      <li>The “Official” VNC software</li>
      <li>Offers its client and server apps for Windows, OS X, Linux, Android, iOS, Chrome</li>
      <li>free for basic individual private use, but added features and support come at an extra cost.</li>
    </ul>
  </li>
</ul>

<p>Wikipedia offers a good <a href="http://en.wikipedia.org/wiki/Comparison_of_remote_desktop_software">comparison of remote desktop software</a>.</p>


				</div>

<p>The options which are easiest to set up and provide a fairly good user experience are <strong>X2GO</strong> (using the NX protocol) and <strong>VNC</strong>. In the following exercises, we will see how we can set up both of these options using freely available software.</p>

<p><strong>VNC vs X2Go</strong></p>

<p>X2Go uses the NX protocol, and VNC the RFB protocol. This makes for different properties and advantages of each approach.</p>

<p>The VNC protocol is pixel based. This can make it a bit slow. One advantage is that it is widely used, and several available remote desktop products use this network protocol. This means that you may use <em>any</em> VNC viewer (client) to connect to a system that offers remote access with the VNC protocol.</p>

<p>The NX protocol (used by X2Go) has a better understanding of the underlying graphic layout than VNC (which is pixel-based). Therefore, it is often more efficient (faster).</p>

<p><em>In summary:</em></p>

<p>VNC:</p>

<ul>
  <li>inherent support of different platforms: you can install it on Unix and Windows servers</li>
  <li>is widely used, hence there is a large number of tools</li>
  <li>is slow</li>
  <li>is inherently insecure, it takes a bit more work to set up a secure connection</li>
</ul>

<p>NX (X2Go):</p>

<ul>
  <li>is fast</li>
  <li>easily integrates with security plugins</li>
  <li>there are not many well-maintained servers and clients available (X2Go is one of the few)</li>
  <li>Servers can only be installed on Unix servers, for Windows/Mac there are only clients (no servers)</li>
  <li>On Mac computers, installation of the X2Go client is a bit more work than on Windows and Linux, and usage can also be a little slower.</li>
</ul>

<h2 id="install-a-desktop-environment">Install a desktop environment</h2>

<p>First of all, for either of the options (VNC or X2Go), we need to install a desktop environment on our instance (<em>Remember:</em> The desktop actually runs on the instance, you only get an <em>interactive window</em> to it on your local computer. So we need to install a desktop on your instance).</p>

<div class="bgDefinition" style="min-height: 55px;">
					<img src="/images/glyphicons-352-book-open.png" alt="image" align="left" style="width:24px; height:22px;
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>A <em>desktop environment</em> is what we use to graphically interact with a system (it provides the desktop, windows that open up and symbols you can click on to start a program). Windows and Mac OS have only one desktop environment, but in most Unix-based systems you can choose from several environments. Popular choices are <em>Unity</em>, <em>Gnome</em> and <em>KDE</em>. There are also popular simple and light-weight environments called <em>LXDE</em>, <em>XFCE</em>, <em>Mate</em> and more.</p>

				</div>

<p>You may install several desktop environments, but you only need to choose one to start with.
The following desktop environments are being discussed in this section:</p>

<ul>
  <li>
    <p>LXDE</p>
  </li>
  <li>
    <p>XFCE</p>
  </li>
  <li>
    <p>Gnome</p>
  </li>
  <li>
    <p>KDE</p>
  </li>
</ul>

<p>If you are unsure which desktop environment to choose, we recommend you start with <em>LXDE</em>.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Unfortunately, there is no remote desktop solution that supports all desktop environments. The desktop environments which are currently not supported for remote connections are the ones using <em>3D desktop acceleration</em>. This affects e.g. <strong>Unity</strong> and <strong>Gnome3</strong>. All traditional remote desktop approaches (VNC, NX etc.) fail to work with this. Some versions of Gnome can be run in <em>“flashback”</em> Mode (with the 3D acceleration switched off), but that can be a bit tricky to set up and does not necessarily work. We will therefore discuss only the desktop environments which do work.</p>

				</div>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Note:</em> This tutorial is assuming you are using Ubuntu 14.10 (UTopic), however later versions may also work with the same instructions. When in doubt, links to external documentation are given at the relevant places.</p>

				</div>

<h3 id="lxde">LXDE</h3>

<p>This light-weight environment is easy to install and works well for remote connections.</p>

<p><img src="images/LXDE.png" class="aligncenter" style="width:40%; " alt="image" /></p>

<p>Install the LXDE environment on your instance by typing into your <em>ssh terminal</em>:</p>

<p><code>sudo apt-get install lxde</code></p>

<h3 id="xfce">XFCE</h3>

<p>Install the XFCE environment by typing into your <em>ssh terminal</em></p>

<p><code>sudo apt-get install xfce4</code></p>

<p><img src="images/XFCE.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<h3 id="gnome">GNOME</h3>

<p>Gnome will have to be run in <strong>Flashback mode</strong> to disable the 3D acceleration which is not supported in VNC or X2Go (see for example <a href="https://wiki.gnome.org/Projects/GnomeFlashback">this official documentation</a> and <a href="http://wiki.ubuntuusers.de/GNOME_Flashback">this one on ubuntuusers.de</a>).  X2Go is only compatible with Gnome versions earlier than 3.12 (see <a href="http://wiki.x2go.org/doku.php/doc:de-compat">x2Go documentation</a>), and ideally earlier than 3.08. The Ubuntu version we use in this tutorial has Gnome 3.12.2, so you <strong>cannot use Gnome with X2Go with the Ubuntu version used in this tutorial</strong>. However, you may still get Gnome working with VNC by following the instructions below.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You can find out your Gnome version (after you installed it with following instructions) by typing in your ssh command line:<br />
<code>gnome-shell --version</code>  <br />
If you are using a version older than 3.12, you cannot use Gnome with X2Go (you may run into trouble with versions older than 3.08 too). However, you may still get it working with VNC.</p>

				</div>

<p>To install gnome in “flashback mode”, follow these instructions:</p>

<ol>
  <li>
    <p>Install the gnome environment by typing into your ssh terminal:  <br />
 <code>sudo apt-get install gnome-core</code>  <br />
 <em>Alternatively</em>, if you want to have some apps like Gimp, LibreOffice etc. pre-installed, <strong><em>instead</em></strong> of the command above, type:  <br />
 <code>sudo apt-get install gnome</code>   <br />
 <em>(this will take longer as more packages are downloaded).</em>  <br />
 Confirm the installation of the package with ‘<strong>Y</strong>’.  <br />
 Hit <strong>[Enter]</strong> to confirm the message that comes up.   <br />
 Then, you have to select the default display manager. It does not really matter which one you choose. The correct display manager will be started by your remote client anyway. <em>LightDM</em> or <em>GDM</em> are display managers for Gnome. If unsure, just select <em>LightDM</em>.</p>
  </li>
  <li>
    <p>To switch on flashback mode , we have to install a package and disable the newer scrollbars. Type:   <br />
  <code>sudo apt-get install gnome-session-flashback</code></p>
  </li>
  <li>
    <p>[This step is <em>not necessary</em> on the Ubuntu version used in this tutorial]  <br />
 <code>sudo apt-get purge overlay-scrollbar gsettings set org.gnome.desktop.interface ubuntu-overlay-scrollbars false</code></p>
  </li>
  <li>
    <p>[This step is <em>not necessary</em> on the Ubuntu version in this tutorial]  <br />
 You might also need the following package on older Ubuntu versions (if in doubt, install it anyway, it should already be installed and then it does nothing)  <br />
 <code>sudo apt-get install xfonts-base</code></p>
  </li>
</ol>

<h3 id="kde">KDE</h3>

<p><em>Note:</em> Only versions earlier than KDE 5 are supported in X2Go. With the ubuntu version used in this course, you may use KDE.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You can find out your version of KDE (after you installed it with following instructions) with:  <br />
     <code>kde4-config -v</code></p>

				</div>

<p>Install the desktop environment by typing into your <em>ssh terminal</em>:</p>

<p><code>sudo apt-get install kde-plasma-desktop</code></p>

<p><em>Alternatively</em>, if you want to have some more apps pre-installed (this will take longer and take up more space), <strong><em>instead</em></strong> of the command above, type:</p>

<p><code>sudo apt-get install kde-full</code></p>

<p>Confirm the installation of the package with ‘<strong>Y</strong>’. This may take a while as a lot of packages need to be downloaded.</p>

<p>Hit <strong>[Enter]</strong> to confirm the message about installing KDE. Then, you have to select the default display manager. It does not really matter which one you choose if there are several options. The correct display manager will be started by your remote destkop client anyway. <em>KDM</em> is the display manager for KDE, so if unsure, just select this one.</p>

<p><img src="images/KDE.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<h3 id="other-desktop-environments">Other desktop environments</h3>

<p>There are also other desktop environments, for example <em>MATE</em>, which we will not discuss further in this tutorial.</p>

<h2 id="connect-with-x2go">Connect with X2Go</h2>

<p>We will first install the <strong>X2Go Server</strong> on your instance, and afterwards the <strong>X2Go client</strong> on your local computer. Then you can access the virtual machine’s desktop with the X2Go client.</p>

<h3 id="server-installation">Server installation</h3>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>In this tutorial we assume you are using the most recent release of the Nectar Official Ubuntu. If you are using an earlier version of Ubuntu, or another Linux distribution, you may need to do other steps. This will be commented upon in the following instructions at the relevant places. See the official <a href="http://wiki.x2go.org/doku.php/doc:installation:x2goserver">X2Go documentation</a> for details on the steps to perform.</p>

				</div>

<ol>
  <li>
    <p>Add the X2Go repository and refresh the software package system by typing into your <em>ssh terminal</em>:
 <code>sudo add-apt-repository ppa:x2go/stable</code>
 and confirm this with <strong>[Enter]</strong>. Then, type:
 <code>sudo apt-get update</code></p>
  </li>
  <li>
    <p>Install the X2Go server. Type into your <em>ssh terminal</em>:
 <code>sudo apt-get install x2goserver x2goserver-xsession</code>
 Confirm the question on whether to use up the said disk space with ‘<strong>Y</strong>’</p>
  </li>
  <li>We now have to install <strong>extra bindings</strong> for our desktop environment which add extra features for X2Go (e.g. file sharing). Follow the instructions for the environment you want to use (if it is not listed, see <a href="http://wiki.x2go.org/doku.php/wiki:advanced:desktopbindings">official documentation</a>)
    <ul>
      <li>
        <p><strong>LXDE</strong>: In your ssh terminal, type
  <code>sudo apt-get install lxde</code>
   <code>sudo apt-get install x2golxdebindings</code>
  <em>Note:</em> If the installer package complains about unmet dependencies and suggests to remove lxde, say yes to this. Afterwards, re-install lxde again with the command</p>
      </li>
      <li>
        <p><strong>GNOME</strong>: GNOME only works for versions earlier than gnome 3.10, better earlier than gnome 3.08, as pointed out earlier). In your ssh terminal, type:
 <code>apt-get install x2gognomebindings</code></p>
      </li>
      <li>
        <p><strong>KDE</strong>: In your ssh terminal type:
  <code>sudo apt-get install plasma-widget-x2go</code></p>
      </li>
    </ul>
  </li>
  <li>The X2Go server should now be running. You can check this with typing into your ssh terminal:
 <code>service --status-all | grep x2go</code>
 The result should show a line like this:
    <div class="bgTerminal"><pre class="PreformatTerminal">[ + ]  x2goserver</pre></div>
    <p>If the service is running. If it isn’t, you can start the server by typing:
 <code>service x2goserver start</code></p>
  </li>
</ol>

<p>If in doubt, or anything is not working, try restarting your instance before you try anything else (we have already restarted the instance <a href="firstSSHCommands.html">here</a>).</p>

<h3 id="client-installation">Client installation</h3>

<p>You will now install the X2Go <em>client</em> on your local computer. Depending on which OS you are using, instructions will differ. Go to the instructions below for your OS. If you have a platform not listed here, you can find additional documentation on how to install the client on the official <a href="http://wiki.x2go.org/doku.php/doc:installation:x2goclient">X2Go website</a>. A good instruction can also be found <a href="https://wiki.physik.fu-berlin.de/it/services:remote-access:x2go">here</a>.</p>

<ul>
  <li>
    <p><strong>Ubuntu</strong>: Install the client by typing into a terminal on your local computer:
  <code>apt-get install x2goclient</code></p>
  </li>
  <li>
    <p><strong>Windows</strong>: Download and install the newest windows client from <a href="http://code.x2go.org/releases/binary-win32/x2goclient/releases/">the X2Go website</a>. Follow the installation wizard’s steps, you may keep all default options.</p>
  </li>
  <li>
    <p><strong>Max OS X</strong>:</p>

    <ul>
      <li>
        <p>The X2Go Mac client uses the OS X X11 server called <em>XQuartz</em>. If you don’t have <em>Xquartz</em> yet, you can get it <a href="http://xquartz.macosforge.org/landing/">on the XQuartz website</a>.  Download and install it.
  <em>Note:</em> there is also a download of the file on <a href="http://download.cnet.com/">download.cnet.com</a>. Search there for “XQuartz”. If the download speed on the original website is painfully slow, you may download <em>XQuartz</em> from here. Just make sure you download the newest version.</p>
      </li>
      <li>
        <p>At the end of the installation, it will point out that you will have to log out and log back in again for changes to take effect. You can also do this after we have changed some settings in the next step.</p>
      </li>
      <li>You have to enable a few settings for Mac.
        <ul>
          <li>Start the XQuartz server. You can find it in the spotlight search (open it with <em>Cmd+Space</em>), and type in “xquartz” to find it. Click on it to start.</li>
          <li><img src="images/x2goX11PreferencesMac.png" class="alignright" style="width:50%; margin-left:10px;" alt="image" />
  In the Preferences, go to the <em>Security</em> tab and enable “<strong>allow connections from network clients</strong>”.
  <em>NOTE</em>: If you start XQuartz after already having logged out and in again, you can access the settings (or exit full screen mode) with <em>CMD + ,</em> (command and comma)
  <em>Important:</em> Because above instructions may change any time, please refer to the most <a href="http://wiki.x2go.org/doku.php/doc:installation:x2goclient">current X2Go documentation</a></li>
        </ul>
      </li>
      <li>Download and install the newest X2Go client from <a href="http://code.x2go.org/releases/binary-macosx/x2goclient/">the X2Go Website</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="connecting-the-x2go-client">Connecting the X2Go client</h3>

<p>We will now start the X2Go client application that you installed in the last step and connect it to the instance.</p>

<h4 id="step-1-start-the-client">Step 1: Start the client</h4>

<p>On <strong>Linux</strong>, search in your application menu, or simply type into your local computer’s terminal:</p>

<p><code>x2goclient</code></p>

<p>On <strong>Windows and Mac</strong>, start the application as you do with any other program (find the x2goclient application). E.g. on Mac, bring up the spotlight (Cmd + Space) and search for “x2goclient”.</p>

<h4 id="step-2-start-a-new-session">Step 2: Start a new session</h4>

<p>The session settings should come up right away if you are using the client for the first time. If you are not, click on “New session”, which is the top left button that looks like a blank sheet of paper.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Hint for Mac users:</em> the X2Go windows may be sized too large for your screen initially, so you cannot see the usual “OK” and “Cancel” buttons in the dialogue windows. To resolve this, you simply have to select the window by clicking on the top window bar and holding the left mouse button to move the window a little bit. When you release the mouse button, the window should be automatically resized to fit your screen.</p>

				</div>

<p>The session preferences window should look similar to this:</p>

<p><img src="images/scrX2GoSessionPrefs.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<ol>
  <li>
    <p>Specify your <strong>session name</strong> in the first field (In the screenshot, we called it “NeCTAR Tutorial session”).</p>
  </li>
  <li>
    <p>In the “<strong>host</strong>” field,  type in your IP address</p>
  </li>
  <li>
    <p>In the “<strong>Login</strong>” field, specify the username (in this tutorial, it is “ubuntu”).</p>
  </li>
  <li>
    <p>Select your private SSH key in the field “<strong>Use RSA/DSA key for ssh connection</strong>”. You may click on the little folder symbol behind the field to browse for your private ssh key file.
 <em>Note for Mac/Linux:</em> earlier in this tutorial, we have put the key in the <em>.ssh</em> folder in your home directory. If you cannot see this directory, you have to create a shortcut to it. Open a terminal on your local computer, and type in your local computer’s terminal:
 <code>ln -s ~/.ssh ~/ssh</code>
 You should now have a folder called <em>“ssh”</em> in your home directory which you can see from the “select file” dialogue.</p>
  </li>
  <li>
    <p>As a “<strong>Session type</strong>”, select the Desktop environment you installed earlier (e.g. LXDE, Gnome, KDE). You may also have installed several desktop environments, in this case select which one you wish to start.</p>
  </li>
  <li>
    <p>Click “<strong>OK</strong>” to get to the X2Go Start Window. If asked whether to trust the host, click “<strong>Yes</strong>”.</p>
  </li>
</ol>

<h4 id="step-3-connect-to-the-desktop">Step 3: Connect to the desktop</h4>

<p>We will now connect to our remote desktop. You should now be seeing the <em>X2Go Start Window</em>:</p>

<p><img src="images/scrX2GoStartWindow.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>On the right side of the Window, you can see a shortcut to your session. Note that you can quickly change the desktop environment and screen resolution in the box. Don’t do this now however, let’s first try to connect with the default. You can change this next time you log in.</p>

<p>Click on the box with your session name, and the client is going to try to connect to your instance’s remote desktop. You will have to type in your ssh key passphrase.</p>

<p>This may take a while, especially if it is the first time you connect. Don’t get impatient. This is a good time to grab a cup of coffee.</p>

<p>A window will then come up which shows your desktop. Below is an image of an example when XFCE was used:</p>

<p><img src="images/scrX2GoXFCE.jpg" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>You can increase the screen size and the resolution of your desktop should adapt to it. Resizing the window can sometimes be a bit slow, therefore you may try different screen resolutions in the login box (which displays your session name) so you don’t have to resize the window every time.</p>

<p>To close your remote desktop, you should <em>log off.</em> This is in most desktop environments a power button somewhere on the desktop, or it is accessible with a right click on the desktop. Choose “logout” as an option, not “restart” or “shutdown”. If in doubt, just close the window in which the remote desktop is displayed (this is the “dirty” option, but it will also work).</p>

<p>When you log back in, you don’t have to specify a password for the ubuntu user, as we are using your ssh key instead.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Important Note if you are using KDE</strong>:</p>

<p>KDE does not adapt the screen size that we set in the client. Therefore, we have to disable the “<em>KScreen KDED module</em>”. We will do this right away.</p>

<ol>
  <li>
    <p>On your remote KDE desktop, go to “system settings”. You can right-click on the desktop and then select “Run command…” from the drop down.</p>
  </li>
  <li>
    <p>In the text input field that comes up,  type “<em>System Settings</em>” and the drop-down should show the System Settings which you can click on.</p>
  </li>
  <li>
    <p>Go to <em>System Settings &gt; Startup and Shutdown &gt; Service Manager</em>, and uncheck <em>“KScreen 2”</em>.</p>
  </li>
  <li>
    <p>Log out (Right click on <em>Desktop &gt;  Leave &gt;  Log out</em>) and log back in again (You don’t have to specify a password for the ubuntu user when you log back in, as we are using your ssh key instead). You should now see your full desktop. Your screen size should adapt to what you have set in the session settings of your X2Go client (default is 800x600).</p>
  </li>
</ol>


				</div>

<h3 id="file-sharing-with-x2go">File sharing with X2Go</h3>

<p>One nice thing about X2Go is that you can do file sharing between your local computer and your instance easily on the desktop.</p>

<p>Let’s now enable file sharing so we can drag and drop files between our computer to the instance’s desktop.</p>

<h4 id="step-1-enable-file-sharing">Step 1. Enable file sharing</h4>

<p>We have to enable file sharing for our instance’s user “<em>ubuntu</em>”. For this, you have to add the user to the group “fuse” on your instance. Go to your <em>ssh terminal</em> (or open a terminal on your remote desktop) and type:</p>

<p><code>sudo addgroup fuse</code>
<code>sudo adduser ubuntu fuse</code></p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Important if are using a Mac:</em></p>

<p>You also have to enable remote login to support file sharing.</p>

<p>To enable file sharing, you also have to change your system preferences. Go to the Apple (on top left of your screen) &gt; <em>System preferences</em>, and then select “<em>Sharing</em>”:</p>

<p><img src="images/scrX2GoMacDesktopSharing.png" class="aligncenter" style="width:45%; " alt="image" /></p>

<p>Activate the checkbox for “Remote login”:</p>

<p><img src="images/scrX2GoMacDesktopSharing2.png" class="aligncenter" style="width:45%; " alt="image" /></p>

<p>Should you have problems connecting in the following steps, try restarting your Mac computer for the changes to take effect.</p>


				</div>

<p>Now, we have to configure the X2Go client session preferences to enable file sharing.</p>

<p>First, create a folder on the desktop (or elsewhere if you like) which you are going to use as our “shared folder”. Name it for example “x2goSharedFolder”.</p>

<p>Think of this folder as a place where you can put files which you can then access from within your instance also. You can Drag &amp; Drop files into this folder, and it will be easy to access them from your instances remote desktop. Conversely, you can Drag &amp; Drop files from within your remote desktop into this folder, and they will appear on your local computer as well.</p>

<p>Close your remote desktop by logging off (or just shutting the window in which your remote desktop is displayed).</p>

<p>Then, go back to the X2Go Start Window in the X2Go client (If you aren’t  there already, click ‘cancel’ button in the login field). You should now see this X2Go Start Window:</p>

<p><img src="images/scrX2GoStartWindowPreferences.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Via the little arrow on the right bottom of your session box, select “<strong>Session preferences</strong>” as shown in the screenshot above.
Here you can change preferences of your session. Go to the Tab <em>Shared folders</em>, and click on the little folder symbol to select a folder of your choice which you want to use for sharing (earlier we have named this “x2goSharedFolder” on our desktop):</p>

<p><img src="images/scrX2GoSelectSharedFolder.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>When you have selected the folder, don’t forget to click on the “<strong>Add</strong>” button next to the path to your file. Next to the new element added to the box, enable the “<strong>Automount</strong>” check box. Finally, click “<strong>OK</strong>” to close the window.</p>

<p><img src="images/scrX2GoSharedFolderSetup.png" class="aligncenter" style="width:60%; " alt="image" /></p>

<h4 id="step-2-logging-in-1">Step 2. Logging in.</h4>

<p>Now you can open your remote desktop by clicking on your session box and logging in again. You don’t have to specify a password for the ubuntu user, as we are using the ssh key instead. You will typically find the shared folder of your computer as a link on the remote desktop (see comments below for your desktop environment).</p>

<h4 id="step-3-remaining-configurations-for-individual-desktops">Step 3. Remaining configurations for individual desktops.</h4>

<p>Some desktop environments require some extra settings to make file sharing work. Refer to the documentation below for your desktop environment.</p>

<p><strong>If you are using LXDE:</strong></p>

<p>No extra settings required. Your shared folder should be on the desktop now.</p>

<p><strong>If you are using KDE:</strong></p>

<p><img src="images/scrX2GoAddWidget.png" class="alignright" style="width:200px; " alt="image" />
Your shared folder will be visible on your remote machine by adding the “X2Go plasmoid applet” to the desktop.
To add the widget, right-click on the desktop and select “<strong>Add widgets…</strong>”.</p>

<p><em>Note: You will need to have installed the plasma widget, which we did in a previous step with the command *sudo apt-get install plasma-widget-x2go</em>.</p>

<p>In the search window that comes up, type “x2go” and the x2goplasmoid should come up in the list. Double-click on it to add it to the desktop.
<img src="images/scrKDESearchX2GoWidget.png" class="aligncenter" style="width:100%; " alt="image" /></p>

<p>You can now access your shared folder on your local computer via the link on the plasmoid.
After you open the folder (double click), you should then see something like this on your desktop:
<img src="images/scrX2GoKDESharedFolder.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You can change the size of the widget by dragging it if it looks graphically wrong. You need to hover over the right-hand  menu of the widget and click with your mouse on the little box in the top:
<img src="images/scrX2GoKDEWidgetResize.png" class="aligncenter" style="width:150px; " alt="image" /></p>

<p>You can then drag it out to the right side:</p>

<p><img src="images/scrX2GoKDEWidgetResize2.png" class="aligncenter" style="width:300px; " alt="image" /></p>

				</div>

<p><strong>If you are using XFCE</strong>:</p>

<p>File sharing has to be set up manually.
The shared folder can most likely be found in the folder <em>/tmp/.x2go-ubuntu/media/disk</em>. Check what the name of your folder may be. Type into your ssh terminal:</p>

<p><code>ls  /tmp/.x2go-ubuntu/media/disk</code></p>

<p>you should recognize your folder name, which is named after the path where it is located on your computer (if you named your folder x2GoSharedFolder, the name should end with this). Then, type</p>

<p><code>ls /tmp/.x2go-ubuntu/media/disk/&lt;your-folder-name&gt;</code></p>

<p>to see all the files you have in your shared folder (if your folder is empty, no files will be listed, of course).
Right-click on the desktop and select “<strong>Open Terminal Here</strong>”. Then, type</p>

<p><code>ln -s /tmp/.x2go-ubuntu/media/disk/&lt;your-folder-name&gt; MySharedFolder</code></p>

<p>replacing <em>&lt;your-folder-name&gt;&gt;</em> with the name you found above. Be careful with spelling (it’s case sensitive) —  if you don’t get the path to the folder right, it will not work. You can also change the name <em>MySharedFolder</em> in the command to something else. When you click on the desktop again, the link to the shared folder should appear.</p>

<p><img src="images/scrX2GoXFCEConfigureSharedFolder.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You can verify where your shared folder has been made available by looking into the file “<em>/var/log/syslog</em>” on your instance. You should see a line that contains the following:*“… successfully mounted <username>@127.0.0.1:30003/<path-to-your-shared-folder> to /tmp/.x2go-ubuntu/media/disk/<path-to-your-shared-folder>*</path-to-your-shared-folder></path-to-your-shared-folder></username></p>

				</div>

<h4 id="step-4-exchange-files">Step 4: Exchange files</h4>

<p>Your shared folder can now be accessed both from your instance and your local computer.</p>

<p>First, on your local computer, create a text file in your shared folder (<em>x2GoSharedFolder</em>), write some text in it, and save it to the shared folder.</p>

<p>For example on a Mac:</p>

<ol>
  <li>
    <p>Open <em>TextEdit</em> (<em>Cmd+Space</em>, type “textedit” and open the <em>TextEdit</em> program)</p>
  </li>
  <li>
    <p>Write a message into the window</p>
  </li>
  <li>
    <p>Click <em>“File &gt; Save”</em> and select the shared folder as a place to save the file to. Name it for example “x2goTest”.</p>
  </li>
</ol>

<p><img src="images/scrX2GoTestFileSharing.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Now, go to your remote desktop. Open your shared folder (you should have found where it is in the last step). For example, when you are using the LXDE desktop environment, your shared folder will be on your desktop.</p>

<p><img src="images/scrX2GoTestFileSharing2.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Now if you open the shared folder, you should see the text file you have just created. You may open it to see what’s in there:</p>

<p><img src="images/scrX2GoTestFileSharing3.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Depending on which text editor you used to create your file, it may not look the same on the remote machine. This is because it uses a Linux Operating system, and the default editor on your instance may not open the file with the program which supports this file format. For example, in the screenshot above, you can see that the <em>RTF</em> file we created on a Mac contains formatting instructions as well (you can see it is an RTF file because it is called <em>x2goTest.rtf</em>). Because Linux opens it in a <em>“plain text editor”</em>, you can see the formatting instructions as well.
This should not worry you at this point, because we are just testing how to share files with your remote desktop, but this is a good place to notice some differences between operating systems and text files.</p>

<p>Now, we are going to do it the other way round: We are going to create a text file on our remote desktop, copy it to the shared folder, and see that we can access it in our shared folder on our local computer as well.</p>

<p>On your remote desktop, <strong>right click</strong> on your desktop, and select “<strong>Create new &gt; empty file</strong>” (This may be called different in your desktop environment, but it should not be too hard to find how to create a new file. If there is no such command on the desktop, open your file explorer, go to your Desktop in the navigation pane on the left, and try to do it there).
Name the file “<em>TestOnVM.txt</em>”.</p>

<p><img src="images/scrX2GoTestFileSharing4.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Open the file by double-clicking on it.
A text editor will open. Write a message into the file, save it (File &gt; Save), then close it.</p>

<p><img src="images/scrX2GoTestFileSharing5.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Now, drag the file from the desktop to your shared folder. A message will appear that it is being copied, and then you should see it in your shared folder:</p>

<p><img src="images/scrX2GoTestFileSharing6.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Now, you can open your shared folder on your <em>local machine</em> (the <em>x2goSharedFolder</em> on your desktop).</p>

<p>It will have the new file in it! You may double-click on it to open it and find the message you typed on your remote desktop inside.</p>

<p><img src="images/scrX2GoTestFileSharing7.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>If you ever run into trouble with the desktop environment, try first to log out and log back in again. If that does not work, you may have to restart the X2Go server. You can do this in the <em>ssh command line</em> of the instance (you may also open a terminal on your remote desktop to do this):</p>

<p><code>sudo service x2goserver restart</code>
<em>or</em>
<code>sudo /etc/init.d/x2goserver restart</code></p>

<h3 id="resources">Resources</h3>

<ul>
  <li>
    <p>X2Go documentation: <a href="http://wiki.x2go.org/doku.php/doc:installation:x2goserver">Installation of the X2Go server</a></p>
  </li>
  <li>
    <p>A good article about <a href="https://www.howtoforge.com/how-to-install-x2goserver-on-ubuntu-14.04-as-vnc-alternative">installing X2Go server on Ubuntu</a></p>
  </li>
</ul>

<h2 id="connect-with-vnc">Connect with VNC</h2>

<h2 id="connecting-with-vnc">7.3.4. Connecting with VNC</h2>

<p>We will now connect to our remote desktop using VNC. We will first install the <em>VNC Server</em> on the instance, and then use a <em>VNC Client</em> (also called <em>“viewer”</em>) on our local computer to connect to the remote desktop.</p>

<h3 id="install-the-vnc-server-on-your-instance">Install the VNC Server on your instance</h3>

<p>In this tutorial, we will use the VNC Server called  <em>vnc4server</em> on our instance. For an overview of other servers, refer to the <a href="https://help.ubuntu.com/community/VNC/Servers">Ubuntu help page</a>.</p>

<h4 id="step-1-install-vnc-server">Step 1. Install VNC server</h4>

<p>To install the server, type into your <em>ssh terminal</em>:</p>

<p><code>sudo apt-get install vnc4server</code></p>

<p>Confirm installation of the package with <strong>[Enter]</strong>.</p>

<h4 id="step-2-configure-the-vnc-server">Step 2. Configure the VNC server</h4>

<p>We will now have to edit a file in order to start up the right desktop environment.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The following instructions have been tested for <strong>Ubuntu 14.04 and 14.10</strong>. If you have another Ubuntu version on your instance, you may have to look online if the following instructions don’t work. Some more information is given at <a href="http://www.havetheknowhow.com/Configure-the-server/Install-VNC.html">this link</a>.</p>

				</div>

<p>First, we have to start up the VNC server once, in order to create a password and generate the configuration file. In your <em>ssh terminal</em>, type:</p>

<p><code>vncserver</code></p>

<p>and you will be prompted to choose a password. This is a password which is used for the VNC server only — it is not the same as your ssh key (although you may of course choose the same passphrase)!</p>

<p>After you finished typing and confirming your password, we will shut down the vnc server again and change some settings. To shut it down, type:</p>

<p><code>vncserver -kill :1</code></p>

<p>Then, open the settings file:</p>

<p><code>nano .vnc/xstartup</code></p>

<p>In the editor that comes up, make the following changes:</p>

<p>Uncomment the following lines, by putting a ‘#’ in front of them:</p>
<div class="bgEdit"><pre class="PreformatEdit"># x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &amp;    
# x-window-manager &amp;</pre></div>

<p>Additionally, make the following changes to the file, depending on your desktop environment:</p>

<ul>
  <li>Gnome :
    <ul>
      <li>Add the following lines at the bottom of the file:
        <div class="bgEdit"><pre class="PreformatEdit">metacity &amp;    
gnome-settings-daemon &amp;    
gnome-panel &amp;</pre></div>
      </li>
    </ul>
  </li>
  <li>KDE:
    <ul>
      <li>Add the following line at the bottom of the file:
        <div class="bgEdit"><pre class="PreformatEdit">startkde &amp;</pre></div>
      </li>
    </ul>
  </li>
  <li>LXDE:
    <ul>
      <li>Add the following lines at the bottom of the file:
        <div class="bgEdit"><pre class="PreformatEdit">lxterminal &amp;
/usr/bin/lxsession -s LXDE &amp;</pre></div>
      </li>
    </ul>
  </li>
  <li>XFCE
    <ul>
      <li>Add the following lines at the bottom of the file:
        <div class="bgEdit"><pre class="PreformatEdit">xrdb $HOME/.Xresources
startxfce4 &amp;</pre></div>
      </li>
    </ul>
  </li>
</ul>

<h4 id="step-3-start-the-server">Step 3. Start the server</h4>

<p>To start the vnc server, you need to configure the resolution which your screen should have (You can change this to another resolution in the command below). To start with, choose a low resolution which will definitely fit into the screen on your local computer with some margin:</p>

<p><code>vncserver -geometry 1024x768 -depth 24</code></p>

<p>The result of the command will display a line similar to the following.</p>

<div class="bgTerminal"><pre class="PreformatTerminal">New '*hostname*:#* (*username*)' desktop is *hostname*:**#**</pre></div>

<p>where <em>hostname</em> and <em>username</em> are replaced by your instances values, and a number is displayed instead of the hash <strong>#</strong>. Take note of this <strong>number following the colon (:).</strong> This will be part of the <strong>port number</strong> you will need in the SSH tunnel setup, which we will do in the next step. This will also be the number you will need to use to eventually terminate the server when you are finished using it (if you want to shut it down at all).</p>

<p>If you want to shut down the VNC server, type into your <em>ssh terminal</em> (use the number you have taken note of instead of the #):</p>

<p><code>vncserver -kill :#</code></p>

<p>For example, if your port number before was 1, type</p>

<p><code>vncserver -kill :1</code></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Whenever you want to change your desktop environment (e.g. from LXDE to KDE), you have to shut down (“kill”) the vnc server with these commands. Then, you have to edit your <em>.vnc/startup</em> file as discussed in the last step, following the instructions for your desktop environment. Then, restart the VNC server again, as you have done earlier.</p>

				</div>

<h3 id="connect-to-the-remote-desktop">Connect to the remote desktop</h3>

<p>If you tried to use a VNC client right now, it would not be accessible from outside, because our instance is protected by a firewall. 
When we launched our instance (as we did in <a href="launching.html">this section</a>), we have only allowed secure ssh connections on <em>Port 22</em> (and insecure connections to web services on <em>Port 80</em>). VNC servers usually provide their services on <em>Port 5900</em> (or 5901, 5902..). This Port is still being blocked by our firewall!</p>

<p>One way to get access to our VNC server would be to open up this port in our firewall and allow an insecure connection (remember: VNC does not have in-build encryption). This is not desirable — we want a secure connection, of course.</p>

<p>The safe way to do this is to “tunnel” all our VNC communications through SSH, which then encrypts all communication. The following steps will explain how this is done.</p>

<h4 id="a-namesshtunnellinga-step-1-set-up-ssh-tunneling"><a name="SSHTunnelling"></a> Step 1: Set up ssh tunneling</h4>

<p>Be sure you have the number (#) you were given in the above <em>vncserver</em> command. We will use this number to determine the <strong>Destination Port</strong>. Use your number and <em>add it</em> to 5900. For example, if your  number is 1, then <strong>5901</strong> will be you destination port.</p>

<p>Follow the steps below for your local computer’s operating system:</p>

<p><strong>Linux / Mac</strong></p>

<p>In a terminal on your local computer, create a tunnel from your local machine (Port 5900) to your instance (Port 5901) with this command:</p>

<p><code>ssh -i &lt;path-to-your-keyfile&gt; -L 5900:localhost:5901 -N -f -l ubuntu NNN.NNN.NNN.NNN</code></p>

<p>where you should replace the NNN.NNN.NNN.NNN with yours instance’s IP address, and &lt;path-to-your-keyfile&gt; is the path to where you have saved your ssh key.</p>

<p><em>Hint for Linux users:</em> If you copy your private key to the /home/<your-username>/.ssh folder, as we have done in this tutorial, you won't have to specify the key every time and can skip the -i option.</your-username></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The <strong>-f -N</strong> options in the above command cause the tunnel to run in the background: once you have typed in the password, the command line prompt returns to your terminal. If you want to close your ssh connection, you have to <em>kill</em> it. In your terminal on your local computer, type:</p>

<p><code>ps aux | grep ssh</code></p>

<p>In the printed result, find your ssh tunneling command and note the number on the left, which is displayed after your user name. One line of output for example looks like this:</p>

<p>ubuntu   52577      0.0     0.2     2512756     17076 …</p>

<p>In this example, <em>52577</em> is the <em>process number</em></p>

<p><code>kill &lt;the-ssh-tunnel-process-number&gt;</code></p>

<p>If you <em>don’t</em> use the <strong>-N -f</strong> options, you will be logged into an ssh terminal to your instance, and can use it as usual to type commands on your instance. If you type <em>logout</em> or close the terminal, the ssh tunnel will close as well.</p>


				</div>

<p><strong>Windows</strong></p>

<ol>
  <li>
    <p>Launch PuTTY and load your previously saved configuration by selecting the session name and clicking <strong>Load</strong>. (If you have Putty open, close it and then re-open it to get to this window).  <br />
<img src="images/scrPuttySession.png" class="aligncenter" style="width:60%; " alt="image" /></p>
  </li>
  <li>
    <p>Select <strong>SSH &gt; Tunnels</strong> in the left pane. Enter these values:  <br />
 <strong>Source port</strong>: 5900  <br />
 <strong>Destination:</strong> localhost:5901  <br />
 Then, click the <strong>Add</strong> button. Your tunnel will now appear in the list.
<img src="images/scrPuttySSHTunnel.png" class="aligncenter" style="width:60%; " alt="image" /></p>
  </li>
  <li>
    <p>You can save the tunneling along with your session by selecting <strong>Session</strong> in the left pane. Click on your session name in the <strong>Saved Sessions</strong> pane, then click <strong>Save</strong> (or create a new name instead by typing in a new name, e.g. called “<em>TunneledNectarSession</em>”).</p>
  </li>
  <li>
    <p>Now you can click <strong>Open</strong> to start the SSH terminal. The tunnel will now be active as long as the PuTTY terminal window stays open. You can use this SSH terminal as a shell into the instance as well (as we have been doing the whole time), while simultaneously having your remote desktop open.</p>
  </li>
  <li>
    <p>The next time you run PuTTY, you must open these saved settings by selecting the name in the <strong>Saved Sessions</strong> pane and clicking <strong>Load</strong>, then clicking <strong>Open</strong>. Or, you can simply double-click the session name to load and run the saved session.</p>
  </li>
</ol>

<p>See also the section about SSH Tunnelling in the <a href="appendices.html">Appendix</a> for more information.</p>

<h4 id="step-2-install-the-vnc-client-on-your-computer">Step 2: Install the VNC Client on your computer</h4>

<p>We can connect to our desktop using a VNC Client (also often referred to as “VNC Viewer”). You may download any VNC viewer you want.</p>

<p>Here, we’ll suggest the following, depending on which OS your home Computer runs:</p>

<p><strong>Ubuntu</strong></p>

<p>You can use the pre-installed <em>Remmina</em> client.</p>

<p><em>Alternatively</em>, install <em>vinagre</em> with the command  <br />
<code>sudo apt-get install vinagre</code>.</p>

<p>You can use the free <a href="https://www.realvnc.com/">RealVNC Viewer</a>. Continue with the instructions below (Mac/Windows/Linux alternative client: RealVNC) if you would like to use RealVNC.</p>

<p>We recommend you use the default <em>Remmina</em> client to start with.</p>

<p><strong>Windows</strong></p>

<p>You can use the free <a href="https://www.realvnc.com/">RealVNC Viewer</a>. Continue with the instructions below (Mac/Windows/Linux alternative client: RealVNC) if you would like to use RealVNC.</p>

<p>Alternatively, you can also use <a href="http://www.uvnc.com/">UltraVNC</a> or <a href="http://www.tightvnc.com">TightVNC</a> (
<em>Note for TightVNC:</em> Choose the “custom” installation mode and then select to only install the client, you may have to unselect the server).</p>

<p>Choose the client you want and install it. We suggest you use <em>RealVNC</em> for this tutorial.</p>

<p><strong>Mac OS X</strong></p>

<p>OS X has a VNC client built in. It’s been installed in every version of OS X since 10.4. It’s called <em>Screen Sharing</em> and it’s located in your CoreServices folder, a difficult to find folder which is part of OS X.</p>

<p>The easiest way to  find screen sharing via the “spotlight search”: Type Cmd+Space to bring it up. Type “screen sharing” and the app should be found.</p>

<p>Or you can also find the application in this path:</p>

<p><em>/System/Library/CoreServices/Screen Sharing.app</em></p>

<p>or, as of OS X 10.10 Yosemite the containing folder is now located in</p>

<p><em>/System/Library/CoreServices/Applications</em></p>

<p>You can access it through the terminal (Applications Folder &gt; Utilities &gt; Terminal.app). In the terminal, type:</p>

<p><code>open /System/Library/CoreServices</code></p>

<p>or on OS X greater than 10.10:</p>

<p><code>open /System/Library/CoreServices/Applications</code></p>

<p>That will open a Finder window where you will see Screen Sharing and you can open it or create an alias if you want.</p>

<p>You can use the free <a href="https://www.realvnc.com/">RealVNC Viewer</a>. Continue with the instructions below (Mac/Windows/Linux alternative client: RealVNC).</p>

<p><strong>Mac/Windows/Linux alternative client: RealVNC</strong></p>

<p>Download the client (<strong>the viewer</strong>) from the <a href="https://www.realvnc.com/download/">RealVNC website</a>.  When downloading, it may ask for your E-Mail, but you can specify some random details, the viewer will still work. When installing, choose to only install the client (the viewer):</p>

<p><img src="images/RealVNCInstallation.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>When you connect (we will do this in a moment), it asks you whether you accept an insecure connection. Say yes (it will in fact be secure via our tunnel).</p>

<p>RealVNC by default compresses the colours to save bandwidth. To see your screen in full colour, you need to go to <em>Options in the initial window, then disable The checkbox for *Adapt to network speed</em>, and push up the slider to <em>Best quality</em>.</p>

<h4 id="a-nameconnectvncservera-step-3-connect-to-the-vnc-server"><a name="ConnectVNCServer"></a> Step 3: Connect to the VNC server</h4>

<p>Open your VNC client (“viewer”) of choice. This will generally be a very simple interface with just a few fields to fill. The following instructions are <em>generic for all clients</em>. There are also some more detailed instructions given below for some examples.</p>

<ul>
  <li>
    <p>Choose <em>VNC</em> as a <strong>protocol</strong>, if the viewer asks for it.</p>
  </li>
  <li>
    <p>As <strong>server</strong> (or <strong>host</strong>), specify <em>“localhost”</em>.</p>
  </li>
  <li>
    <p>If a <strong>port</strong> specification is required, choose <em>5900</em>. If you cannot find a port specification, you probably have to type <em>“localhost:5900”</em> instead of just <em>“localhost”</em> in the “server” (or “host”) field.</p>
  </li>
</ul>

<p>Now connect, and you should get a password prompt, in which you type the password you just chose for the VNC Server (not your ssh passphrase, unless you chose the same!). Then, you should get to the remote desktop.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Do <em>not</em> use any ssh or security options that clients may offer, because we have just done the ssh tunnel separately ourselves. Your connection will be secure. If you have followed the instructions above, your connection is secure, even if the vnc viewer says it is not (The VNC viewer does actually not realise it is running through the ssh tunnel).</p>

				</div>

<p><img src="images/scrTightVNC.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Example on the image above: Connecting with TightVNC on a Windows machine. The Putty Terminal is displayed on the left.</p>

<p><strong>Mac Example client: <em>Screen sharing</em></strong></p>

<p>To connect with the in-built <em>Screen Sharing</em> app, open it (Apple+Space and type “screen sharing and open it up). Into the text field, type *localhost:5900 *and then click “connect”:</p>

<p><img src="images/scrVNCMacScreenSharing.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>You will be prompted for your password. That’s the password you selected when you set up the VNC Server in the previous step.</p>

<p><img src="images/scrVNCMacScreenSharing2.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>Now a window should open to the remote desktop.</p>

<p><strong>Example client: RealVNC</strong></p>

<p>Start the RealVNC client (on a Mac, you can find it via the spotlight search: Cmd+Space and then type “realVNC”. It will open a folder in which you find the executable).</p>

<p>To launch a connection, type <strong>“localhost:5900”</strong> into the text field. Leave the encryption setting on “<strong>Let VNC Server choose</strong>” and click “<strong>connect</strong>”.</p>

<p><img src="images/scrRealVNCViewer.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>When it asks you whether you accept an insecure connection, say yes (it will in fact be secure via our ssh tunnel).</p>

<p><img src="images/scrRealVNCViewer2.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>You will now have to type in your password. That’s the password you chose when setting up the VNC server on your instance in the last step.</p>

<p><img src="images/scrRealVNCViewer3.png" class="aligncenter" style="width:50%; " alt="image" /></p>

<p>RealVNC by default compresses the colours to save bandwidth. To see your screen in full colour, you need to go to the realVNC “Options”. You can either do this in the initial login window, or when your remote desktop is open, mouse over the top of the window and select “options”.</p>

<p><img src="images/scrRealVNCViewer4.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>In the options, disable The checkbox for <strong>Adapt to network speed</strong>, and push up the slider to <em>Best quality</em> (better quality will be slower but mostly you may want it anyway). Also enable the checkbox <strong>Scale to window size</strong> if you have issues with the window being too large for your desktop.</p>

<p><strong>General troubleshooting</strong></p>

<p><em>Your colours look a bit off?</em></p>

<p>Some clients (e.g. RealVNC and Remmina) use fewer colours and higher compression in order to reduce latency of your remote desktop. You have to change this settings in the client - each client is different so you might have to find out where you can change this.</p>

<p>In Remmina, you can create a saved session (by clicking on “new”) instead of using the default Quick Connect. You can change the settings for the colour quality there.</p>

<p>RealVNC by default compresses the colours to save bandwidth. To see your screen in full colour, you need to go to <strong>Options</strong> in the initial login window, then disable the checkbox <strong>Adapt to network speed</strong>, and push up the slider to <em>Best quality</em>.</p>

<p><em>Problems connecting?</em></p>

<p>Make sure your ssh tunnel is open and you have set the right port numbers. On Windows, your PuTTY session must be open and you must have configured the tunnel as described above.</p>

<h3 id="automatic-start-up-of-the-vnc-server">Automatic start-up of the VNC server</h3>

<p>With the current settings, you will have to manually re-start the Vnc server on your instance every time after you reboot the instance. We can automate this to save you this work, and start up the Vnc server automatically.</p>

<p>The easiest way is to add an execution command in a file. Log into your instance (via ssh terminal) and follow these instructions:</p>

<ol>
  <li>
    <p>Verify the location of your VNC program by typing:  <br />
 <code>which vncserver</code> <br />
 Most likely you will see <em>/usr/bin/vncserver</em> as result. We will assume this in the following. If you get something else, you will have to use your own path instead of this one.</p>
  </li>
  <li>
    <p>Create a file <em>startVNC.sh</em> (or call it whatever you want) in directory <em>/etc/init.d:</em>  <br />
 <code>sudo nano /etc/init.d/startVNC.sh</code></p>
  </li>
  <li>The editor will open. Put the following contents in the file (Note: If your username is other than <em>ubuntu</em>, you have to replace it in the 3rd line):
    <div class="bgEdit"><pre class="PreformatEdit">#!/bin/bash    
PATH="$PATH:/usr/bin/"    
export USER="ubuntu"    
su ${USER} -c "/usr/bin/vncserver -geometry 1024x768 -depth 24"</pre></div>
    <p><em>Note:</em> If your vncserver is located somewhere else, as you have found out in step 1, you have to use your own path here instead of <em>/usr/bin/vncserver</em></p>
  </li>
  <li>
    <p>Close the editor with <strong>Ctrl + X</strong> (and confirm saving the file with <strong>“yes”</strong>).</p>
  </li>
  <li>
    <p>Now we have to make this file executable  <br />
 <code>sudo chmod +x /etc/init.d/startVNC.sh</code></p>
  </li>
  <li>Add this file to be executed at startup:   <br />
 <code>sudo update-rc.d startVNC.sh defaults</code></li>
</ol>

<p><em>Optional:</em></p>

<p>You may also set up a “service” out of the vnc server. After you have set it up, it allows you to start the vnc server any time with the following command:</p>

<p><code>service startVNC.sh start</code></p>

<p>(or shut it down with <em>stop</em> instead of <em>start</em>). This is probably the more proper way to do it, but the file <em>startVNC.sh</em> is a bit more complex:</p>

<div class="bgEdit"><pre class="PreformatEdit">#!/bin/bash    
PATH="$PATH:/usr/bin/"    
export USER="ubuntu"    
DISPLAY="1"    
DEPTH="32"    
GEOMETRY="1024x768"    
OPTIONS="-depth ${DEPTH} -geometry ${GEOMETRY} :${DISPLAY} -localhost"    
. /lib/lsb/init-functions    

case "$1" in    
&nbsp;  start)    
&nbsp;  &nbsp;  log_action_begin_msg "Starting vncserver for user '${USER}' on localhost:${DISPLAY}"    
&nbsp;  &nbsp;  su ${USER} -c "/usr/bin/vncserver ${OPTIONS}"    
;;    
&nbsp;  stop)    
&nbsp; &nbsp;   log_action_begin_msg "Stopping vncserver for user '${USER}' on localhost:${DISPLAY}"    
&nbsp; &nbsp;   su ${USER} -c "/usr/bin/vncserver -kill :${DISPLAY}"    
;;    
&nbsp;  restart)    
&nbsp; &nbsp;   $0 stop    
&nbsp; &nbsp;   $0 start    
;;    
esac   
 
exit 0</pre></div>

<h3 id="reconnect-to-the-vnc-afresh">Reconnect to the VNC afresh</h3>

<p>Of course, you won’t have to do all the above steps every day when you want to connect to your remote VNC desktop. The only things you need to do each time are:</p>

<ol>
  <li>
    <p>Start the ssh tunnel, as described <a href="#SSHTunnelling">above in step 1</a>. On Windows, if you are using PuTTY, you may have created a saved session which you can start easily.</p>
  </li>
  <li>
    <p>Open your VNC client and connect, as described <a href="#ConnectVNCServer">in step 3 above</a>.</p>
  </li>
</ol>

<p>Let’s do this now to see how easy this is. Close all your applications (all your terminals / PuTTY, and your open VNC viewer).</p>

<p>If on Unix/Mac, also kill your ssh tunnel (for instructions, see the notes about SSH tunneling in the <a href="appendices.html">Appendix</a>).</p>

<p>Now, do the above steps 1. and 2. above to get back to your remote desktop.</p>

<p><em>Troubleshooting on Windows/Putty:</em></p>

<p>If you are Windows and PuTTY, check whether you have properly saved your session last time. When you click on your session and then click “<strong>Load</strong>”, you can check whether all the settings we have configured earlier (“Connect to the instance”, and “Step 1: Set up ssh tunneling”) are still there. If you do not have all the details saved, change them now and save your session again (click on <strong>Session</strong> in the navigation panel on the left, select your session in the <em>Sessions</em> pane, and click <em>Save</em>).  <br />
Then, try again.</p>

<h3 id="resources-1">Resources</h3>

<ul>
  <li>
    <p><a href="http://en.wikipedia.org/wiki/Virtual_Network_Computing">Wikipedia page on VNC</a></p>
  </li>
  <li>
    <p><a href="https://help.ubuntu.com/community/VNC">Ubuntu Help page on VNC</a></p>
  </li>
  <li>
    <p><a href="https://help.ubuntu.com/community/VNC/Servers">Ubuntu Help page on VNC Servers</a></p>
  </li>
  <li>
    <p>An article on <a href="http://www.stuartellis.eu/articles/vnc-on-linux/">VNC on Linux</a></p>
  </li>
  <li>
    <p>Article on how to install an configure <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04">VNC on Ubuntu 14.04</a></p>
  </li>
  <li>
    <p>Another article on how to install a <a href="http://www.havetheknowhow.com/Configure-the-server/Install-VNC.html">VNC server on Ubuntu 14.04</a></p>
  </li>
</ul>

<h2 id="running-several-desktop-environments">Running several desktop environments</h2>

<p>It is possible to have several desktop environments installed and use them interchangeably. You will have to install each desktop environment you want to use on your instance (as we have done in <a href="installDesktopEnvironment.html">this section</a> earlier.</p>

<p>Note that with <strong>VNC</strong>, you have to change your desktop environment on the server side (on your instance), and everyone who connects to the instance will automatically use the desktop which has been configured for this instance. To change the desktop environment, you have to edit the <em>xstartup</em> file and restart the vnc server, as described in the last section.</p>

<p>With <strong>X2Go</strong>, you can decide on the X2Go client which desktop to use — in your <em>x2goclient</em> application, you can choose from the drop-down box which desktop environment you want to run.</p>

<h2 id="graphical-interfaces-on-the-ssh-terminal">Graphical Interfaces on the ssh terminal</h2>

<p>If you want to run a single graphical application, you can also do this without setting up a remote desktop. You can do this via the ssh command line and start the application directly.</p>

<p><strong>The advantage</strong> is that you don’t need to set up a remote desktop server on your instance and install a client on your local machine.</p>

<p><strong>The downsides</strong> are (1) it introduces some <strong>security issues</strong>, which will not be discussed in detail here, and are usually not a big worry (see security note below for a few details). And (2), this is (perhaps surprisingly) <strong>a lot slower</strong> than a remote desktop solution. This is because of the way the communication is encoded.</p>

<p><em>Note</em>: This technique allows no desktop sharing, just remote application running (However you could use <a href="http://en.wikipedia.org/wiki/Xnest">XNest</a>, not discussed further at this point).</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The <strong>security issue</strong> arising with running graphical applications via the ssh connection is that we have to <strong>enable X11 Forwarding</strong>. X11 is the base for the Linux graphical applications (e.g. opening windows). With X11 forwarding, the server is likely to gain shell access to the client (the ssh terminal you are running on your computer): the server can send X11 commands back to the client. X11 was not designed with security in mind, it was designed with the idea that all programs that you’re displaying are run by you and therefore trusted anyway. However ssh also has a SECURITY extension which disables some obvious attacks such as keyboard grabs and key injection. However it still allows other security issues like focus stealing.</p>

<p><em>In simple terms:</em> Let’s say you open a SSH connection to &lt;some-server&gt;, with X11 forwarding enabled. The primary risk is that if &lt;some-server&gt; is malicious, then &lt;some-server&gt; can do all sorts of things to the windows/applications you have open on your own computer.</p>

<p>For instance, &lt;some-server&gt; can open up windows on your computer, can close other windows you have open, can spy on the contents of other windows you have open and on the keys you type into other windows. It can inject spoofed keystrokes and mouse events into other windows you have open, and generally just mess with every other window you have open on my machine — even if some of those other windows are local applications running locally.</p>

<p>In general, because you log on to your own remote machine and not just &lt;some-server&gt;, this security risk is not much of a worry — only if your instance was infected by malicious software, this would be a potential security lead.</p>


				</div>

<h3 id="step-1-check-that-your-instance-allows-x11-forwarding">Step 1. Check that your Instance allows X11 Forwarding</h3>

<p>We have to enable <em>X11 forwarding</em>. It may already be enabled, but make sure it is. Go to your ssh terminal and type:</p>

<p><code>sudo nano /etc/ssh/sshd_config</code></p>

<p>to edit the configuration file.</p>

<p>Scroll down until you find the line</p>
<div class="bgEdit"><pre class="PreformatEdit">X11Forwarding yes</pre></div>

<p>(it may be a <em>no</em> instead of the <em>yes</em>). If this line starts with a #, remove the #. Make sure it is set to <em>yes</em>. If you cannot find the line, add it at the end of the file, just as it is shown above.</p>

<p>Scroll further to find the following line:</p>

<div class="bgEdit"><pre class="PreformatEdit">X11DisplayOffset 10</pre></div>

<p>and make sure it is set to 10.</p>

<p>Exit the editor with <strong>Ctrl+X</strong> (and confirm saving the file with ‘<strong>Y</strong>’).</p>

<p>If you did not have to change the file, you can jump to the next step.</p>

<p>Otherwise, you now have to restart ssh on your instance. You can do by typing:</p>

<p><code>sudo /etc/init.d/ssh restart</code></p>

<h3 id="step-2-log-in-to-your-instance-via-ssh">Step 2. Log in to your instance via ssh</h3>

<h4 id="linux">Linux</h4>

<p>Open up a terminal. We will connect to the instance with the ssh command that we used <a href="connectViaSSH.html">in an earlier section</a>, but this time you have to add the <strong>-X</strong> option to the command, to enable graphics mode.</p>

<p><code>ssh -i &lt;your-private-key-file&gt; -X  ubuntu@NNN.NNN.NNN.NNN</code></p>

<h4 id="mac">Mac</h4>

<p>You first need to install <em>XQuartz</em> on your Mac. If you don’t have it already, download from the <a href="http://xquartz.macosforge.org/">XQuartz website</a></p>

<p><em>Note: If you have previously followed the steps to install the X2Go Client, you will already have XQuartz installed!</em></p>

<p>After you installed XQuartz, open up a Terminal on your local computer. We will connect to the instance with the ssh command we used <a href="connectViaSSH.html">in an earlier section</a>, but this time you have to add the <strong>-X</strong> option to the command, to enable graphics mode.</p>

<p><code>ssh -i &lt;your-private-key-file&gt; -X  ubuntu@NNN.NNN.NNN.NNN</code></p>

<h4 id="windows-1">Windows</h4>

<p>If you use Windows you will need to install a X11 server locally on your windows computer. You can use for example <a href="http://sourceforge.net/projects/xming/">Xming</a>.</p>

<p>Open your PuTTY session and load your settings that you previously saved (to do this, select <strong>Session</strong> in the navigation pane on the left, select your saved session from the list, and click <strong>Load</strong>).</p>

<p>Then, go to “Connection &gt; SSH &gt; X11” in the navigation pane. You need to check <strong>Enable X11 forwarding</strong> and specify the X display location. If you did not change anything in the default configuration of Xming, then set the display location to “localhost:0”.</p>

<p>Otherwise, if you change the Xming configuration using the tool <strong>Programs &gt; Xming &gt; XLaunch</strong>, make sure to set the parameters for the display accordingly.</p>

<p><img src="images/scrPuttyX11Forwarding.png" class="aligncenter" style="width:60%; " alt="image" /></p>

<h2 id="step-3-install-x-windowing-system-on-your-instance">Step 3. Install X Windowing system on your instance</h2>

<p>Your instance still needs a concept of graphical interfaces, so we need to install it.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you already have previously installed a desktop environment (e.g. LXDE, Gnome, KDE, XFCE) as we have done in <a href="installDesktopEnvironment.html">an earlier section</a>, then you can <strong>skip this step</strong>, because the windowing system is already installed.</p>

				</div>

<p>To install the very basic windowing system, go to your ssh session into your instance and type:</p>

<p><code>sudo apt-get install xauth</code></p>

<p><code>sudo apt-get install x11-apps</code></p>

<p>It is likely the xauth package (first command) already installed, but we are doing this just in case. If it is installed, the first command will not re-install any packages.</p>

<h2 id="step-4-run-a-graphical-application">Step 4. Run a graphical application</h2>

<p>We will now test if this works. Go to your <em>ssh terminal</em> (or on Windows, the PuTTY terminal) and type:</p>

<p><code>xcalc &amp;</code></p>

<p>This should open up a simple calculator application that is installed by default. You may have to wait quite a while until it opens up, as said earlier, this way to run graphical applications pretty slow.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Note</em>: The &amp; after the command causes the calculator to open up and detach from the terminal. If you skip it, the calculator will open, but you won’t be able to type other commands in the terminal.</p>

				</div>

<p>If this worked, try a larger application, like firefox. Go to your <em>ssh terminal</em> (or PuTTY on Windows) and type:</p>

<p><code>sudo apt-get install firefox</code></p>

<p>(It may already be installed)  <br />
Then, type</p>

<p><code>firefox &amp;</code></p>

<p>and wait a while until firefox opens. You may notice the amount of time you have to wait is much longer than when you have a remote desktop open (as an <a href="remoteDesktop.html">earlier section</a> described). To start with, ignore some warnings and error messages that may come up — it really takes forever for firefox to come up.</p>

<p><strong>Troubleshooting on Unix/Mac</strong></p>

<p>If you receive errors trying to run graphical applications, try the option <strong>-Y</strong> (instead of <strong>-X</strong>) in your ssh command (in Step 2 above).</p>

<h2 id="install-a-web-server">Install a web server</h2>

<p>In this section we are going to enable a web server and create our first simple web site.</p>

<p>To install the web server, go to the <em>ssh terminal</em> and type:</p>

<p><code>sudo apt-get install apache2</code></p>

<p>Confirm installation of the package with <strong>‘Y’</strong>.</p>

<p>Now, open the web browser on your local computer, and type your instance’s IP address in the URL field.
We will see the default apache website of the browser.</p>

<p>Let’s now start our own simple website. In your <em>ssh terminal</em>, type:</p>

<p><code>nano /var/www/html/index.html</code></p>

<p>the directory <em>/var/www/html</em> is where your website lives by default, and the file <em>index.html</em> is the start page which we want to edit. In the editor that comes up, remove all the text inside and replace it with the text below.</p>

<p><em>Tip</em>: Copy and paste will not work with many terminals. If the traditional copy &amp; paste does not work, you can instead try the following: copy the text as usual; then click with your mouse on the place you want to insert the text in your ssh terminal editor; Then, click the <em>right or middle</em> mouse button — this will work on many systems to “paste” the contents of your clipboard.</p>

<div class="bgEdit"><pre class="PreformatEdit">&lt;!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;    
&lt;HTML&gt;    
  &lt;HEAD&gt;    
    &lt;TITLE&gt;    
      A Small Hello    
    &lt;/TITLE&gt;    
  &lt;/HEAD&gt;    
&lt;BODY&gt;    
  &lt;H1&gt;Hi&lt;/H1&gt;    
  &lt;P&gt;This is very minimal "hello world" HTML document.&lt;/P&gt;    
&lt;/BODY&gt;    
&lt;/HTML&gt;</pre></div>

<p>Now, go to your browser again and refresh the page. You should now see a very crude website displaying</p>

<p><strong>Hi, this is a very minimal “hello world” HTML document.</strong></p>

<h2 id="managing-storage">Managing storage</h2>

<div class="bgPrerequisite">
					<img src="/images/glyphicons-333-certificate.png" alt="image" align="left" style="width:17px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><em>Prerequisite:</em> You should know what types of storage are available on the NeCTAR cloud. This was discussed in <a href="/package06/sections/storage.html">Module 6</a>.
You should also be familiar with connecting to your instance via an ssh terminal, as described in <a href="connectViaSSH.html">an earlier section</a>.</p>

				</div>

<p>In this section, we will go through the steps to set up various types of storage on our instance.</p>

<p>A brief recap of the available storage types:</p>

<ul>
  <li>
    <p><strong>Object storage</strong>: These are single files which you can upload on the server and which you can access from anywhere via a simple web interface or a suitable client application (of which this section will introduce a few).</p>
  </li>
  <li>
    <p><strong>Volume Storage</strong> (also called <em>Block Storage</em>) and <strong>Ephemeral Storage</strong> (also called <em>On-Instance storage</em>) are directly attached to your instance.</p>

    <ul>
      <li>
        <p><strong>Ephemeral storage</strong> is tightly attached to your instance and is deleted when you terminate (delete) your instance. You cannot recover the data after you terminate the instance, unless you have backed it up.</p>
      </li>
      <li>
        <p><strong>Volume Storage</strong> can be attached and detached from your instance(s). After you terminate the instance, the data is not lost. You can attach it to a new instance after you launch it.</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="requesting-storage">Requesting storage</h3>

<p>The NeCTAR trial account only includes object storage and ephemeral storage. You will have to <strong>file an allocation request</strong> to get access to Volume storage.</p>

<p>The allocation process was described in <a href="/package05/sections/allocations.html">Module 5</a>, and more information can also be found on the <a href="http://support.rc.nectar.org.au/docs/allocations">NeCTAR support website</a>.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you don’t have an allocation yet, you can complete the next section, <a href="ephemeralStorage.html">On-Instance storage</a>, and section <a href="objectStorage.html">Object storage</a>. You will have to wait for your allocation until you can follow instructions for <a href="volumeStorage.html">Volume Storage</a>. However you can still read through the Volume storage instructions to see that it is easy, and in parts very similar to handling the secondary disk with the On-Instance storage.</p>

				</div>

<h2 id="on-instance-storage">On-instance storage</h2>

<p>On-Instance storage appears as two separate hard disks. For example, in the flavor <em>“m1.small”</em> (you selected the <em>flavor</em> when launching the instance), this is</p>

<ol>
  <li>
    <p>a <strong>primary disk</strong> (10GB) which is saved with snapshots you make of the instance (see Module 9 for details about snapshots), and</p>
  </li>
  <li>
    <p>a <strong>secondary disk</strong> (30GB) which appears as a second hard disk on your instance, and is <em>not</em> backed up with snapshots. You will have to back up your data separately, which is a topic we will discuss later in <a href="/package09/sections/index.html" title="Module 9">Module 9</a>.</p>
  </li>
</ol>

<p>The primary disk (1) is usually used for the operating system, you should not use it primarily to store data. Your “home directory” is also located within this disk space (when you log on with ssh, you start off in your “home directory” <em>/home/ubuntu/</em>). To store large and important files, you should use the secondary disk (2). The advantage of this disk, as opposed to the volume storage, is that you don’t have to create it separately: it already comes with your instance.
Depending on the flavor you choose, you can get up to 480GB of storage for the secondary disk.</p>

<p>To get access to the secondary disk, we will have to <em>“mount”</em> it first. <em>Mounting</em> is a technique which essentially makes your hard drive accessible to you at a certain location (in a folder). Usually, the secondary disk is available on your system path <em>/dev/vdb</em>. However this is a <em>device file</em>, so you cannot read files there as if it was a folder. For this, we have to <em>“mount”</em> <em>/dev/vdb</em> to a folder first.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>On some images, e.g. on the Ubuntu image we use, the device <em>/dev/vdb</em> will already have been mounted for you, most likely in the folder <em>/mnt</em>. However we will still go through the steps of how to mount a device to another folder (name it for example <em>/data</em>), in order to learn all steps involved in preparing storage. You will benefit from this knowledge when setting up the Volume storage.</p>

				</div>

<p>To see where your secondary disk is mounted (or <em>if</em> it is mounted), go to your <em>ssh terminal</em> and type:</p>

<p><code>mount | grep vdb</code></p>

<p>You may get output that looks similar to this:</p>
<div class="bgTerminal"><pre class="PreformatTerminal">ubuntu@myfirstinstance:~$ mount | grep vdb    
/dev/vdb on /mnt type ext3 (rw)</pre></div>
<p>This means that vdb is mounted on <em>mnt</em> and has the <em>ext3</em> file system with read (r) and write (w) permissions. If you don’t get an output at all, vdb is not mounted.</p>

<p>Alternatively, try this command to check the <em>mount point</em> and size of your disks:</p>

<p><code>sudo lsblk -l</code></p>

<p>This should give you an output similar to this:</p>

<div class="bgTerminal"><pre class="PreformatTerminal">ubuntu@myfirstinstance:~$ sudo lsblk -l 
NAME  MAJ:MIN   RM  SIZE  RO TYPE MOUNTPOINT 
vda   253:0     0   10G   0  disk             
vda1  253:1     0   10G   0  part        /
vdb   253:16    0   30G   0  disk        /mnt</pre></div>

<p>This tells us that we have two hard drives, <strong>vda</strong> and <strong>vdb</strong>, of sizes 10G and 30G respectively. The primary disk (<em>vda</em>) is further partitioned into a sub-disk called <em>vda1</em> (using the full 10G) and this is <em>mounted</em> under the <em>mountpoint “/”</em>. In Linux terms, this means this disk is used for the operating system. The secondary disk (vdb) has 30G and is mounted on <em>/mnt</em>. Many OS, for example Ubuntu, already have mounted the secondary disk, but it may also not be mounted yet, in which case nothing is specified under MOUNTPOINT.</p>

<p>If your disk <em>vdb</em> has already been mounted, take note of what is specified as <em>mount point</em> for it. Then, <strong>unmount</strong> the disk using the command:</p>

<p><code>sudo umount &lt;mount point&gt;</code></p>

<p>replacing &lt;mount point&gt; with your mount point. For example, if your disk was mounted on <em>/mnt</em>, do</p>

<p><code>sudo umount /mnt</code></p>

<p>You may also be interested in the <strong>file system type</strong> which your secondary drive is currently using.</p>

<div class="bgDefinition" style="min-height: 55px;">
					<img src="/images/glyphicons-352-book-open.png" alt="image" align="left" style="width:24px; height:22px;
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>A <strong>file system</strong> is used to control how how the storage of data (files, folders, etc.) is organized on a computer disk (hard disk, floppy disk, CDROM, etc.).</p>

<p>The large amounts of data on a hard drive needs to be organized, similar to a library of books which needs to be catalogued, otherwise books cannot be found efficiently. Libraries have developed standards to organise their books, and similarly, computer systems have. Windows uses the <em>vFat</em> or the <em>NTFS</em> systems, while Linux has others, e.g. <em>ext3</em> and <em>ext4</em> are current standards.</p>

<p>File systems have different properties, e.g. maximum file size or partition size that is supported, and whether they <em>journal</em> or not. A <em>journaling file system</em> is more reliable when it comes to data storage: it prevents inconsistency, and is much faster at file system checks than non-journaled file systems.</p>

<p>For more information about the different Linux file systems, refer to this
<a href="https://help.ubuntu.com/community/LinuxFilesystemsExplained">Ubuntu help page</a>.</p>

				</div>

<p>To find out which <em>file system type</em> your drives use, type:</p>

<p><code>sudo lsblk -f</code></p>

<p>which will print a different view of the information we have seen in the last command (because we use the <strong>-f</strong> option instead of <strong>-l</strong>). It should look similar to this:</p>

<div class="bgTerminal"><pre class="PreformatTerminal">ubuntu@myfirstinstance:~$ sudo lsblk -f
NAME     FSTYPE   LABEL        UUID               MOUNTPOINT 
vda                                                            
└─vda1   ext4                  1b85cad6-...       /           
vdb      ext3     ephemeral0   24cf7b45-77...</pre></div>

<p>From this, we can see that <em>vda1</em> is a <em>partition</em> of <em>vda</em>. We can also see that
<em>vda1</em> uses the file system type <em>ext4</em>, while <em>vdb</em> is formatted with <em>ext3</em>.</p>

<p>In the above example, the disk devices are available on the paths <em>/dev/vda</em>  and <em>/dev/vdb</em> (you have to put the <em>/dev/</em> before the disk name to get the path).</p>

<p>Follow these instructions below to set up your secondary hard disk. You should do this every time you start up a new instance and want to prepare the secondary disk for usage.</p>

<h3 id="step-1-formatting">Step 1. Formatting</h3>

<p>The first time you start up an instance, you may want to format the hard drive of your secondary disk to make sure you have the right <em>file system type</em> and start from a clean state.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Formatting <strong>erases all data</strong> that may already be on the hard disk. If you are working with a new instance, nothing of importance will be on it, e.g. only a default system <em>Lost+Found</em> folder, or something similar. You should only be careful with this step if you have used the disk before and have data on it. Then, you should <strong>back up</strong> this data or <strong>skip this step</strong> (if you skip this step, you will have to keep the file system which is already used on the disk).</p>

				</div>

<p>One way to format the drive with the <em>ext4</em> file system type is:</p>

<p><code>sudo mkfs.ext4 /dev/vdb</code></p>

<p>(if your secondary drive is at another path than <em>/dev/vdb</em>, which you have just found out before, you have to replace this here).</p>

<p>Confirm the formatting with <em>‘y’</em>. You should see the status message</p>

<div class="bgTerminal"><pre class="PreformatTerminal">Writing superblocks and filesystem accounting information:</pre></div>

<p>Wait a while until it says “done.”, and then your hard-drive is formatted.</p>

<p>Now, you may want to verify that you have formatted the drive with the ext4 file system. Again, use the command</p>

<p><code>sudo lsblk -f</code></p>

<p>which prints information similar to this:</p>

<div class="bgTerminal"><pre class="PreformatTerminal">ubuntu@myfirstinstance:~$ sudo lsblk -f
NAME    FSTYPE  LABEL       UUID               MOUNTPOINT  
vda                                                                 
└─vda1  ext4                1b85cad6-...       /            
vdb     ext4                24cf7b45-77...</pre></div>

<p>You should now see that <em>vdb</em> is formatted with <em>ext4</em>. Only <em>vda</em> is mounted on <em>”/”</em>, and this should stay this way, because the OS is saved under <em>”/”</em>.</p>

<p>We will <em>mount</em> the secondary drive in the next step.</p>

<h3 id="step-2-mounting">Step 2. Mounting</h3>

<p>You can now <em>mount</em> your hard drive, so you can access it. First, create a folder which will be used to access your data. For example, we can name it <em>/data</em>:</p>

<p><code>sudo mkdir /data</code></p>

<p>Then, mount it:</p>

<p><code>sudo mount /dev/vdb /data</code></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>This will mount the disk if the type of file system can be guessed. 
Otherwise you may have to specify the file system type with the -t option, e.g.  <br />
<code>sudo mount /dev/vdb /data -t ext4.</code></p>

<p>If you did not create and format the Volume then you can look up the filesystem type:  <br />
<code>sudo parted -l</code></p>

				</div>

<p>This maps the device <em>dev/vdb</em> to the folder <em>/data</em>.
Now, your disk is mounted at <em>/data</em>, and you can add, remove and access files on your secondary disk at the path <em>/data</em>.</p>

<p>You can list the contents of this directory to see what is on your disk (alternatively, if you are using a remote desktop, you can open it in your file explorer. It should be displayed as a disk symbol in the left navigation panel of your file browser).</p>

<p><code>ls /data</code></p>

<p>You may see that there is a <em>Lost+Found</em> folder (this is a default system folder). If nothing is printed, you have no files there yet.</p>

<h3 id="step-3-write-permissions">Step 3. Write permissions</h3>

<p>By default, you do not have write permissions on the secondary drive. You can try to copy a file onto <em>/data</em>, but you will get an error message about write permissions (<em>Note:</em> This is <em>not</em> due to our folder not being located in our home directory). So we need to add our write permissions now.</p>

<p>First, find out which <em>user group</em> you belong to is. Type</p>

<p><code>id ubuntu</code></p>

<p>and find what is written behind <em>“gid=”</em>. This may be <em>gid=1000(ubuntu)</em>. So your <em>group name</em> is also <em>ubuntu</em> and has the ID <em>1000</em>.</p>

<p>Now, there are two options: You can 1) enable write permission only for yourself (your username <em>ubuntu</em>), or 2) for the <em>user group</em> you are in. This way, you can share the drive with other users that you may give access to your instance and who you put in the same user group. The instructions below detail what you need to do for both alternatives.</p>

<p>Option 1)</p>

<p><code>sudo chown ubuntu /data</code></p>

<p>Option 2)</p>

<p><code>sudo chgrp ubuntu /data</code>  <br />
<code>sudo chmod g+rwx /data</code></p>

<p>This should do it. You can now write and execute files from your secondary drive.</p>

<p>You will only need to do this once for the secondary drive on this instance.</p>

<h3 id="step-4-auto-mounting">Step 4. Auto-mounting</h3>

<p>Every time you reboot your machine, you have to <em>mount</em> (<strong><em>not</em></strong> format!) the secondary drive again (so only do Step 2 above, not Step 1). We can avoid this by <em>auto mounting</em> it. For this, we have to edit a file called <em>fstab</em>:</p>

<p><code>sudo nano /etc/fstab</code></p>

<p>Look for a line which starts with <em>/dev/vdb</em>. You may find one that looks like this:</p>

<div class="bgEdit"><pre class="PreformatEdit">/dev/vdb  /mnt    auto    defaults,nobootwait,comment=cloudconfig   0  2</pre></div>

<p>If you find such a line, this means your secondary hard disk is already automatically mounted at system start. On the Ubuntu distribution we are using in this course, this is the case: it is auto-mounted to the folder <em>/mnt</em>, as we can see in this line. If you find this line, you can edit it and just change the <em>/mnt *to */data</em>. If you cannot find this line, just add this line to the file at the bottom:</p>

<div class="bgEdit"><pre class="PreformatEdit">/dev/vdb   /data  auto   defaults,nobootwait   0  2</pre></div>

<p>Exit the nano file editor with <strong>Ctrl+X</strong> and confirm saving of the file with <em>‘Y’</em>. Next time you reboot your instance, you should already find your secondary drive in your folder <em>/data</em>, and you won’t need to do any of the Steps described here to access it.</p>

<h2 id="object-storage">Object storage</h2>

<p>You can connect to your object store with a variety of clients, as long as they support <em>OpenStack Swift</em> or <em>Amazon S3</em>. We will discuss some example clients which support <em>Swift</em> in this section.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Security Warning</strong></p>

<p>Swift does NOT provide encryption of the data it stores.</p>

<p>If you have sensitive data that requires encryption you must encrypt the data files <em>before</em> upload them to your object store.</p>

				</div>

<p>Access to your object store requires your password, but this password may be saved in a file that people who have access to your local computer can read. You must be careful to not give anyone access to your computer — similarly, they would get access to your private ssh key that you save on your computer to log in to your instance, so be careful with giving people access to your computer.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The NeCTAR implementation of <em>Swift</em> is geodistributed across Nodes of the Research Cloud so that availability is not reliant on any one datacentre or network infrastructure. Each collection of Swift nodes/hardware is known as a <em>region</em>, which may or may not include a Swift proxy server (the Internet facing and serving component of Swift). With some Swift clients/APIs users can explicitly choose which proxy to connect to, this might be useful e.g. for speeding up writes to object storage by choosing the nearest proxy. Due to NeCTARs Swift having multiple regions, some clients/APIs require explicit configuration of a default region, which should be “Melbourne” for most users (see e.g. the Cyberduck profile below).</p>

				</div>

<h3 id="get-your-openstack-credentials">Get your OpenStack credentials</h3>

<p>Before you start, you should get your login details.
Note that you will <em>not</em> need to do this if you just want to upload files via the Dashboard (as described in the next section). But if you want to use other tools, and to complete this tutorial, you should take note of your credentials now.</p>

<p>You can download your <strong>credentials</strong> from the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a></p>

<ol>
  <li>
    <p>Your <strong>tenant ID</strong> is the name of your project as reported in the left hand panel of the dashboard (e.g. <em>pt-12345</em>)</p>
  </li>
  <li>
    <p>Your <strong>username</strong> is reported at the top of the dashboard on the right (e.g, logged in as: <em>user@uni.edu.au</em>)</p>
  </li>
  <li>
    <p>Open the <em>Dashboard API</em> tab: get there via <em>Compute &gt;  Access &amp; Security &gt;  API Access</em>.</p>
  </li>
  <li>
    <p>Look up what is specified for the <em>‘Identity’</em> Service in the <em>Dashboard API</em> tab. It will be a URL like  <br />
 <em>https://<strong>keystone.rc.nectar.org.au</strong>:<strong>5000</strong>/v2.0/</em>   <br />
 Take note of the text between <em>https://</em> and the colon (<em>keystone.rc.nectar.org.au</em> in the example). This will be the <strong>Server</strong>. Take note of the number (<em>5000</em> in the example). This will be the <strong>Port</strong>. You will need the <strong>Keystone Server and Port</strong> to authenticate your access. Also take note of the keystone version which you are using, in this case its <strong>v2.0</strong>.</p>
  </li>
  <li>
    <p>Get your <strong>credential file</strong> (this is called the <em>OpenStack RC file</em> for OpenStack, and <em>EC2 file</em> for Amazon). You can download by clicking on the buttons on the top right on the same window: <strong>Download OpenStack RC File</strong>. Download it and save it somewhere on your computer where you can easily find it later.</p>
  </li>
  <li>
    <p>You will also need your <strong>OpenStack password</strong>. This is <strong>not</strong> the same password that you use to log in to the Dashboard! If you have never used the OpenStack password before, you need to generate it first. You can do this in the <strong>Settings</strong> of the Dashboard: click next to your user name (your e-mail) on the top right and a drop down menu will open. Click on <em>Settings</em>. You need to reset your password by clicking <strong>Reset Password</strong> on the left panel of the settings. A long combination of numbers and letters will be displayed. This is your OpenStack password. Copy the text and save it somewhere safe.</p>
    <div class="bgInfo">
                 <img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
                     margin:0px; margin-right:10px; margin-bottom:5px;" />
                 <p>Your OpenStack password will be a long combination of numbers. At the time of writing, unfortunately this password cannot be changed yet, but this should be changed in a future update of OpenStack on NeCTAR.</p>


             </div>
  </li>
</ol>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You will not need your OpenStack RC file in this Module, but you <em>will</em> need it later in Module 10. So while you are on the Dashboard API page already, you may download it now, and remember for later where you put it.</p>

				</div>

<h3 id="all-platforms-access-via-the-dashboard">All platforms: Access via the Dashboard</h3>

<p>We will upload some files to our Object Store using the Dashboard. This is probably the easiest method to upload files.</p>

<p>First, select any file on your computer — some image, text file, or anything not so important. If you are unsure which to choose, just create a new text file, write something in it, and save it to the Desktop (or anywhere else where you can find it.</p>

<p>In this example, we are using a file called <em>SampleObject.txt</em> with the text “I am a sample object file” in it, saved on the Desktop.</p>

<h4 id="step-1-create-a-container">Step 1: Create a container</h4>

<p>Go to the <a href="https://dashboard.rc.nectar.org.au">Dashboard</a> and then to <em>Object Store &gt; Containers</em>. You will get to a page which shows the overview of your containers.</p>

<p><img src="images/scrDashboardObjectStore1.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>First of all, you will have to create a <em>Container</em>.</p>
<div class="bgDefinition" style="min-height: 55px;">
					<img src="/images/glyphicons-352-book-open.png" alt="image" align="left" style="width:24px; height:22px;
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>A <strong>Container</strong> is like a folder in which you can put files. The difference to a normal folder is that a Container is intended for a flat hierarchy, so you cannot create containers within a container — however you may create “Pseudo Containers” within the Container, so you can still organize your files hierarchically.</p>

				</div>
<p>Click on <strong>Create Container</strong>. As a <strong>Name</strong>, type in  <em>MyObjectContainer</em> (or you may use your own container name, in which case you have to consider this in the instructions below). Keep the access on <strong>private</strong>.</p>

<p><img src="images/scrDashboardObjectStore2.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>Click on <strong>Create Container</strong>. Your Container <em>MyObjectContainer</em> will then be listed on your Dashboard:</p>

<p><img src="images/scrDashboardObjectStore3.png" class="aligncenter" style="width:90%; " alt="image" /></p>

<h4 id="step-2-upload-a-file">Step 2: Upload a file</h4>

<p>Click on <strong>Upload Object</strong> on the right side of your container overview. A window will open in which you can <strong>Browse</strong> for your file.</p>

<p><em>Note:</em> If you cannot see the “Upload Object” field, you have to click on your container <em>MyObjectContainer</em> to select it.</p>

<p><img src="images/scrDashboardObjectStore4.png" class="aligncenter" style="width:70%; " alt="image" /></p>

<p>You may also rename it in the given text field if you wish, for now we are going to keep the name <em>SampleObject.txt</em>.</p>

<p>Click <strong>Upload Object</strong> to close the window and upload the file to your object store. It will now be displayed on the right side of the overview. We can see that it has 27 Bytes.</p>

<p><img src="images/scrDashboardObjectStore5.png" class="aligncenter" style="width:90%; " alt="image" /></p>

<p>If you wanted to download this file (e.g. when accessing the store from another computer), you can do this here by clicking on <strong>Download</strong>.</p>

<h3 id="windowsmac-access-with-cyberduck">Windows/Mac: Access with Cyberduck</h3>

<ol>
  <li>
    <p>Download the newest version possible of the application <em>Cyberduck</em> (you need at least version 4.4): <a href="http://cyberduck.ch/">http://cyberduck.ch/</a></p>
  </li>
  <li>Install Cyberduck.
    <ul>
      <li>On a Mac, you will download a .zip file which contains the app. Save it to the Desktop (or any other folder). Extract the zip file by double-clicking on it.</li>
      <li>On Windows, you will download an installer. You may keep the default options, if unsure. You don’t need to install Bonjour, if you are asked.</li>
    </ul>
  </li>
  <li>Create a text file on your local computer (e.g. save it on the Desktop) with the following contents. Name it <em>NeCTARObjectStore.cyberduckprofile</em> (or any other name, it just has to end with .cyberduckprofile).
    <div class="bgEdit"><pre class="PreformatEdit">&lt;?xml version="1.0" encoding="UTF-8"?&gt;    
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;    
&lt;plist version="1.0"&gt;    
   &lt;dict&gt;    
      &lt;key&gt;Protocol&lt;/key&gt;    
      &lt;string&gt;swift&lt;/string&gt;    
      &lt;key&gt;Vendor&lt;/key&gt;    
      &lt;string&gt;NeCTAR Swift (Keystone)&lt;/string&gt;    
      &lt;key&gt;Context&lt;/key&gt;    
      &lt;string&gt;/v2.0/tokens&lt;/string&gt;    
      &lt;key&gt;Region&lt;/key&gt;    
      &lt;string&gt;Melbourne&lt;/string&gt;    
      &lt;key&gt;Description&lt;/key&gt;    
      &lt;string&gt;NeCTAR Swift Melbourne (Keystone)&lt;/string&gt; 
      &lt;key&gt;Scheme&lt;/key&gt;
      &lt;string&gt;https&lt;/string&gt;
      &lt;key&gt;Default Hostname&lt;/key&gt;
      &lt;string&gt;keystone.rc.nectar.org.au&lt;/string&gt;
      &lt;key&gt;Default Port&lt;/key&gt;
      &lt;string&gt;5000&lt;/string&gt;
      &lt;key&gt;Hostname Configurable&lt;/key&gt;
      &lt;true/&gt;
      &lt;key&gt;Port Configurable&lt;/key&gt;
      &lt;true/&gt;
      &lt;key&gt;Username Placeholder&lt;/key&gt;    
      &lt;string&gt;tenantId:username&lt;/string&gt;    
      &lt;key&gt;Password Placeholder&lt;/key&gt;    
      &lt;string&gt;password&lt;/string&gt;      
   &lt;/dict&gt;    
 &lt;/plist&gt;</pre></div>
  </li>
  <li>
    <p>Double-click on your file <em>NeCTARObjectStore.cyberduckprofile</em>.</p>
  </li>
  <li>
    <p>A Dialogue should open where you can specify Server etc. If it does not, open Cyberduck and go to <strong>Bookmarks &gt;  New Bookmark</strong>.  <br />
 <img src="images/scrCyberduckMac1.png" class="alignright" style="width:400px; " alt="image" /></p>
  </li>
  <li>
    <p>Choose <em>NeCTAR Swift Melbourne (Keystone)</em> from the drop-down box, if it is not selected yet. If it does not exist, something has gone wrong in importing the NeCTAR profile (your file <em>NeCTARObjectSTore.cyberduckprofile</em>). The image shows how it looks on a Mac, on Windows your interface will look a bit different, but the fields are the same.</p>
  </li>
  <li>
    <p><strong>Nickname</strong>: give the connection a name of your choice, e.g. ‘<em>NeCTAR Object Store</em>’</p>
  </li>
  <li>
    <p>Confirm that <strong>Server</strong> and <strong>Port</strong> match the <a href="#get-your-openstack-credentials">OpenStack credentials you took note of</a>. If they don’t match use the values you took note of.</p>
  </li>
  <li>
    <p><strong>TenantID:Access ID</strong> (or <strong>username</strong> on a Mac): Type in your tenant ID and username (you took note of this before) separated by a colon, for example <em>pt-12345:user@uni.edu.au</em>.</p>
  </li>
  <li>
    <p>Expand the window 
<img src="images/scrCyberduckWindows2.png" class="alignright" style="width:400px; " alt="image" />
by clicking on <strong>More Options</strong>. You can choose a <strong>Download Folder</strong> to which your files will be downloaded by default. As Path you <em>can</em> (but do not have to) specify the version number of keystone, e.g. <em>/v2.0/</em>.</p>
  </li>
  <li>
    <p>Leave all other options in the default setting, and close the window (by clicking on the window cross)</p>
  </li>
  <li>
    <p>Double click on the symbol of your connection and Cyberduck will try to connect to your object store.   <br />
You will be asked to type your OpenStack password (not the password you use to login to the Dashboard!) 
This is the password in the <a href="#get-your-openstack-credentials">OpenStack credentials you took note of</a>.
You might also be required to re-enter your tenant ID and username, again separated by a colon
<img src="images/scrCyberduckMac3.png" class="alignright" style="width:400px; " alt="image" /></p>
  </li>
  <li>
    <p>You can now <strong>drag and drop</strong> files into your object store container (drag in on the folder symbol), and from the object store container to your local computer (onto your desktop or into an open folder in your file explorer). You can also right-click and <strong>Download</strong> (it will download into the folder you selected as <em>Download Folder</em> in the connection dialogue).</p>
  </li>
  <li>You can synchronize files to a folder on your local computer. Right-click on the container you want to synchronize, and select <strong>Synchronize</strong>. You will be prompted to select a folder to synchronize into.
    <div class="bgImportant">
                <img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
                  margin:0px; margin-right:10px; margin-bottom:5px;" />
                <p><strong>Attention!</strong> Do not select the same folder which you have specified as <em>Download Folder</em> in the connection dialogue! This will create duplicate and nested directories.</p>


            </div>
    <p>Select your folder, and it will start to synchronize your files. You can then access your object store files in this folder, edit them from there, synchronize with Cyberduck again (you have to select the same folder again), and your Object Store will be up-to-date!</p>
  </li>
  <li>You can edit files directly by right-clicking on them and select “<strong>Edit</strong>”. Then you may choose a program to edit it with.</li>
</ol>

<p><strong>Resources</strong></p>

<p><a href="http://support.rc.nectar.org.au/docs/object-storage#Cyberduck">NeCTAR support website</a></p>

<p><a href="https://trac.cyberduck.io/wiki/help/en/howto/openstack">Cyberduck and OpenStack HowTo</a></p>

<h3 id="windows-only-access-with-cloudberry">Windows only: Access with Cloudberry</h3>

<ol>
  <li>
    <p>If you do not already have <em>CloudBerry Explorer</em> then download and install it on your computer from the <a href="http://www.cloudberrylab.com/free-openstack-storage-explorer.aspx">official website</a>.</p>
  </li>
  <li>
    <p>Open <em>CloudBerry Explorer</em></p>
  </li>
  <li>
    <p>Click <em>File &gt; OpenStack &gt;  New Account</em>. Then, click <strong>Add</strong>.</p>
  </li>
  <li>
    <p><strong>Display name:</strong> use a meaningful name to this account (e.g., the name you supplied as your container in the step above)</p>
  </li>
  <li>
    <p><strong>User name:</strong> your username, which is your e-mail (e.g., <em>user@uni.edu.au</em>)</p>
  </li>
  <li>
    <p><strong>API key:</strong> your OpenStack password</p>
  </li>
  <li>
    <p><strong>Authentication Service:</strong> This is the server, port and version of keystone that you took note of with your credentials, e.g. <em>https://keystone.rc.nectar.org.au:5000/v2.0</em></p>
  </li>
  <li>
    <p>Tick <strong>Use Keystone authentication</strong></p>
  </li>
  <li>
    <p>Select the <em>Tenant name</em> option from the drop-down menu and insert your <em>tenant ID</em> (e.g., <em>pt-12345</em>)</p>
  </li>
  <li>
    <p>Close the Window with ‘<strong>OK</strong>’, and close the next Window with “<strong>Close</strong>”.</p>
  </li>
  <li>
    <p>On the right window, select your display name from the drop down box. CloudBerry will connect to your object store. On the left window, you see your files of your local computer.   <br />
<img src="images/scrCloudBerry.png" class="aligncenter" style="width:400px; margin-top:10px" alt="image" /></p>
  </li>
  <li>
    <p>You can drag and drop files between both windows.</p>
  </li>
  <li>
    <p>You can directly edit a file by <strong>Right click &gt;  Open</strong>.</p>
  </li>
</ol>

<h3 id="linux-and-mac-os-x-using-any-ftp-client">Linux and Mac OS X: Using any FTP client</h3>

<p><em>Prerequisite</em>: You should know how to use an FTP client.</p>

<p>You can use any FTP client, for example <em>Filezilla</em>. For this, we will have to run a program that acts like a FTP server on our own local machine. This FTP server will then communicate with the SWIFT object storage on our cloud and provide the file exchange via the FTP service.</p>

<p>The following instructions are for a Debian based distribution, e.g. <em>Ubuntu</em>.
For more information, refer to the <a href="https://pypi.python.org/pypi/ftp-cloudfs/">official project page</a>.</p>

<p>Open a Terminal on your local computer to type in the following commands.</p>

<ol>
  <li>Install the ftp server package  <br />
<strong>Linux</strong>   <br />
 <code>sudo apt-get install ftp-cloudfs</code>  <br />
 or use your other package manager if you are on another distribution than ubuntu. <br />
<strong>Mac OS X</strong>
    <ul>
      <li>Install python’s <em>pip</em> (unless you already have it) using the <em>homebrew</em> package manager:  <br />
   <code>brew install python</code>
        <div class="bgInfo">
              <img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
                  margin:0px; margin-right:10px; margin-bottom:5px;" />
              <p><em>Alternative:</em> If you don’t have homebrew, you may use the <em>easy_install</em> command, however there may be problems with running the <em>ftp-cloudfs</em> command with this. You may try anyway, and if it does not work, then uninstall pip again (<em>sudo pip uninstall python-swiftclient</em>) and get homebrew instead.  <br />
  <code>sudo easy_install pip</code></p>


          </div>
      </li>
      <li>Upgrade setuptools  <br />
 <code>sudo pip install --upgrade setuptools</code></li>
      <li>Install python-swiftclient  <br />
 <code>sudo pip install python-swiftclient</code>  <br />
 <code>sudo pip install python-keystoneclient</code></li>
      <li>Install ftp-cloudfs
 <code>pip install ftp-cloudfs</code></li>
    </ul>
  </li>
  <li>
    <p>Start the local FTP server <br />
<code>ftpcloudfs --foreground --keystone-auth --auth-url https://keystone.rc.nectar.org.au:5000/v2.0 --keystone-tenant-separator=: &amp;</code></p>
  </li>
  <li>Start your favourite FTP client, for example FileZilla. If you don’t have FileZilla, you can install it with   <br />
<code>sudo apt-get install filezilla</code>  <br />
Your login details for the FTP client are as follows:
    <ul>
      <li><strong>Server (or Host):</strong> 127.0.0.1  <br />
  This IP address is the one of your local computer (not an IP address you can use to access your computer from outside though) —  Remember, you are connecting to the FTP server we just launched on our local machine.</li>
      <li><strong>User:</strong> &lt;tenant&gt;:&lt;username&gt;  <br />
 Replace &lt;tenant&gt; and &lt;username&gt; with your OpenStack credentials.</li>
      <li><strong>Password:</strong> Your OpenStack password</li>
      <li><strong>Port:</strong> 2021</li>
    </ul>
  </li>
  <li>You can now browse your files and drag and drop them between both windows, as you are used to when using the FTP client. On the left side, you can see the file system of your local computer, and on the right side, you can see your object store.</li>
</ol>

<p><img src="images/scrFtpCloudFS.png" class="aligncenter" style="width:90%; " alt="image" /></p>

<p>You will have to do steps 2 and 3 every time you restart your local computer.</p>

<h3 id="linux-advanced-access-with-cloudfuse">Linux [Advanced]: Access with CloudFuse</h3>

<p><em>CloudFuse</em> is a lightweight open source application that may be installed on Linux servers to create a local mount point to a customers existing Cloud Files container.</p>

<p>You can find more information and documentation about cloudfuse on the <a href="http://redbo.github.io/cloudfuse/">cloudfuse github page</a></p>

<p>To set up cloudfuse for access to your object store, launch a terminal on your local computer and follow the steps below.</p>

<ol>
  <li>
    <p>Install necessary packages  <br />
<code>sudo apt-get install build-essential libcurl4-openssl-dev libxml2-dev libssl-dev libfuse-dev git</code></p>
  </li>
  <li>
    <p>Clone the CloudFuse source  <br />
<code>cd</code> <br />
<code>git clone git://github.com/redbo/cloudfuse</code></p>
  </li>
  <li>
    <p>Compile the source code and install it  <br />
 <code>cd cloudfuse</code>  <br />
 <code>./configure</code>  <br />
 <code>make</code>  <br />
 <code>sudo make install</code>   <br />
 <code>modprobe fuse</code></p>
  </li>
  <li>
    <p>Create a file called <em>$HOME/.cloudfuse</em>   <br />
 <code>sudo nano $HOME/.cloudfuse</code></p>
  </li>
  <li>Put the following contents into your file (replace &lt;your-tenant-name&gt;, &lt;your-username&gt; and &lt;your-password&gt; with your own credentials):
    <div class="bgEdit"><pre class="PreformatEdit">authurl=https://keystone.rc.nectar.org.au:5000/v2.0/    
tenant=<your-tenant-name>    
username=<your-username>    
api_key=<your-password>    
cache_timeout=60

</your-password></your-username></your-tenant-name></pre></div>
  </li>
  <li>
    <p>Set the right permissions:  <br />
<code>chmod 600 $HOME/.cloudfuse</code></p>
  </li>
  <li>
    <p>Mount your Swift storage with the following commands  <br />
<code>sudo mkdir /mnt/cloudfiles/</code>  <br />
<code>cloudfuse /mnt/cloudfiles/</code> <br />
 Of course you may choose another name instead of <em>cloudfiles</em>, and/or create the directory somewhere else.</p>
  </li>
  <li>
    <p>You should now be able to access your files on the directory /mnt/cloudfiles just as if they were on your local computer.  <br />
 <img src="images/scrCloudFuse.png" class="alignright" style="width:400px; margin-left:10px;" alt="image" />
 <code>ls -l /mnt/cloudfiles/</code>  <br />
 Or open your file explorer to find your mounted drive there (see image to the right).
 You may even <em>drag and drop</em> files to and from your object storage, <strong>as if it was a regular hard drive</strong> or folder on your computer.</p>
  </li>
  <li>Every time you restart your computer, you will have to re-connect the object store with the command:  <br />
<code>cloudfuse /mnt/cloudfiles/</code></li>
</ol>

<p><strong>Troubleshooting:</strong></p>

<p>Your username (of your local computer) may need to be part of the <em>fuse</em> user group. This can be accomplished with the following command in your computer’s terminal:</p>

<p><code>sudo usermod -a -G fuse &lt;username&gt;</code></p>

<h3 id="all-platforms-access-with-the-openstack-command">All platforms: Access with the <em>openstack</em> command</h3>

<p>You may also use the <em>openstack</em> command to list the files in our object storage that we just created.
This will be discussed in <a href="/package10/sections/index.html" title="Module 10">Module 10</a>.</p>

<h3 id="access-via-apis">Access via APIs</h3>

<p>We will discuss more options on how to connect to the object store in <a href="/package10/sections/index.html" title="Module 10">Module 10</a>.</p>

<h2 id="volume-storage">Volume storage</h2>

<p>This section is going to go through the steps required to use Volume storage from your instance. You are going to</p>

<ol>
  <li>Create a Volume storage</li>
  <li>Attach the Volume to the instance</li>
  <li>Prepare the Volume for use within your instance</li>
</ol>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>You need to submit an allocation request in order to be able to use volumes. The trial account does not include quota for volumes.</p>

<p>You can only use volume storage from instances running in the same <em>Availability Zone</em> which you have also chosen with your allocation. Therefore, you need to select the same  <em>Availability Zone</em> when launching your instance. If you haven’t done so when launching the instance, you’ll have to launch a new one, as described in <a href="launching.html">this earlier section</a>, and select your allocation zone in the <em>Availability zone</em> tab.</p>

				</div>

<p>There are two options how to manage volumes: (1) on the Dashboard or (2) via command line.</p>

<p>In this module, we will only cover managing volumes via the Dashboard. <a href="/package10/sections/index.html" title="Module 10">Module 10</a> will show how we can manage volumes with commands.</p>

<h3 id="step-1-creating-the-volume">Step 1: Creating the volume.</h3>

<p>Before you can use a volume, you have to <em>create it</em>.</p>

<p>Go to <em>Compute &gt; Volumes</em> and click on the <strong>+ Create Volume</strong> button on the top right.</p>

<p><img src="images/scrDashboardVolume1.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>A window opens in which you can give your Volume a name, and add a description.</p>

<p><img src="images/scrDashboardVolume2.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>There are also other options which you can specify:</p>

<p><strong>Volume Source</strong>: You can either choose to create an empty volume, or create a volume from an image. The latter is useful if you want to create a volume which already has specific data on it. It is possible to save (or back up) a volume by creating an image of it - we will see how to do this in <a href="/package09/sections/index.html" title="Module 9">Module 9</a>.</p>

<p>You may want to restore a volume that you previously have saved as an image, or someone else may have sent you an image with data on it which you should have access to. When you create a volume from an image, your volume will have all the data on it that was on the volume when the image was created of it.</p>

<p><em>In this tutorial, we will create an empty volume.</em></p>

<p><strong>Type</strong>: This field isn’t currently used, it’s there for future expansion. Leave this at “<em>No volume type</em>”.</p>

<p><strong>Size(GB):</strong> Type in the desired size (in GB) of your volume.</p>

<p><strong>Availability zone:</strong> Select your availability zone. It must be the same in which your instance is running. Creation of the volume will only work if you have a volume allocation at this availability zone.</p>

<p>Click “<strong>Create volume</strong>” and you will see your new volume in the list of volumes. The Status should switch to “<em>Available</em>” after it has been created. This can take a few minutes.</p>

<h3 id="step-2-attaching--detaching-volumes">Step 2: Attaching / Detaching volumes.</h3>

<p>Before you can access the volume, you have to attach it to an instance. On the Dashboard, go to “Compute →  Volumes” in the left navigation pane if you are not already on the page which shows the list of your volumes. On the right side next to your volume there is a drop-down box.   <br />
Select <strong>Edit attachments</strong>.</p>

<p><img src="images/scrDashboardVolume3.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>A window will open in which you can select your instance. If you don’t see any instance, you have no instance running in the same <em>Availability Zone</em>. In this case, create one as described in <a href="launching.html">this earlier section</a>.</p>

<p><img src="images/scrDashboardVolume4.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>Select your instance and click <strong>Attach Volume</strong>. The status of your instance will switch to <em>“Attaching”</em>, and when it has been attached successfully, it should display <em>“In-Use”</em>. You should also see the Server and Device that the volume is attached to. In the example below, it is attached to <em>MyFirstInstance</em> and to the device <em>/dev/vdc</em>.</p>

<p><img src="images/scrDashboardVolume5.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>In order to detach the volume again, you would go to the drop-down next to your volume again and select <strong>Edit attachments</strong>. A window opens in which you may detach the volume again. Your data won’t be lost, it will only be detached from the particular instance. You can re-attach it later again to any instance.</p>

<p><img src="images/scrDashboardVolume6.png" class="aligncenter" style="width:60%; " alt="image" /></p>

<h3 id="step-3-preparing-your-volume-for-use">Step 3: Preparing your volume for use.</h3>

<p>After you have created your Volume and attached it to your instance you will have to take a few extra steps to prepare that volume for use: you will have to (1) format it and (2) mount it.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The section about <a href="ephemeralStorage.html">On-Instance Storage</a> has more information about formatting and mounting drives.</p>

				</div>

<p>Log in to your instance via ssh (or use a terminal on your remote desktop) to type in the following commands.</p>

<h4 id="step-31-look-up-where-your-volume-has-been-created">Step 3.1. Look up where your volume has been created</h4>

<p>On your Dashboard, go to <em>Compute &gt; Volumes</em> and you should see your volume. In the column <strong>Attached to</strong> it should display something like</p>

<p><em>“Attached to &lt;YourInstanceName&gt; on /dev/vdc”</em></p>

<p>It may also be attached to <em>/dev/vdb</em>, <em>/dev/vdd</em> or something else. <strong>Take note of the device name</strong> that it has been attached to and use this instead of <em>/dev/vdc</em> in the following.</p>

<h4 id="step-32-format-the-volume">Step 3.2: Format the volume.</h4>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Formatting erases all data. <strong>All your data on this volume will be lost</strong>. You should do this only the first time you use the volume, or if you are sure that you want to erase all data. If you don’t want to erase the data, skip to the next step.</p>

				</div>

<p>A new Volume may not have a file system (depending on how it was created) and you need to create one before mounting.</p>

<p>The exact command syntax is depends on the instance’s operating system and the type of filesystem you require. In this example we will create an <em>ext4</em> file system (a popular file system on linux) for an Ubuntu 14.10  instance.</p>

<p>To format the drive, type:</p>

<p><code>sudo mkfs.ext4 /dev/vdc</code></p>

<p>Display information about your disks with</p>

<p><code>sudo lsblk -f</code></p>

<p>or</p>

<p><code>sudo parted -l</code></p>

<p>This should now show that <em>/dev/vdc</em> has the <em>ext4</em> file system.</p>

<h4 id="step-33-mount-the-volume">Step 3.3: Mount the volume.</h4>

<p>Mounting a disk has already been discussed in detail for the secondary drive of the <a href="ephemeralStorage.html">Ephemeral storage</a>, so at this point, only a summary is provided:</p>

<p>To mount your volume, you will have to create a folder first to which the device will be mounted, e.g.:</p>

<p><code>mkdir ~/MyVolumeStore</code></p>

<p>Then, mount this folder:</p>

<p><code>sudo mount /dev/vdc ~/MyVolumeStore</code></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>This will mount the disk if the type of file system can be guessed. 
Otherwise you may have to specify the file system type with the -t option, e.g.  <br />
<code>sudo mount /dev/vdc ~/MyVolumeStore -t ext4.</code></p>

<p>If you did not create and format the Volume then you can look up the filesystem type:  <br />
<code>sudo parted -l</code></p>

				</div>

<p>You can now access your volume on <em>~/MyVolumeStore</em> (MyVolumeStore in your home directory). You may not have write permission on the Volume yet, you can allow write access for the user <em>ubuntu</em> with:</p>

<p><code>sudo chown ubuntu ~/MyVolumeStore</code></p>

<p>Alternatively, you may grant write access to the &lt;user group&gt; (replace &lt;user group&gt; with the name of the user group, e.g. <em>ubuntu</em>):</p>

<p><code>sudo chgrp &lt;user group&gt; ~/MyVolumeStore</code>  <br />
<code>sudo chmod g+rwx ~/MyVolumeStore</code></p>

<h2 id="copying-files-across">Copying files across</h2>

<p>You may want to easily access files on your ephemeral or volume storage from your local office computer. We will discuss two ways to do this:</p>

<ol>
  <li>
    <p>Using a SFTP client</p>
  </li>
  <li>
    <p>On the command line, using a <em>secure copy</em>  command</p>
  </li>
</ol>

<h3 id="option-1-using-a-sftp-client">Option 1: Using a SFTP client</h3>

<p>You may use any FTP client which also supports the secure <em>SFTP</em> protocol, which uses <strong>ssh</strong> to secure the connection. There are many clients you may use. In this tutorial, we are going to describe the setup for the popular <em>FileZilla</em> FTP client.</p>

<p><strong>Step 1. Install FileZilla</strong></p>

<ul>
  <li>
    <p><strong>Windows and Mac:</strong>  <br />
  Download the <em>FileZilla client</em> (not the server!) for your OS on the <a href="https://filezilla-project.org/">FileZilla website</a>. Follow the installation instructions for your platform.</p>
  </li>
  <li>
    <p><strong>Linux:</strong>   <br />
  It is strongly recommended that you use the package manager of your distribution. E.g. on Ubuntu, you can install with:  <br />
  <code>sudo apt-get install filezilla</code>  <br />
  Alternatively, you can also find FileZilla in the Ubuntu Software Center.</p>
  </li>
</ul>

<p><strong>Step 2. Enable ssh agent to handle your private key.</strong></p>

<p>It is possible to add a key file to the FileZilla client (On <em>Edit &gt; Settings</em>, or a Mac, this is <em>FileZilla &gt; Settings</em>, and then add the key file on <em>Connection &gt; SFTP)</em>, and then use the ‘Interactive’ logon type. 
However, when adding the key directly to FileZilla, it is converted to an <strong>unprotected</strong> one. This is not recommended.
So we will use another method: We will use a <strong>SSH authentication agent</strong>, which holds your private keys in memory, already decoded, so that you can use them without needing to type a passphrase.</p>

<ul>
  <li>
    <p><strong>Windows:</strong>   <br />
  You willl need to download another tool from <em>PuTTY</em> called <em>Pageant</em> (the <em>PuTTY</em> SSH authentication agent). You can find instructions on how to install <em>Pageant</em> and load your key in the <a href="appendices.html">Appendix</a>.</p>

    <div class="bgImportant">
                  <img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
                    margin:0px; margin-right:10px; margin-bottom:5px;" />
                  <p>Don’t forget to <strong>close Pageant</strong> when you’re done! Otherwise any user with access to your computer can simply open FileZilla and access your files without having to type the ssh key passphrase. To close pageant, go to the system tray icon, right click and <strong>Exit</strong> pageant.</p>

              </div>
  </li>
  <li>
    <p><strong>Linux and Mac OS X:</strong>  <br />
  Open up a terminal on your local computer. Add your ssh key to the agent:</p>

    <p><code>ssh-add ~/.ssh/Nectar_Key</code></p>

    <p>It will ask you for the passphrase. Type this in to unlock the key and add it to the agent.</p>

    <div class="bgImportant">
                  <img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
                    margin:0px; margin-right:10px; margin-bottom:5px;" />
                  <p>Don’t forget to <strong>remove the key</strong> from the agent when you are done!
Otherwise any user with access to your computer can simply open FileZilla and access your files without having to type the ssh key passphrase. Remove the key with:   <br />
<code>ssh-add -d ~/.ssh/Nectar_Key</code>  <br />
To make sure your key is not loaded, type:  <br />
<code>ssh-add -l</code>  <br />
and the <em>Nectar_Key</em> should not be listed.</p>

              </div>
  </li>
</ul>

<p><strong>Step 3. Configure your site in FileZilla</strong></p>

<p>Open FileZilla and go to <em>File &gt; Site Manager</em>.
<img src="images/scrFileZillaSiteManager1.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<p>Specify the following details:</p>

<ul>
  <li><strong>Host</strong>: Your IP address</li>
  <li><strong>Port</strong>: 22</li>
  <li><strong>Protocol</strong>: SFTP - SSH File Transfer Protocol</li>
  <li><strong>Logon type</strong>: Normal</li>
  <li><strong>User</strong>: ubuntu</li>
  <li><strong>password</strong>: The password for <em>ubuntu</em> user, however it will not be used because you are using the SSH key instead, so you can leave this empty.</li>
</ul>

<p>On the left-hand panel, you may <strong>rename your site</strong> to something more meaningful, e.g. “NeCTAR”.</p>

<p>Click <strong>Connect</strong> to connect to your instance and close the site manager. Whenever you want to reconnect, you have to open the <em>Site Manager</em> again. You can also access it via the symbol on the top right of the window.</p>

<p>Then, you will be asked whether you want to trust the host. You can answer with <strong>Yes</strong>.
<img src="images/scrFileZillaSiteManager2.png" class="aligncenter" style="width:60%; " alt="image" /></p>

<p>You should now be connected to your instance and see your files:</p>

<p><img src="images/scrFileZillaSiteManager3.png" class="aligncenter" style="width:80%; " alt="image" /></p>

<ul>
  <li>in the left-hand pane, your local files are listed</li>
  <li>on the right-hand pane, you will see the files on your instance.</li>
</ul>

<p>You can drag and drop between them or drag and drop to/from file windows on your computer.</p>

<p>When you are done, close the window to disconnect.</p>

<h3 id="option-2-use-the-command-line">Option 2: Use the command line</h3>

<p>Instructions vary between Linux/Mac and Windows. Follow the instructions for your OS below.</p>

<h4 id="windows-2">Windows</h4>

<p>You may use the <em>PuTTY</em> command line tool <em>pscp</em>.</p>

<p>First, open the Windows Command prompt: On Windows earlier than 8, click on the <em>Start</em> button locate the Search filed. On newer Windows systems, click <em>Search</em> in the right-hand pane. Type <em>“cmd”</em> in the search field and your command line prompt will open.</p>

<p>Download <em>pscp.exe</em> from the <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY website</a> and save it in your <em>C:\WINDOWS\system32</em> folder.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Saving <em>pscp.exe</em> in the <em>system32</em> folder is the easiest way to do it. If you cannot access your <em>system32 folder</em>, you may add the folder where you downloaded <em>pscp.exe</em> to the systems <em>PATH</em> environment variable. Say you have saved <em>pscp.exe</em> for example in <em>D:\Documents\pscp.exe</em>. Go to your Windows command line that you just opened, and type:</p>

<p><code>set PATH=%PATH%;"D:\Documents\pscp.exe"</code></p>

				</div>

<p>Now go to your Windows command prompt.</p>

<p>The <em>pscp.exe</em> command takes two <em>paths</em> as arguments:</p>

<ul>
  <li>
    <p>A path we shall symbolically name <em>&lt;local-file-path&gt;</em> is a path on your local computer. If you copy a file from your instance to your local computer, this will be the path to the folder on your local computer where you want to copy the file to. If you copy a file from your local computer to the instance, this will be the path on your local computer where the file is located.</p>
  </li>
  <li>
    <p>A path we shall symbolically name  <em>&lt;instance-file-path&gt;</em> is a path on your instance. If you are copying a file from your local computer to the instance, this is the path to the folder where you want to copy the file to. If you are copying a file from the instance to your local computer, this is the path where the file you want to copy is located on your instance.</p>
  </li>
</ul>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you have another username than <em>ubuntu</em>, replace <em>ubuntu</em> in the following commands with your user name.</p>

				</div>

<p>To copy a file <em>to</em> your instance, go to your windows command prompt and type:</p>

<p><code>pscp.exe -i &lt;path-to-ssh-key&gt; &lt;local-file-path&gt; ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt;</code></p>

<p>replacing the N’s with your IP address. You need to specify the path where you have saved your nectar ssh key in &lt;path-to-ssh-key&gt;.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Note that if you are using <em>Pageant</em> (as described in the <a href="appendices.html">Appendix</a>), you can skip the option <em>-i &lt;path-to-ssh-key&gt;</em> in all <em>pscp</em> commands.</p>

				</div>

<p>For example, to copy the local file <em>c:\documents\foo.txt</em> to your instance and save it there in the folder <em>/data</em>, if your private key is saved in <em>c:\documents\Nectar_Key.ppk</em>, you would type:</p>

<p><code>pscp -i c:\documents\Nectar_Key.ppk c:\documents\foo.txt ubuntu@NNN.NNN.NNN.NNN:/data</code></p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Note that the <em>local</em> path to <em>c:\documents\foo.txt</em> has to be given in Windows syntax, using backslash \ instead of forward slash /. The <em>&lt;instance-file-path&gt;</em> on your instance however uses the Linux notation with the forward slash / separator.</p>

				</div>

<p><em>Note:</em> If you leave <em>&lt;instance-file-path&gt;</em> empty, it will copy your file into your <em>ubuntu</em> users <em>home</em> directory.</p>

<p>To copy a file <em>from</em> your instance to your local computer, you have to swap the order of the <em>&lt;local-file-path&gt;</em> and <em>ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt;</em> in the command above:</p>

<p><code>pscp.exe -i &lt;path-to-ssh-key&gt; ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt; &lt;local-file-path&gt;</code></p>

<p><em>Note:</em> If you use <em>”.”</em> as <em>&lt;local-file-path&gt;</em>, it will copy your file into your <em>current working directory</em>, which is the folder your PuTTY terminal is currently operating from.</p>

<p>For example, if you want to copy the file <em>/data/foo.txt</em> to your <em>C:\documents</em> folder on your local computer, and your private ssh key is located in <em>C:\documents\Nectar_Key.ppk</em>:</p>

<p><code>pscp.exe -i C:\documents\Nectar_Key.ppk ubuntu@NNN.NNN.NNN.NNN:/data/foo.txt C:\documents</code></p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If the <em>pscp</em> command is not working, make sure you have no error in the paths to your ssh key or your OpenRC file. On Windows, white spaces are problematic. If you path has white spaces, put the whole path in quotation marks, e.g. <em>“D:\My Files\pscp.exe”</em>. Also, note that you have to use the <em>backslash</em> \ in windows, instead of the forward slash / on Linux systems.</p>

				</div>

<h4 id="linux-or-mac-os-x">Linux or Mac OS X</h4>

<p>You can use the <em>scp</em> command to copy files across.</p>

<p>The <em>scp</em> command takes two <em>paths</em> as arguments:</p>

<ul>
  <li>
    <p>A path we shall symbolically name <em>&lt;local-file-path&gt;</em> is a path on your local computer. If you copy a file from your instance to your local computer, this will be the path to the folder on your local computer where you want to copy the file to. If you copy a file from your local computer to the instance, this will be the path on your local computer where the file is located.</p>
  </li>
  <li>
    <p>A path we shall symbolically name  <em>&lt;instance-file-path&gt;</em> is a path on your instance. If you are copying a file from your local computer to the instance, this is the path to the folder where you want to copy the file to. If you are copying a file from the instance to your local computer, this is the path where the file you want to copy is located on your instance.</p>
  </li>
</ul>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you have another username than <em>ubuntu</em>, replace <em>ubuntu</em> in the following commands with your user name.</p>

				</div>

<p>To copy a file <em>to</em> your instance:</p>

<p><code>scp -i ~/.ssh/Nectar_Key &lt;local-file-path&gt; ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt;</code></p>

<p>replacing the N’s with your IP address.</p>

<p><em>Note:</em> If you leave <em>&lt;instance-file-path&gt;</em> empty, it will copy your file into your <em>ubuntu</em> users <em>home</em> directory.</p>

<p>For example, if you want to copy the file <em>/home/username/foo.txt</em> to your <em>/data</em> folder on the instance:</p>

<p><code>scp -i ~/.ssh/Nectar_Key /home/username/foo.txt ubuntu@NNN.NNN.NNN.NNN:/data</code></p>

<p>To copy a file <em>from</em> your instance to your local computer, you have to swap the order of the <em>&lt;local-file-path&gt;</em> and <em>ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt;</em> in the command above:</p>

<p><code>scp -i ~/.ssh/Nectar_Key ubuntu@NNN.NNN.NNN.NNN:&lt;instance-file-path&gt; &lt;local-file-path&gt;</code></p>

<p><em>Note:</em> If you use <em>”.”</em> as <em>&lt;local-file-path&gt;</em>, it will copy your file into your <em>current working directory</em>.</p>

<p>For example, if you want to copy the file <em>/data/foo.txt</em> to your <em>/home/username/</em> folder on your local computer:</p>

<p><code>scp -i ~/.ssh/Nectar_Key ubuntu@NNN.NNN.NNN.NNN:/data/foo.txt /home/username/</code></p>

<h2 id="summary">Summary</h2>

<p><strong>Well done!!</strong></p>

<p>You have completed the probably longest and hardest Module and are on your way to becoming an experienced Cloud user.</p>

<p>This module has provided hands-on instructions on how to launch an instance and connect to it. Two ways to connect have been presented: (a) with the command line (ssh) and (b) to a remote desktop. After having connected, we have gone through the first configurations necessary (e.g. updating the system) and then we went on to instructions on how to set up the storage so it can be accessed from the instance and remotely from the office computer.</p>

<p>Topics have covered:</p>

<ul>
  <li>Registering on the Dashboard</li>
  <li>Creating SSH Keys</li>
  <li>Launching an instance</li>
  <li>Connecting via ssh</li>
  <li>Installing and connecting to a remote desktop</li>
  <li>Running graphical interfaces via the SSH shell</li>
  <li>Installing a web server and creating a first simple website</li>
  <li>Managing storage
    <ul>
      <li>Format and mount secondary ephemeral drive and volumes</li>
      <li>Access the object store via the Dashboard and via other clients</li>
      <li>Copying files across using FTP or scp</li>
    </ul>
  </li>
</ul>

<p>You may be interested in taking a look at the <a href="appendices.html">Appendix</a> which provides some more information and instructions for some troubleshooting.</p>

<p>You are now ready to go on with <a href="/package08/sections/index.html" title="Module 8">Module 8</a> which will discuss a few security-related topics.</p>

<h2 id="appendix">Appendix</h2>

<p>A number of topics are covered in the appendices. Scroll through the document to find what you may be looking for.</p>

<h3 id="create-a-new-security-group">Create a new security group</h3>

<p>On the Dashboard:</p>

<ol>
  <li>
    <p>Go to <strong>Access and Security</strong></p>
  </li>
  <li>
    <p><strong>Create Security Group</strong></p>
  </li>
  <li>
    <p>Name it  something meaningful, and add any description</p>
  </li>
  <li>
    <p>Click <strong>Create Security Group</strong>. You will see the new group in the list now.</p>
  </li>
  <li>
    <p>Click <strong>Manage rules</strong> at the right of your group.</p>
  </li>
  <li>
    <p>At the top right of the page, click <strong>Add rule</strong></p>
  </li>
  <li>
    <p>You probably want an <strong>Incoming TCP</strong> rule.</p>
  </li>
  <li>
    <p>If you want to allow access from any computer, type 0.0.0.0/0 in the CIDR</p>
    <div class="bgInfo">
                 <img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
                     margin:0px; margin-right:10px; margin-bottom:5px;" />
                 <p>The part before the slash <em>”/”</em> is the address for localhost and the part after the slash specifies the subnet mask — you don’t need to worry about the meaning in this tutorial, but look it up online, e.g. google, if you want to restrict access to computers from only a certain range of IP addresses, e.g. only computers from within a university.</p>


             </div>
  </li>
</ol>

<p>After you have created the security group, you can add it to the instance. Go to <em>Compute &gt; Instances</em> and in the right-hand drop down menu for your instance, select <strong>Edit Security Groups</strong>.</p>

<h3 id="troubleshooting-linux-and-mac-problems-connecting">Troubleshooting Linux and Mac: Problems connecting</h3>

<p>Check which ports are open on your system:</p>

<ul>
  <li>
    <p>Using nmap to check with ports are open: <br />
  On Linux:  <br />
  <code>sudo apt-get install nmap</code> <br />
  On Mac OS X:  <br />
  <code>brew install nmap</code>  <br />
  The nmap command will show you which ports of the computer are open, i.e., there is a server or client using it.   <br />
  <code>sudo nmap -sT -O localhost</code> <br />
  For example, if you are tyring to connect to ssh, type the above commands into your local terminal, and you should see the line:  <br />
  <em>22/tcp   open  ssh</em>  <br />
  Or, if you are trying to get VNC going, you can type the commands in your instances ssh terminal, and the output should show something like:  <br />
  <em>5900/tcp open vnc</em></p>
  </li>
  <li>
    <p>Using netstat (Linux):  <br />
  <code>sudo netstat -tulpn</code></p>
  </li>
  <li>
    <p>Using nc (netcat) to check whether there is something listening on the other side:  <br />
  <code>nc -v -w 5 NNN.NNN.NNN.NNN -z &lt;port&gt;</code>  <br />
  (-v verbose, -w timeout, -z just scan for daemons)</p>
  </li>
</ul>

<p>If you get the error:</p>
<div class="bgTerminal"><pre class="PreformatTerminal">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    
@  WARNING: UNPROTECTED PRIVATE KEY FILE! @    
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    
Permissions 0664 for '&lt;yourkey&gt;' are too open.    
It is required that your private key files are NOT accessible by others.    
This private key will be ignored.    
bad permissions: ignore key: &lt;yourkey&gt;    
Permission denied (publickey).</pre></div>

<p>Then you have changed the access rights to the key while copying it around.
Fix this with:</p>

<p><code>chmod go-rw &lt;yourkey&gt;</code></p>

<h3 id="converting-ssh-keys-from-linux-for-putty">Converting ssh keys from Linux for PuTTY</h3>

<p>If you have generated your ssh key on a Linux system and now want to use it in Putty, you have to convert the keys first. If you have generated your key file with putty, you <em>don’t need to do this</em>. To convert the key, follow these steps:</p>

<ol>
  <li>
    <p>Start PuTTYGen.</p>
  </li>
  <li>
    <p>Click on the menu <strong>Conversions</strong> and select <strong>Import key</strong>.</p>
  </li>
  <li>
    <p>Select your private key and enter the passphrase.</p>
  </li>
  <li>
    <p>Click on the button <strong>Save private key</strong> and save your key file.</p>
  </li>
</ol>

<p>You may also want to simply create a separate set of keys for PuTTY (see <a href="createSSHKey.html">this section</a>). In this case, you have to add the new key as an authorized key on the instance. This is explained <a href="#AddingSSH">here</a> in this Appendix.</p>

<h3 id="windows-using-pageant-to-handle-your-ssh-key">Windows: Using <em>Pageant</em> to handle your ssh key</h3>

<p>You may use a <strong>SSH authentication agent</strong>, which holds your private keys in memory, already decoded, so that you can use them without needing to type a passphrase.</p>

<p><em>PuTTY</em> also offers a tool called <em>Pageant</em>, which is the <em>PuTTY</em> SSH authentication agent. Download it on the <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY website</a>. If you have not generated your ssh key with <em>PuTTY</em> in the first place, you will also need to convert it to the <em>PuTTY</em> format. You can do this using the tool <em>PuTTYgen</em> (you can find instructions on how to do this in this Appendix).</p>

<p>To load your ssh key with <em>Pageant</em>:</p>

<p>Step 1.</p>

<p><img src="images/scrPageant1.png" class="alignright" style="width:170px; margin-bottom:5px" alt="image" />
Start up <em>Pageant</em> (by clicking on <em>pageant.exe</em> which you downloaded). In your system tray, you’ll see the <em>Pageant</em> icon appear: A computer symbol with a hat on.</p>

<p>Step 2.</p>

<p><img src="images/scrPageant2.png" class="alignright" style="width:170px; margin-top:5px; margin-bottom:5px;" alt="image" />
Right-click the icon and select <strong>Add Key</strong> and select your private key (<em>PPK</em>) file. Enter your pass phrase. Now, your key is loaded in the Background and you can use FileZilla via the secure FTP protocol <em>SFTP</em> in the next step.</p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Don’t forget to <strong>close Pageant</strong> when you’re done! Otherwise any user with access to your computer can easily gain access with your ssh key without having to type the ssh key passphrase. To close pageant, go to the system tray icon, right click and <strong>Exit</strong> pageant.</p>

				</div>

<p>See also the <a href="https://www.digitalocean.com/community/tutorials/how-to-use-pageant-to-streamline-ssh-key-authentication-with-putty">pageant tutorial on digitalocean</a>.</p>

<h3 id="creating-a-new-user-account">Creating a new user account</h3>

<p>If you want to create a new user account on your VM, type in the following command in your ssh terminal:</p>

<p><code>sudo adduser &lt;username&gt;</code></p>

<p>replacing &lt;username&gt; with the username you would like to create. It will prompt you to create a password for this user, and type in their name and contact details.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>If you would like to just create the user without specifying password and details, use</p>

<p><code>sudo useradd &lt;username&gt;</code></p>

<p>instead. You then can set the user password with:</p>

<p><code>sudo passwd &lt;username&gt;</code></p>


				</div>

<p>It is recommended you use a random password initially, and then give it to the user, with the <strong>strong</strong> recommendation of changing it (a user cannot set their own initial password themselves, hence this initial step is required). Users can change their own password with:</p>

<p><code>passwd</code></p>

<p>You have now created a user with minimal privileges. For example, the user cannot perform administration tasks which require the <em>sudo</em> command prefix. If you would like to add privileges for this user, you can add it to certain <em>privileges groups</em>, e.g. the sudo group:</p>

<p><code>sudo adduser &lt;username&gt; sudo</code></p>

<p>The user can then use the <em>sudo</em> command to perform administrative tasks. They will have to type in <em>their own password</em> to execute sudo commands (this is a security measure in case they left their keyboard unattended).</p>

<p>To check the right groups the user is assigned to, type</p>

<p><code>id &lt;username&gt;</code></p>

<div class="bgImportant">
					<img src="/images/glyphicons-197-circle-exclamation-mark.png" alt="image" align="left" style="width:26px; height:26px; 
					  margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>Each user should have their own ssh keys. Ask them to create it, using their passphrase of choice, and then send you their public key. Add their public key to your VM by following instructions <a href="#AddingSSH">here</a> in this appendix.</p>

				</div>

<h3 id="a-nameaddingssha-adding-a-new-ssh-key"><a name="AddingSSH"></a> Adding a new ssh key</h3>

<p>If you want to use a new key to connect to the instance, you have to add it to the file <em>authorized_keys</em> on the user’s account. If you are adding another key for the <em>ubuntu</em> user, the &lt;username&gt; in the command below is <em>ubuntu</em>, otherwise it is the user name you want to add a key for.</p>

<p>First, create the <em>.ssh</em> directory for the user, if it does not exist yet (if it exists, this command will return an error):</p>

<p><code>sudo mkdir /home/&lt;username&gt;/.ssh</code></p>

<p>Then, edit the file <em>authorized_keys</em></p>

<p><code>sudo nano /home/&lt;username&gt;/.ssh/authorized_keys</code></p>

<p>Paste the contents of your public key as one line into this file.</p>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p><strong>Tip:</strong> Copy the content of the public key by opening it with a text editor, marking all text and copying with <strong>CTRL+C</strong>. Then, go to your PuTTY Window which has the editor open for authorized_keys. Pasting the content will not work with <strong>CTRL+V</strong> on PuTTY, but instead, clicking the right or middle mouse button should paste the content.</p>

				</div>

<p>Similarly, if you want to remove a key, you have to delete the line for that key from the <em>authorized_key</em> file on your instance.</p>

<p>Make sure that the directories and files have the correct ownership and access:</p>

<p><code>sudo chown -R &lt;username&gt; /home/&lt;username&gt;/.ssh</code>  <br />
<code>sudo chgrp -R &lt;username&gt; /home/&lt;username&gt;/.ssh</code>  <br />
<code>sudo chmod 700 /home/&lt;username&gt;/.ssh</code>  <br />
<code>sudo chmod 500 /home/&lt;username&gt;/.ssh/authorized_keys</code></p>

<h3 id="ssh-tunnelling-explained">SSH Tunnelling explained</h3>

<p>SSH Tunnelling is best explained with an example. Imagine you’re on a private network with very conservative firewall rules which don’t allow connections to a specific server. For example, <em>blockedsite.com</em> is not accessible from your network. You can of course ask your system administrator to free up this site for you, but you may have to wait for the approval. To get around this firewall rule we can redirect our connection via a port that does not block this website: We can create a <em>tunnel</em> through a server which is not on our network and which can access <em>blockedsite.com</em>. We call this server the <em>gateway</em>.</p>

<p><img src="images/sshtunnel.png" class="aligncenter" style="width:50%; margin-top:20px; margin-bottom: 20px;" alt="image" /></p>

<p>Let’s say <em>blockedsite.com</em> uses the <em>http</em> protocol (as most websites do) through Port 80. Instead of connecting our port 80 to the <em>blocksite.com</em>’s port 80 (which would not work), we will redirect all traffic from our port 80 through the secure ssh port 22. This one will not be blocked by the firewall, and nobody will be able to decipher the traffic going through it (unless they get access to your private key and passphrase of course). On the gateway, our connection will come in at Port 22, and the ssh server will then redirect the traffic to port 80 on <em>blockedsite.com</em>. We call this technique <em>local port forwarding</em>. Of course, the connection between the gateway and the server of <em>blockedsite.com</em> is not encrypted; only the tunnel between our computer and the gateway is.</p>

<p>The technique of local port forwarding through an ssh tunnel can also be used to create a secure connection all the way to the destination server, so that there is no point at which the connection is not encrypted. In this case, the gateway is also the destination server itself. <br />
As an <strong>example</strong>, we are going to discuss the setup for ssh tunneling on port <strong>5900</strong> on our instance (the default VNC port), using the gateway <em>localhost</em>. The example is for Mac and Linux. Observe that the gateway is <em>localhost</em>, because when we specify the destination server, it is also the gateway in this case (this can be a bit confusing, because you would guess we specify the gateway first… but actually we first specify the destination server, and then the gateway through which we want to create the tunnel. From the gateway’s point of view, the destination server is <em>localhost</em>). The tunnelled service will be available on <em>our</em> localhost, port <strong>6000</strong> (we use different numbers so you can distinguish it in the text below). We could do this for any other port numbers.</p>

<ol>
  <li>
    <p>On your machine, create a tunnel from your machine (port 5900) to the other machine (port 5900)  <br />
<code>ssh -i &lt;your-key-name&gt; -L 6000:localhost:5900 -N -f -l ubuntu NNN.NNN.NNN.NNN</code>  <br />
 replacing NNN.NNN.NNN.NNN with the IP address of the instance.</p>
  </li>
  <li>
    <p>On the instance: Install and start any service that will listen on port 5900 (e.g. the VNC Server).</p>
  </li>
  <li>
    <p>A quick test should show you that you cannot actually directly connect to port 5900 on the instance:  <br />
<code>telnet 144.6.227.50 5900</code>  <br />
 This will try connect you to the remote port (without any useful application, but it’s a good way to test whether the port is open). The shell should just say “trying to connect…” but nothing happens: Because we have not allowed access to port 5900 from outside… only via the SSH tunnel! And the ssh tunnel is accessible via <em>our</em> localhost. End the connect trying with <strong>Ctrl+C</strong>. Instead, try:  <br />
 <code>telnet localhost 6000</code>  <br />
 or  <br />
 <code>nc -v -w 5 localhost -z 6000</code>  <br />
 And you should see a command prompt (no error). So now you are talking to the port and can specify commands specific to the server, but we don’t really want to do this now.  <br />
 To quit the telnet command prompt: Hit <strong>Ctrl+]</strong> (control and the right-bracket). That will return you to a telnet command prompt. From there you can enter the quit command (typing <strong>q</strong> is sufficient) and you will be returned to your usual Windows command prompt.   <br />
 If this still does not work, make sure there is a server listening on port 5900. Check this with:  <br />
 <code>sudo netstat -tulpn</code>  <br />
 There should be your service listed as “Listening” on the port you have meant it to provide its service. If your service is not listening on that port, it won’t be possible to connect to it either.</p>
  </li>
</ol>

<div class="bgInfo">
					<img src="/images/glyphicons-196-circle-info.png" alt="image" align="left" style="width:26px; height:26px; 
						margin:0px; margin-right:10px; margin-bottom:5px;" />
					
<p>The <em>ssh -L</em> options are explained as follows.</p>

<p>Syntax:  <br />
-L &lt;local-port-to-listen&gt;:&lt;remote-host&gt;:&lt;remote-port&gt;  &lt;gateway&gt;</p>

<ul>
  <li>
    <p><strong>-N</strong> : Do not execute a remote command i.e. just forward ports.</p>
  </li>
  <li>
    <p><strong>-f</strong>: Requests ssh to go to background just before command execution. Once password supplied it will go to background and you can use prompt for type commands on local system.</p>
  </li>
  <li>
    <p><strong>-l ubuntu</strong>: ubuntu is the user to log in as on the remote machine (sshserver.mydomain.com).
  <em>Note:</em>  The <strong>-f -N</strong> options in the above command cause the tunnel to run in the background: once you have typed in the password, the command line prompt returns to your local shell. In this case, if you ever want to close your ssh connection, you have to kill the connection:  <br />
<code>ps aux | grep ssh</code>  <br />
  Then, find your ssh tunneling command and note the number on the left, after your user name. To <em>kill</em> (close) the ssh tunnel, type:  <br />
  <code>kill &lt;the-ssh-tunnel-process-number&gt;</code>  <br />
  If you <em>don’t</em> use the <strong>-N -f</strong> options, you will be logged into an ssh terminal to your instance, and can use it as usual to type commands on your instance. If you type <em>logout</em> or close the terminal, the ssh tunnel will close as well.</p>
  </li>
</ul>

				</div>

<p>This is the end of Module 7. Continue with <a href="/package08/sections/index.html" title="Module 8">Module 8</a></p>


      </div>
    </div>
  </body>

</html>
